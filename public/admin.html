<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - Chiwawa Server</title>
    <meta name="description" content="–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º Chiwawa">
    <meta name="author" content="ebluffy">
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com https://cdn.quilljs.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://cdn.quilljs.com; img-src 'self' data: https:; font-src 'self' https://cdnjs.cloudflare.com; connect-src 'self';">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmJiZjI0Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZjU5ZTBiIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTIiIGZpbGw9InVybCgjYSkiLz48dGV4dCB4PSIzMiIgeT0iNDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIzMiIgZmlsbD0iIzFmMjkzNyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+QlTwvdGV4dD48L3N2Zz4=">
    
    <!-- –°–æ–∑–¥–∞—Ç–µ–ª—å: ebluffy -->
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Quill.js –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    
    <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã Quill -->
    <style>
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è Quill —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ */
        .ql-toolbar.ql-snow {
            background: #2a2a2a !important;
            border: 1px solid #444 !important;
            border-radius: 6px 6px 0 0 !important;
            border-bottom: 1px solid #444 !important;
        }
        
        .ql-toolbar.ql-snow .ql-formats {
            margin-right: 15px;
        }
        
        .ql-toolbar.ql-snow button,
        .ql-toolbar.ql-snow .ql-picker-label {
            color: #e5e5e5 !important;
            background: transparent !important;
            border: none !important;
            padding: 6px !important;
            margin: 2px !important;
            border-radius: 4px !important;
        }
        
        .ql-toolbar.ql-snow button:hover,
        .ql-toolbar.ql-snow .ql-picker-label:hover {
            background: #444 !important;
        }
        
        .ql-toolbar.ql-snow button.ql-active,
        .ql-toolbar.ql-snow .ql-picker-label.ql-active {
            background: #FFAA00 !important;
            color: #000 !important;
        }
        
        .ql-toolbar.ql-snow .ql-picker {
            color: #e5e5e5 !important;
        }
        
        .ql-toolbar.ql-snow .ql-picker-options {
            background: #2a2a2a !important;
            border: 1px solid #444 !important;
        }
        
        .ql-toolbar.ql-snow .ql-picker-item {
            color: #e5e5e5 !important;
        }
        
        .ql-toolbar.ql-snow .ql-picker-item:hover {
            background: #444 !important;
        }
        
        .ql-container.ql-snow {
            background: #1a1a1a !important;
            border: 1px solid #444 !important;
            border-top: none !important;
            border-radius: 0 0 6px 6px !important;
        }
        
        .ql-editor {
            background: #1a1a1a !important;
            color: #e5e5e5 !important;
            border: none !important;
            min-height: 300px !important;
        }
        
        .ql-editor.ql-blank::before {
            color: #888 !important;
        }
        
        /* –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫ */
        .ql-toolbar.ql-snow button svg {
            fill: #e5e5e5 !important;
        }
        
        .ql-toolbar.ql-snow button:hover svg {
            fill: #fff !important;
        }
        
        .ql-toolbar.ql-snow button.ql-active svg {
            fill: #000 !important;
        }
        
        /* –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ */
        .ql-toolbar.ql-snow .ql-picker-options {
            z-index: 1000 !important;
        }
    </style>
    
    <!-- Font Awesome –¥–ª—è –∏–∫–æ–Ω–æ–∫ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'minecraft-dark': '#0a0a0a',
                        'minecraft-darker': '#050505',
                        'minecraft-gold': '#FFAA00',
                        'minecraft-yellow': '#FFFF55',
                        'minecraft-gray': '#2a2a2a',
                        'minecraft-light-gray': '#404040',
                        'minecraft-lighter-gray': '#555555'
                    },
                    fontFamily: {
                        'minecraft': ['Courier New', 'monospace']
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate'
                    },
                    keyframes: {
                        glow: {
                            '0%': { boxShadow: '0 0 5px #FFAA00' },
                            '100%': { boxShadow: '0 0 20px #FFAA00, 0 0 30px #FFAA00' }
                        }
                    },
                    backdropBlur: {
                        'xs': '2px',
                    }
                }
            }
        }
    </script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è Quill —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
    <style>
        /* Quill —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞ */
        .ql-snow {
            border: 1px solid #444 !important;
        }
        
        .ql-snow .ql-toolbar {
            background: #2a2a2a !important;
            border: 1px solid #444 !important;
            border-bottom: none !important;
        }
        
        .ql-snow .ql-container {
            background: #1a1a1a !important;
            color: #e5e5e5 !important;
            border: 1px solid #444 !important;
            border-top: none !important;
        }
        
        .ql-snow .ql-editor {
            background: #1a1a1a !important;
            color: #e5e5e5 !important;
            font-size: 14px;
            line-height: 1.6;
        }
        
        /* –ë–µ–ª—ã–µ —Å–∏–º–≤–æ–ª—ã –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */
        .ql-snow .ql-editor p,
        .ql-snow .ql-editor div,
        .ql-snow .ql-editor span,
        .ql-snow .ql-editor h1,
        .ql-snow .ql-editor h2,
        .ql-snow .ql-editor h3,
        .ql-snow .ql-editor h4,
        .ql-snow .ql-editor h5,
        .ql-snow .ql-editor h6,
        .ql-snow .ql-editor ul,
        .ql-snow .ql-editor ol,
        .ql-snow .ql-editor li,
        .ql-snow .ql-editor blockquote {
            color: #e5e5e5 !important;
        }
        
        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏—è */
        .ql-snow .ql-editor::before,
        .ql-snow .ql-editor::after {
            color: #e5e5e5 !important;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ —Ç—É–ª–±–∞—Ä–∞ */
        .ql-snow .ql-toolbar button {
            color: #e5e5e5 !important;
            border: 1px solid transparent;
            border-radius: 3px;
            transition: all 0.2s ease;
        }
        
        .ql-snow .ql-toolbar button:hover {
            background: #444 !important;
            border-color: #f8b500 !important;
        }
        
        .ql-snow .ql-toolbar button.ql-active {
            background: #f8b500 !important;
            color: #000 !important;
        }
        
        /* Dropdown –º–µ–Ω—é */
        .ql-snow .ql-picker {
            color: #e5e5e5 !important;
        }
        
        .ql-snow .ql-picker-options {
            background: #2a2a2a !important;
            border: 1px solid #444 !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5) !important;
        }
        
        .ql-snow .ql-picker-item {
            color: #e5e5e5 !important;
            transition: all 0.2s ease;
        }
        
        .ql-snow .ql-picker-item:hover {
            background: #444 !important;
        }
        
        .ql-snow .ql-picker-item.ql-selected {
            background: #f8b500 !important;
            color: #000 !important;
        }
        
        /* Tooltip */
        .ql-snow .ql-tooltip {
            background: #2a2a2a !important;
            border: 1px solid #444 !important;
            color: #e5e5e5 !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5) !important;
        }
        
        .ql-snow .ql-tooltip input {
            background: #1a1a1a !important;
            color: #e5e5e5 !important;
            border: 1px solid #444 !important;
        }
        
        .ql-snow .ql-tooltip a {
            color: #f8b500 !important;
        }
        
        /* –§–æ–∫—É—Å */
        .ql-snow .ql-editor.ql-blank::before {
            color: #888 !important;
            font-style: italic;
        }
        
        .ql-snow .ql-editor:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(248, 181, 0, 0.3) !important;
        }
    </style>
    
    <style>
        * {
            scrollbar-width: thin;
            scrollbar-color: #FFAA00 #1a1a1a;
        }
        
        *::-webkit-scrollbar {
            width: 8px;
        }
        
        *::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        *::-webkit-scrollbar-thumb {
            background: #FFAA00;
            border-radius: 4px;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .minecraft-bg {
            background-image: 
                radial-gradient(circle at 25% 25%, #2a2a2a 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, #404040 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
        }
        
        .glass-effect {
            background: rgba(42, 42, 42, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 170, 0, 0.1);
        }
        
        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        
        .btn-minecraft {
            background: linear-gradient(135deg, #FFAA00 0%, #FF8800 100%);
            border: 2px solid #FFAA00;
            color: #000;
            font-weight: bold;
            text-shadow: none;
            transition: all 0.3s ease;
        }
        
        .btn-minecraft:hover {
            background: linear-gradient(135deg, #FFFF55 0%, #FFAA00 100%);
            border-color: #FFFF55;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 170, 0, 0.4);
        }
        
        .nav-item:hover {
            color: #FFAA00 !important;
            transition: all 0.3s ease;
        }
        
        .admin-badge {
            background: linear-gradient(45deg, #ff0000, #ff6600);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        .admin-tab.active {
            border-bottom-color: #FFAA00 !important;
            color: #FFAA00 !important;
        }
        
        .admin-tab:hover {
            color: #FFAA00 !important;
        }
        
        .stat-card {
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 170, 0, 0.2);
        }

        /* === –°–¢–ò–õ–ò –î–õ–Ø –ù–û–í–û–ô –°–ò–°–¢–ï–ú–´ –ù–ê–°–¢–†–û–ï–ö === */
        .settings-category-tab.active {
            color: #FFD700 !important;
            border-bottom-color: #FFD700 !important;
        }

        .settings-category-content {
            min-height: 400px;
        }

        .setting-input {
            transition: all 0.3s ease;
        }

        .setting-input:focus {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);
        }

        .tooltip-icon:hover {
            color: #FFD700 !important;
            transform: scale(1.1);
            transition: all 0.2s ease;
        }

        .template-selector.border-minecraft-gold {
            background-color: rgba(255, 215, 0, 0.1);
        }

        .template-selector:hover {
            transform: translateY(-2px);
            transition: all 0.3s ease;
        }

        .setting-item {
            position: relative;
        }

        .setting-item:hover .tooltip-icon {
            opacity: 1;
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–µ —á–µ–∫–±–æ–∫—Å—ã –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .peer:checked + div {
            background-color: var(--checkbox-color, #FFD700);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–¥–∞ –≤ —à–∞–±–ª–æ–Ω–∞—Ö */
        #template-html {
            font-family: 'Courier New', monospace;
            tab-size: 2;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .settings-category-content {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive –¥–∏–∑–∞–π–Ω */
        @media (max-width: 768px) {
            .settings-category-tab {
                padding: 8px 12px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body class="minecraft-bg min-h-screen overflow-x-hidden relative">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="glass-effect sticky top-0 z-50 border-b border-minecraft-gold/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ -->
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-minecraft-yellow text-shadow flex items-center">
                        <i class="fas fa-crown text-minecraft-gold mr-2"></i>
                        Admin Panel
                    </span>
                </div>
                
                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å - –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ -->
                <div class="flex items-center space-x-6">
                    <a href="/" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="/rules" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–ü—Ä–∞–≤–∏–ª–∞</a>
                    <a href="/forum" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–§–æ—Ä—É–º</a>
                    <a href="/online" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–û–Ω–ª–∞–π–Ω</a>
                    <a href="/map" target="_blank" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–ö–∞—Ä—Ç–∞</a>
                </div>
                
                <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—å -->
                <div class="flex items-center space-x-4">
                    <!-- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ -->
                    <div class="flex items-center space-x-2">
                        <a href="https://discord.gg/chiwawa" target="_blank" id="discord-link" class="text-gray-400 hover:text-purple-400 transition-colors text-lg" title="Discord">
                            <i class="fab fa-discord"></i>
                        </a>
                        <a href="https://t.me/chiwawa" target="_blank" id="telegram-link" class="text-gray-400 hover:text-blue-400 transition-colors text-lg" title="Telegram">
                            <i class="fab fa-telegram"></i>
                        </a>
                    </div>
                    
                    <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
                    <div class="h-6 w-px bg-minecraft-gold/30"></div>
                    
                    <!-- –ü—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
                    <div class="relative">
                        <button id="profile-dropdown-btn" class="nav-item bg-gradient-to-r from-minecraft-gold to-yellow-500 text-minecraft-dark px-4 py-2 rounded-lg font-bold hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-minecraft-gold/50 cursor-pointer flex items-center space-x-2">
                            <div class="w-8 h-8 bg-minecraft-dark rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-minecraft-gold text-sm"></i>
                            </div>
                            <span id="admin-nickname" class="font-medium">ebluffy</span>
                            <span class="ml-2 px-2 py-1 bg-red-500/80 text-white text-xs font-bold rounded-full border border-red-500/40">
                                <i class="fas fa-crown mr-1"></i>ADMIN
                            </span>
                            <i class="fas fa-chevron-down text-xs ml-1"></i>
                        </button>
                        
                        <!-- Dropdown –º–µ–Ω—é -->
                        <div id="profileDropdown" class="absolute top-full right-0 mt-2 w-48 bg-minecraft-gray rounded-lg shadow-xl border border-minecraft-gold/30 hidden z-50">
                            <a href="/profile" class="block px-4 py-3 text-white hover:bg-minecraft-light-gray transition-colors border-b border-minecraft-gold/20">
                                <i class="fas fa-user-circle mr-2 text-minecraft-gold"></i>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
                            </a>
                            <a href="/admin" class="block px-4 py-3 text-minecraft-gold hover:bg-minecraft-light-gray transition-colors border-b border-minecraft-gold/20">
                                <i class="fas fa-crown mr-2 text-minecraft-gold"></i>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
                            </a>
                            <button id="logout-dropdown-btn" class="w-full text-left px-4 py-3 text-red-400 hover:bg-minecraft-light-gray transition-colors">
                                <i class="fas fa-sign-out-alt mr-2"></i>–í—ã–π—Ç–∏
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ -->
    <div id="access-denied" class="hidden">
        <div class="max-w-md mx-auto mt-20">
            <div class="glass-effect rounded-xl shadow-lg p-8 text-center">
                <i class="fas fa-lock text-red-400 text-4xl mb-4"></i>
                <h2 class="text-2xl font-bold text-white mb-4">–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω</h2>
                <p class="text-gray-300 mb-6">–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
                <a href="/profile" class="btn-minecraft px-6 py-3 rounded-lg inline-block">
                    –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å
                </a>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ -->
    <div id="admin-content" class="hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-white">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
                <p class="text-gray-300 mt-2">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="glass-effect rounded-xl shadow-lg p-6 stat-card">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-minecraft-gold/20 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-users text-minecraft-gold text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-white" id="total-users">0</div>
                            <div class="text-sm text-gray-300">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                        </div>
                    </div>
                </div>
                <div class="glass-effect rounded-xl shadow-lg p-6 stat-card">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-file-alt text-green-400 text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-white" id="pending-apps">0</div>
                            <div class="text-sm text-gray-300">–ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</div>
                        </div>
                    </div>
                </div>
                <div class="glass-effect rounded-xl shadow-lg p-6 stat-card">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-clock text-yellow-400 text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-white" id="active-sessions">0</div>
                            <div class="text-sm text-gray-300">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π</div>
                        </div>
                    </div>
                </div>
                <div class="glass-effect rounded-xl shadow-lg p-6 stat-card">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-ban text-red-400 text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-white" id="banned-users">0</div>
                            <div class="text-sm text-gray-300">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º -->
            <div class="glass-effect rounded-xl shadow-lg mb-8">
                <div class="border-b border-minecraft-gold/20">
                    <nav class="flex space-x-8 px-6">
                        <button class="admin-tab active py-4 px-2 border-b-2 border-minecraft-gold text-minecraft-gold font-medium" data-tab="applications">
                            <i class="fas fa-file-alt mr-2"></i>–ó–∞—è–≤–∫–∏
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="users">
                            <i class="fas fa-users mr-2"></i>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="trust-levels">
                            <i class="fas fa-medal mr-2"></i>Trust Level
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="settings">
                            <i class="fas fa-cog mr-2"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="technical">
                            <i class="fas fa-server mr-2"></i>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="logs">
                            <i class="fas fa-list mr-2"></i>–õ–æ–≥–∏
                        </button>
                    </nav>
                </div>

                <div class="p-6">
                    <!-- –ó–∞—è–≤–∫–∏ -->
                    <div id="tab-applications" class="admin-tab-content">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-white">–ó–∞—è–≤–∫–∏ –Ω–∞ whitelist</h3>
                            <select id="app-status-filter" class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white">
                                <option value="all">–í—Å–µ –∑–∞—è–≤–∫–∏</option>
                                <option value="pending">–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</option>
                                <option value="approved">–û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ</option>
                                <option value="rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</option>
                            </select>
                        </div>
                        <div id="applications-list" class="space-y-4">
                            <div class="text-center py-8">
                                <i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i>
                                <p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p>
                            </div>
                        </div>
                    </div>

                    <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
                    <div id="tab-users" class="admin-tab-content hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-white">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
                            <div class="flex space-x-3">
                                <input type="text" id="user-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..."
                                    autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                    data-lpignore="true" data-form-type="search" readonly onfocus="this.removeAttribute('readonly');"
                                    class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white placeholder-gray-400 focus:border-minecraft-gold focus:outline-none">
                                <select id="user-status-filter" class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    <option value="all">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                                    <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                                    <option value="banned">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</option>
                                </select>
                            </div>
                        </div>
                        <div id="users-list" class="space-y-4">
                            <div class="text-center py-8">
                                <i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i>
                                <p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Trust Level —Å–∏—Å—Ç–µ–º–∞ -->
                    <div id="tab-trust-levels" class="admin-tab-content hidden">
                        <h3 class="text-lg font-semibold text-white mb-6">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π Trust Level</h3>
                        
                        <div class="grid md:grid-cols-2 gap-8 mb-8">
                            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-info-circle mr-2 text-minecraft-gold"></i>–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –¥–æ–≤–µ—Ä–∏—è
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü (–£—Ä–æ–≤–µ–Ω—å 0):</span>
                                        <span class="text-white">–õ–∏–º–∏—Ç 10 —á–∞—Å–æ–≤ –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—á—Ç—ã</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">üë§ –ù–æ–≤–∏—á–æ–∫ (–£—Ä–æ–≤–µ–Ω—å 1):</span>
                                        <span class="text-white">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—á—Ç—ã</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π (–£—Ä–æ–≤–µ–Ω—å 2):</span>
                                        <span class="text-white">25 —á–∞—Å–æ–≤ + –ø–æ—á—Ç–∞ + 10+ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ + –∑–∞—è–≤–∫–∞</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">üèÜ –í–µ—Ç–µ—Ä–∞–Ω (–£—Ä–æ–≤–µ–Ω—å 3):</span>
                                        <span class="text-white">50 —á–∞—Å–æ–≤ + –ø–æ—á—Ç–∞ + 20+ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ + –∑–∞—è–≤–∫–∞</span>
                                    </div>
                                </div>
                            </div>

                            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-chart-bar mr-2 text-minecraft-gold"></i>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º
                                </h4>
                                <div id="trust-level-stats" class="space-y-3 text-sm">
                                    <div class="text-center py-4">
                                        <i class="fas fa-spinner fa-spin text-minecraft-gold"></i>
                                        <p class="text-gray-300 mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª–∞ -->
                        <div class="glass-effect rounded-lg p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h4 class="font-medium text-white">
                                    <i class="fas fa-arrow-up mr-2 text-minecraft-gold"></i>–ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
                                </h4>
                                <select id="trust-app-status-filter" class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white">
                                    <option value="all">–í—Å–µ –∑–∞—è–≤–∫–∏</option>
                                    <option value="pending">–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</option>
                                    <option value="approved">–û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ</option>
                                    <option value="rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</option>
                                </select>
                            </div>
                            <div id="trust-applications-list" class="space-y-4">
                                <div class="text-center py-8">
                                    <i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i>
                                    <p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ -->
                    <div id="tab-settings" class="admin-tab-content hidden">
                        <div class="mb-8">
                            <h3 class="text-2xl font-bold text-white mb-2">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞</h3>
                            <p class="text-gray-400">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞, email-—Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ –∏ —à–∞–±–ª–æ–Ω–∞–º–∏ –ø–∏—Å–µ–º</p>
                        </div>
                        
                        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
                        <div class="flex flex-wrap gap-2 mb-8 border-b border-gray-700 pb-4">
                            <button class="settings-category-tab px-6 py-3 text-sm font-medium text-gray-300 hover:text-minecraft-gold border-b-2 border-transparent hover:border-minecraft-gold transition-all active" data-category="general">
                                <i class="fas fa-cog mr-2"></i>–û—Å–Ω–æ–≤–Ω—ã–µ
                            </button>
                            <button class="settings-category-tab px-6 py-3 text-sm font-medium text-gray-300 hover:text-minecraft-gold border-b-2 border-transparent hover:border-minecraft-gold transition-all" data-category="applications">
                                <i class="fas fa-file-alt mr-2"></i>–ó–∞—è–≤–∫–∏
                            </button>
                            <button class="settings-category-tab px-6 py-3 text-sm font-medium text-gray-300 hover:text-minecraft-gold border-b-2 border-transparent hover:border-minecraft-gold transition-all" data-category="trust">
                                <i class="fas fa-star mr-2"></i>Trust Level
                            </button>
                            <button class="settings-category-tab px-6 py-3 text-sm font-medium text-gray-300 hover:text-minecraft-gold border-b-2 border-transparent hover:border-minecraft-gold transition-all" data-category="security">
                                <i class="fas fa-shield-alt mr-2"></i>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
                            </button>
                            <button class="settings-category-tab px-6 py-3 text-sm font-medium text-gray-300 hover:text-minecraft-gold border-b-2 border-transparent hover:border-minecraft-gold transition-all" data-category="email">
                                <i class="fas fa-envelope mr-2"></i>Email —Å–∏—Å—Ç–µ–º–∞
                            </button>
                            <button class="settings-category-tab px-6 py-3 text-sm font-medium text-gray-300 hover:text-minecraft-gold border-b-2 border-transparent hover:border-minecraft-gold transition-all" data-category="templates">
                                <i class="fas fa-code mr-2"></i>–®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º
                            </button>
                        </div>

                        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                        <div id="settings-category-general" class="settings-category-content">
                            <div class="grid lg:grid-cols-2 gap-8">
                                <div class="glass-effect rounded-lg p-6">
                                    <h4 class="font-semibold text-white mb-6 flex items-center">
                                        <i class="fas fa-server mr-3 text-minecraft-gold"></i>
                                        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
                                    </h4>
                                    <div class="space-y-6">
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
                                                <span class="tooltip-icon ml-2" data-tooltip="–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö email-–ø–∏—Å–µ–º">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="text" id="server-name" value="Chiwawa" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–ú–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤. –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö email-–ø–∏—Å–µ–º.</p>
                                        </div>
                                        
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
                                                <span class="tooltip-icon ml-2" data-tooltip="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤ –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–∏—Å–µ–º">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <textarea id="server-description" rows="4" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none resize-none transition-colors">–ü—Ä–∏–≤–∞—Ç–Ω—ã–π Minecraft —Å–µ—Ä–≤–µ—Ä —Å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º</textarea>
                                            <p class="text-xs text-gray-500 mt-2">–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ –≤ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–∏—Å—å–º–∞—Ö. –ú–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–æ–≤.</p>
                                        </div>
                                        
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞
                                                    <span class="tooltip-icon ml-2" data-tooltip="–û—Å–Ω–æ–≤–Ω–æ–π –∞–¥—Ä–µ—Å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Minecraft —Å–µ—Ä–≤–µ—Ä—É">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="text" id="server-ip" value="play.chiwawa.site" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            </div>
                                            
                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
                                                    <span class="tooltip-icon ml-2" data-tooltip="–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç Minecraft: 25565">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="number" id="server-port" value="25565" min="1" max="65535" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            </div>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –ú–∞–∫—Å–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω
                                                <span class="tooltip-icon ml-2" data-tooltip="–õ–∏–º–∏—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ —Å–µ—Ä–≤–µ—Ä—É">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="max-players" value="100" min="1" max="1000" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="glass-effect rounded-lg p-6">
                                    <h4 class="font-semibold text-white mb-6 flex items-center">
                                        <i class="fas fa-users mr-3 text-minecraft-gold"></i>
                                        –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
                                    </h4>
                                    <div class="space-y-6">
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fab fa-discord mr-2 text-indigo-400"></i>
                                                Discord –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
                                                <span class="tooltip-icon ml-2" data-tooltip="–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ Discord —Å–µ—Ä–≤–µ—Ä">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="url" id="discord-invite" value="https://discord.gg/chiwawa" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–∏—Å—å–º–∞-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –∏ –Ω–∞ —Å–∞–π—Ç. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–µ –∏–º–µ–µ—Ç —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è.</p>
                                        </div>
                                        
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fab fa-telegram mr-2 text-blue-400"></i>
                                                Telegram –∫–∞–Ω–∞–ª
                                                <span class="tooltip-icon ml-2" data-tooltip="–°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram –∫–∞–Ω–∞–ª —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="url" id="telegram-invite" value="https://t.me/chiwawa" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-8 glass-effect rounded-lg p-6">
                                <h4 class="font-semibold text-white mb-6 flex items-center">
                                    <i class="fas fa-toggle-on mr-3 text-minecraft-gold"></i>
                                    –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                                </h4>
                                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    <div class="setting-item">
                                        <div class="p-5 bg-minecraft-gray/30 rounded-lg border border-minecraft-gold/20 hover:border-minecraft-gold/40 transition-colors">
                                            <div class="flex items-start justify-between">
                                                <div class="flex-1">
                                                    <h5 class="text-sm font-medium text-gray-300 mb-1">–†–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</h5>
                                                    <p class="text-xs text-gray-500 leading-relaxed">–í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–∞–π—Ç—É –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫—Ä–æ–º–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</p>
                                                </div>
                                                <label class="relative inline-flex items-center cursor-pointer ml-4">
                                                    <input type="checkbox" id="maintenance-mode" class="sr-only peer">
                                                    <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="setting-item">
                                        <div class="p-5 bg-minecraft-gray/30 rounded-lg border border-minecraft-gold/20 hover:border-minecraft-gold/40 transition-colors">
                                            <div class="flex items-start justify-between">
                                                <div class="flex-1">
                                                    <h5 class="text-sm font-medium text-gray-300 mb-1">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∞</h5>
                                                    <p class="text-xs text-gray-500 leading-relaxed">–ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã –Ω–∞ —Å–∞–π—Ç–µ</p>
                                                </div>
                                                <label class="relative inline-flex items-center cursor-pointer ml-4">
                                                    <input type="checkbox" id="registration-enabled" checked class="sr-only peer">
                                                    <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-minecraft-gold"></div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="setting-item">
                                        <div class="p-5 bg-minecraft-gray/30 rounded-lg border border-minecraft-gold/20 hover:border-minecraft-gold/40 transition-colors">
                                            <div class="flex items-start justify-between">
                                                <div class="flex-1">
                                                    <h5 class="text-sm font-medium text-gray-300 mb-1">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã</h5>
                                                    <p class="text-xs text-gray-500 leading-relaxed">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–∞–π–ª–æ–≤</p>
                                                </div>
                                                <label class="relative inline-flex items-center cursor-pointer ml-4">
                                                    <input type="checkbox" id="auto-backup-enabled" checked class="sr-only peer">
                                                    <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫ -->
                        <div id="settings-category-applications" class="settings-category-content hidden">
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-semibold text-white mb-6 flex items-center">
                                    <i class="fas fa-file-alt mr-3 text-minecraft-gold"></i>
                                    –°–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫
                                </h4>
                                <div class="grid lg:grid-cols-2 gap-8">
                                    <div class="space-y-6">
                                        <div class="setting-item">
                                            <div class="p-5 bg-minecraft-gray/30 rounded-lg border border-minecraft-gold/20">
                                                <div class="flex items-start justify-between">
                                                    <div class="flex-1">
                                                        <h5 class="text-sm font-medium text-gray-300 mb-1">–ü—Ä–∏–µ–º –∑–∞—è–≤–æ–∫</h5>
                                                        <p class="text-xs text-gray-500 leading-relaxed">–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–æ–∫–∞–º –ø–æ–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É</p>
                                                    </div>
                                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                                        <input type="checkbox" id="applications-enabled" checked class="sr-only peer">
                                                        <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-minecraft-gold"></div>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –ú–∏–Ω–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –≤ –º–æ—Ç–∏–≤–∞—Ü–∏–∏
                                                <span class="tooltip-icon ml-2" data-tooltip="–¢—Ä–µ–±—É–µ–º–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –≤ –∑–∞—è–≤–∫–µ">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="min-motivation-length" value="50" min="10" max="500" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–ü–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 50-100 —Å–∏–º–≤–æ–ª–æ–≤.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –ú–∏–Ω–∏–º—É–º —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–ª–∞–Ω–∞—Ö
                                                <span class="tooltip-icon ml-2" data-tooltip="–¢—Ä–µ–±—É–µ–º–∞—è –¥–ª–∏–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è –ø–ª–∞–Ω–æ–≤ –∏–≥—Ä–æ–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="min-plans-length" value="30" min="10" max="300" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–ü–ª–∞–Ω—ã –∏–≥—Ä–æ–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–º–æ–≥–∞—é—Ç –æ—Ü–µ–Ω–∏—Ç—å —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–∏–π.</p>
                                        </div>
                                    </div>

                                    <div class="space-y-6">
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –õ–∏–º–∏—Ç –∑–∞—è–≤–æ–∫ —Å –æ–¥–Ω–æ–≥–æ IP –≤ –¥–µ–Ω—å
                                                <span class="tooltip-icon ml-2" data-tooltip="–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –∑–∞—è–≤–æ–∫ —Å –æ–¥–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="max-applications-per-day" value="3" min="1" max="20" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∞–º –∑–∞—è–≤–æ–∫. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 1-3 –∑–∞—è–≤–∫–∏ –≤ –¥–µ–Ω—å.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫
                                                <span class="tooltip-icon ml-2" data-tooltip="–ó–∞—è–≤–∫–∏ –æ—Ç –∏–≥—Ä–æ–∫–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º Trust Level –æ–¥–æ–±—Ä—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <select id="auto-approve-trust-level" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                <option value="0">–û—Ç–∫–ª—é—á–µ–Ω–æ - –≤—Å–µ –∑–∞—è–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é</option>
                                                <option value="1">–î–æ 1 —É—Ä–æ–≤–Ω—è - –∞–≤—Ç–æ–æ–¥–æ–±—Ä–µ–Ω–∏–µ —Å 0 –¥–æ 1 —É—Ä–æ–≤–Ω—è</option>
                                                <option value="2">–î–æ 2 —É—Ä–æ–≤–Ω—è - –∞–≤—Ç–æ–æ–¥–æ–±—Ä–µ–Ω–∏–µ —Å 1 –¥–æ 2 —É—Ä–æ–≤–Ω—è</option>
                                            </select>
                                            <p class="text-xs text-gray-500 mt-2">–ò–≥—Ä–æ–∫–∏ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –º–æ–≥—É—Ç –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—ã—à–µ–Ω—ã –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Trust Level —Å–∏—Å—Ç–µ–º–∞ -->
                        <div id="settings-category-trust" class="settings-category-content hidden">
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-semibold text-white mb-6 flex items-center">
                                    <i class="fas fa-star mr-3 text-minecraft-gold"></i>
                                    Trust Level —Å–∏—Å—Ç–µ–º–∞
                                </h4>
                                <div class="mb-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg">
                                    <div class="flex items-start">
                                        <i class="fas fa-info-circle text-blue-400 mt-1 mr-3"></i>
                                        <div>
                                            <h5 class="text-sm font-medium text-blue-300 mb-1">–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Trust Level?</h5>
                                            <p class="text-xs text-blue-200/80 leading-relaxed">
                                                –°–∏—Å—Ç–µ–º–∞ –¥–æ–≤–µ—Ä–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –æ—á–∫–∏ –∏–≥—Ä–æ–∫–∞–º –∑–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è. 
                                                –ß–µ–º –±–æ–ª—å—à–µ –æ—á–∫–æ–≤, —Ç–µ–º –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è –∏ –±–æ–ª—å—à–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid lg:grid-cols-2 gap-8">
                                    <div class="space-y-6">
                                        <h5 class="text-lg font-medium text-gray-300 mb-4">–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤</h5>
                                        
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fas fa-envelope-check mr-2 text-green-400"></i>
                                                –û—á–∫–∏ –∑–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
                                                <span class="tooltip-icon ml-2" data-tooltip="–ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ—á—Ç—ã">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-points-email" value="10" min="0" max="100" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–ü–æ–æ—â—Ä—è–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å email –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fab fa-discord mr-2 text-indigo-400"></i>
                                                –û—á–∫–∏ –∑–∞ —Å–≤—è–∑–∫—É —Å Discord
                                                <span class="tooltip-icon ml-2" data-tooltip="–ï–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ —Å–≤—è–∑–∫—É –∞–∫–∫–∞—É–Ω—Ç–∞ —Å Discord">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-points-discord" value="15" min="0" max="100" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–ü–æ–æ—â—Ä—è–µ—Ç —É—á–∞—Å—Ç–∏–µ –≤ Discord —Å–æ–æ–±—â–µ—Å—Ç–≤–µ —Å–µ—Ä–≤–µ—Ä–∞.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fas fa-clock mr-2 text-blue-400"></i>
                                                –û—á–∫–∏ –∑–∞ —á–∞—Å –∏–≥—Ä—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
                                                <span class="tooltip-icon ml-2" data-tooltip="–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-points-hour" value="1" min="0" max="10" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –Ω–∞–±–æ—Ä–∞ –æ—á–∫–æ–≤. –ù–µ —Å—Ç–∞–≤—å—Ç–µ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fas fa-heart mr-2 text-red-400"></i>
                                                –û—á–∫–∏ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É —Ä–µ–ø—É—Ç–∞—Ü–∏–∏
                                                <span class="tooltip-icon ml-2" data-tooltip="–°–∫–æ–ª—å–∫–æ –æ—á–∫–æ–≤ –¥–æ–≤–µ—Ä–∏—è –¥–∞—ë—Ç 1 –µ–¥–∏–Ω–∏—Ü–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-points-reputation" value="2" min="0" max="20" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–ü–æ–æ—â—Ä—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ –∏ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–∞–º.</p>
                                        </div>
                                    </div>

                                    <div class="space-y-6">
                                        <h5 class="text-lg font-medium text-gray-300 mb-4">–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —É—Ä–æ–≤–Ω–µ–π</h5>
                                        
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fas fa-hourglass-half text-purple-400 mr-2"></i>
                                                –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∏–≥—Ä—ã (—á–∞—Å–æ–≤)
                                                <span class="tooltip-icon ml-2" data-tooltip="–ú–∏–Ω–∏–º—É–º —á–∞—Å–æ–≤ –∏–≥—Ä—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è Trust Level">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-minimum-hours" value="5" min="0" max="500" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –Ω–∞—Ä–∞–≤–Ω–µ —Å –æ—á–∫–∞–º–∏. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º —É—Ä–æ–≤–Ω—è–º.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fas fa-heart text-red-400 mr-2"></i>
                                                –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–ø—É—Ç–∞—Ü–∏—è
                                                <span class="tooltip-icon ml-2" data-tooltip="–ú–∏–Ω–∏–º—É–º —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è Trust Level">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-minimum-reputation" value="0" min="0" max="100" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –Ω–∞—Ä–∞–≤–Ω–µ —Å –æ—á–∫–∞–º–∏. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º —É—Ä–æ–≤–Ω—è–º.</p>
                                        </div>
                                        
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fas fa-star text-gray-400 mr-2"></i>
                                                Trust Level 1 (–æ—á–∫–æ–≤)
                                                <span class="tooltip-icon ml-2" data-tooltip="–ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-level-1-required" value="25" min="1" max="1000" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–õ–µ–≥–∫–æ –¥–æ—Å—Ç–∏–∂–∏–º—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–∏—á–∫–æ–≤.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fas fa-star text-yellow-400 mr-2"></i>
                                                Trust Level 2 (–æ—á–∫–æ–≤)
                                                <span class="tooltip-icon ml-2" data-tooltip="–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-level-2-required" value="100" min="1" max="1000" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–î–ª—è –∏–≥—Ä–æ–∫–æ–≤, –ø—Ä–æ–≤–æ–¥—è—â–∏—Ö –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                <i class="fas fa-star text-minecraft-gold mr-2"></i>
                                                Trust Level 3 (–æ—á–∫–æ–≤)
                                                <span class="tooltip-icon ml-2" data-tooltip="–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è –¥–ª—è –≤–µ—Ç–µ—Ä–∞–Ω–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="trust-level-3-required" value="500" min="1" max="1000" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–≠–ª–∏—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è —Å–∞–º—ã—Ö –ø—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ -->
                        <div id="settings-category-security" class="settings-category-content hidden">
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-semibold text-white mb-6 flex items-center">
                                    <i class="fas fa-shield-alt mr-3 text-minecraft-gold"></i>
                                    –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞
                                </h4>
                                
                                <div class="grid lg:grid-cols-2 gap-8">
                                    <div class="space-y-6">
                                        <h5 class="text-lg font-medium text-gray-300 mb-4">–ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞</h5>
                                        
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
                                                <span class="tooltip-icon ml-2" data-tooltip="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ –¥–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ IP">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="max-login-attempts" value="5" min="3" max="20" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 3-5 –ø–æ–ø—ã—Ç–æ–∫. –°–ª–∏—à–∫–æ–º –º–∞–ª–æ - –Ω–µ—É–¥–æ–±–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–º–∏–Ω—É—Ç—ã)
                                                <span class="tooltip-icon ml-2" data-tooltip="–ù–∞ —Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è IP –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞ –ø–æ–ø—ã—Ç–æ–∫">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="login-lockout-duration" value="15" min="5" max="1440" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">15-30 –º–∏–Ω—É—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã, –Ω–æ –Ω–µ —Å–ª–∏—à–∫–æ–º –∂–µ—Å—Ç–∫–æ.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                Rate Limiting (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É)
                                                <span class="tooltip-icon ml-2" data-tooltip="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –æ–¥–Ω–æ–≥–æ IP –≤ –º–∏–Ω—É—Ç—É">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="rate-limit-requests" value="100" min="10" max="1000" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">–ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫ –∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π API.</p>
                                        </div>
                                    </div>

                                    <div class="space-y-6">
                                        <h5 class="text-lg font-medium text-gray-300 mb-4">–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h5>
                                        
                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ JWT —Ç–æ–∫–µ–Ω–∞ (–¥–Ω–∏)
                                                <span class="tooltip-icon ml-2" data-tooltip="–ß–µ—Ä–µ–∑ —Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <input type="number" id="jwt-expires-days" value="7" min="1" max="365" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            <p class="text-xs text-gray-500 mt-2">7-30 –¥–Ω–µ–π –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —É–¥–æ–±—Å—Ç–≤–∞.</p>
                                        </div>

                                        <div class="setting-item">
                                            <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                –¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
                                                <span class="tooltip-icon ml-2" data-tooltip="–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ—á—Ç—ã –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏">
                                                    <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                </span>
                                            </label>
                                            <select id="require-email-verification" 
                                                class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                <option value="true">–î–∞ - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</option>
                                                <option value="false">–ù–µ—Ç - –º–æ–∂–Ω–æ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</option>
                                            </select>
                                            <p class="text-xs text-gray-500 mt-2">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–∫–ª—é—á–∏—Ç—å –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Ñ–µ–π–∫–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤.</p>
                                        </div>

                                        <div class="setting-item">
                                            <div class="p-5 bg-minecraft-gray/30 rounded-lg border border-minecraft-gold/20">
                                                <div class="flex items-start justify-between">
                                                    <div class="flex-1">
                                                        <h5 class="text-sm font-medium text-gray-300 mb-1">–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h5>
                                                        <p class="text-xs text-gray-500 leading-relaxed">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã</p>
                                                    </div>
                                                    <label class="relative inline-flex items-center cursor-pointer ml-4">
                                                        <input type="checkbox" id="two-factor-enabled" class="sr-only peer">
                                                        <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Email —Å–∏—Å—Ç–µ–º–∞ -->
                        <div id="settings-category-email" class="settings-category-content hidden">
                            <div class="space-y-8">
                                <!-- SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                                <div class="glass-effect rounded-lg p-6">
                                    <h4 class="font-semibold text-white mb-6 flex items-center">
                                        <i class="fas fa-server mr-3 text-minecraft-gold"></i>
                                        SMTP —Å–µ—Ä–≤–µ—Ä
                                    </h4>
                                    <div class="mb-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg">
                                        <div class="flex items-start">
                                            <i class="fas fa-lightbulb text-blue-400 mt-1 mr-3"></i>
                                            <div>
                                                <h5 class="text-sm font-medium text-blue-300 mb-1">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Yandex Mail</h5>
                                                <p class="text-xs text-blue-200/80 leading-relaxed">
                                                    SMTP: smtp.yandex.ru, –ü–æ—Ä—Ç: 465, TLS: –í–∫–ª—é—á–µ–Ω<br>
                                                    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è –¥–ª—è –ª—É—á—à–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid lg:grid-cols-2 gap-8">
                                        <div class="space-y-6">
                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    SMTP —Å–µ—Ä–≤–µ—Ä
                                                    <span class="tooltip-icon ml-2" data-tooltip="–ê–¥—Ä–µ—Å SMTP —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="text" id="smtp-host" value="smtp.yandex.ru" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                <p class="text-xs text-gray-500 mt-2">–ü—Ä–∏–º–µ—Ä—ã: smtp.gmail.com, smtp.yandex.ru, smtp.mail.ru</p>
                                            </div>

                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    SMTP –ø–æ—Ä—Ç
                                                    <span class="tooltip-icon ml-2" data-tooltip="–ü–æ—Ä—Ç SMTP —Å–µ—Ä–≤–µ—Ä–∞ (–æ–±—ã—á–Ω–æ 587 –∏–ª–∏ 465)">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="number" id="smtp-port" value="465" min="25" max="65535" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                <p class="text-xs text-gray-500 mt-2">587 (STARTTLS) –∏–ª–∏ 465 (SSL/TLS)</p>
                                            </div>

                                            <div class="setting-item">
                                                <div class="p-5 bg-minecraft-gray/30 rounded-lg border border-minecraft-gold/20">
                                                    <div class="flex items-start justify-between">
                                                        <div class="flex-1">
                                                            <h5 class="text-sm font-medium text-gray-300 mb-1">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS/SSL —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ</h5>
                                                            <p class="text-xs text-gray-500 leading-relaxed">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö SMTP —Å–µ—Ä–≤–µ—Ä–æ–≤. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö.</p>
                                                        </div>
                                                        <label class="relative inline-flex items-center cursor-pointer ml-4">
                                                            <input type="checkbox" id="smtp-tls" checked class="sr-only peer">
                                                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="space-y-6">
                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
                                                    <span class="tooltip-icon ml-2" data-tooltip="–ê–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –ø–∏—Å–µ–º">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="email" id="smtp-from" value="chiwawa.helper@yandex.ru" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                <p class="text-xs text-gray-500 mt-2">–î–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω—É SMTP —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ª—É—á—à–µ–π –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç–∏.</p>
                                            </div>

                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    SMTP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ª–æ–≥–∏–Ω)
                                                    <span class="tooltip-icon ml-2" data-tooltip="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ SMTP —Å–µ—Ä–≤–µ—Ä–µ">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="text" id="smtp-user" value="chiwawa.helper@yandex.ru" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                <p class="text-xs text-gray-500 mt-2">–û–±—ã—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å email –∞–¥—Ä–µ—Å–æ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è.</p>
                                            </div>

                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    SMTP –ø–∞—Ä–æ–ª—å
                                                    <span class="tooltip-icon ml-2" data-tooltip="–ü–∞—Ä–æ–ª—å –∏–ª–∏ —Ç–æ–∫–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è SMTP –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <div class="relative">
                                                    <input type="password" id="smtp-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password"
                                                        class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors pr-12">
                                                    <button type="button" class="password-toggle-btn absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-minecraft-gold" data-target="smtp-password">
                                                        <i class="fas fa-eye" id="smtp-password-eye"></i>
                                                    </button>
                                                </div>
                                                <p class="text-xs text-gray-500 mt-2">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                                <div class="glass-effect rounded-lg p-6">
                                    <h4 class="font-semibold text-white mb-6 flex items-center">
                                        <i class="fas fa-cogs mr-3 text-minecraft-gold"></i>
                                        –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ email
                                    </h4>
                                    <div class="grid lg:grid-cols-2 gap-8">
                                        <div class="space-y-6">
                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
                                                    <span class="tooltip-icon ml-2" data-tooltip="–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –≤ email –∫–ª–∏–µ–Ω—Ç–∞—Ö">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="text" id="smtp-sender-name" value="Chiwawa Server" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            </div>

                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    Email –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ (Reply-To)
                                                    <span class="tooltip-icon ml-2" data-tooltip="–ê–¥—Ä–µ—Å –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –ø–∏—Å—å–º–∞">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="email" id="smtp-reply-to" value="support@chiwawa.site" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            </div>
                                        </div>

                                        <div class="space-y-6">
                                            <div class="setting-item">
                                                <div class="p-5 bg-minecraft-gray/30 rounded-lg border border-minecraft-gold/20">
                                                    <div class="flex items-start justify-between">
                                                        <div class="flex-1">
                                                            <h5 class="text-sm font-medium text-gray-300 mb-1">–û—Ç–ø—Ä–∞–≤–∫–∞ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h5>
                                                            <p class="text-xs text-gray-500 leading-relaxed">–í–∫–ª—é—á–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ö –∏ –¥—Ä—É–≥–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö</p>
                                                        </div>
                                                        <label class="relative inline-flex items-center cursor-pointer ml-4">
                                                            <input type="checkbox" id="email-notifications-enabled" checked class="sr-only peer">
                                                            <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-minecraft-gold"></div>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2 flex items-center">
                                                    –¢–∞–π–º-–∞—É—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Å–µ–∫—É–Ω–¥—ã)
                                                    <span class="tooltip-icon ml-2" data-tooltip="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç SMTP —Å–µ—Ä–≤–µ—Ä–∞">
                                                        <i class="fas fa-info-circle text-xs text-gray-500 hover:text-minecraft-gold cursor-help"></i>
                                                    </span>
                                                </label>
                                                <input type="number" id="smtp-timeout" value="30" min="10" max="120" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ email -->
                                <div class="glass-effect rounded-lg p-6">
                                    <h4 class="font-semibold text-white mb-6 flex items-center">
                                        <i class="fas fa-envelope-check mr-3 text-minecraft-gold"></i>
                                        –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ email —Å–∏—Å—Ç–µ–º—ã
                                    </h4>
                                    
                                    <div class="grid lg:grid-cols-2 gap-8">
                                        <div class="space-y-4">
                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                                    –ü–æ–ª—É—á–∞—Ç–µ–ª—å –ø–∏—Å—å–º–∞
                                                </label>
                                                
                                                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ –≤—ã–±–æ—Ä–∞ -->
                                                <div class="flex mb-3 bg-minecraft-dark rounded-lg p-1">
                                                    <button type="button" id="user-mode-btn" 
                                                        class="flex-1 px-3 py-2 text-sm rounded-md transition-all bg-minecraft-gold text-black font-medium">
                                                        –í—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                                                    </button>
                                                    <button type="button" id="email-mode-btn" 
                                                        class="flex-1 px-3 py-2 text-sm rounded-md transition-all text-gray-300 hover:bg-minecraft-gold/10">
                                                        –í–≤–µ—Å—Ç–∏ email
                                                    </button>
                                                </div>
                                                
                                                <!-- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                                                <div id="user-selector-container" class="block">
                                                    <select id="test-email-user" 
                                                        class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                        <option value="">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</option>
                                                    </select>
                                                    <p class="text-xs text-gray-500 mt-2">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –≤—ã–±–µ—Ä–∏—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p>
                                                </div>
                                                
                                                <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ email -->
                                                <div id="email-input-container" class="hidden">
                                                    <input type="email" id="test-email-recipient" placeholder="test@example.com" 
                                                        class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                    <p class="text-xs text-gray-500 mt-2">Email –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–∏—Å—å–º–∞</p>
                                                </div>
                                            </div>
                                            
                                            <div class="setting-item">
                                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                                    –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞
                                                </label>
                                                <select id="test-email-template" 
                                                    class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω...</option>
                                                    <option value="welcome">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ</option>
                                                    <option value="verification">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email</option>
                                                    <option value="application-approved">–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞</option>
                                                    <option value="application-rejected">–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞</option>
                                                    <option value="password-reset">–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</option>
                                                    <option value="newsletter">–ù–æ–≤–æ—Å—Ç–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞</option>
                                                </select>
                                                <p class="text-xs text-gray-500 mt-2">–¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º</p>
                                            </div>
                                        </div>
                                        
                                        <div class="space-y-4">
                                            <button id="test-email-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                                <i class="fas fa-paper-plane mr-2"></i>
                                                –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ
                                            </button>
                                            
                                            <div id="email-test-result" class="hidden p-4 rounded-lg">
                                                <div class="flex items-center">
                                                    <i class="fas fa-check-circle text-green-400 mr-3"></i>
                                                    <span class="text-sm">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</span>
                                                </div>
                                            </div>
                                            
                                            <div class="text-xs text-gray-500">
                                                <p><strong>–ü—Ä–æ–≤–µ—Ä–∫–∞ SMTP:</strong></p>
                                                <ul class="list-disc list-inside mt-1 space-y-1">
                                                    <li>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É</li>
                                                    <li>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</li>
                                                    <li>–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞</li>
                                                    <li>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º -->
                        <div id="settings-category-templates" class="settings-category-content hidden">
                            <div class="space-y-8">
                                <div class="glass-effect rounded-lg p-6">
                                    <h4 class="font-semibold text-white mb-6 flex items-center">
                                        <i class="fas fa-code mr-3 text-minecraft-gold"></i>
                                        Email —à–∞–±–ª–æ–Ω—ã —Å HTML —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
                                    </h4>
                                    
                                    <!-- –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ -->
                                    <div class="grid lg:grid-cols-2 gap-6 mb-8">
                                        <div class="template-selector p-4 bg-minecraft-gray/30 border border-minecraft-gold/20 rounded-lg hover:border-minecraft-gold/40 cursor-pointer transition-colors active" data-template="welcome">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="font-medium text-gray-300">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ</h5>
                                                    <p class="text-xs text-gray-500 mt-1">–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                                                </div>
                                                <i class="fas fa-user-plus text-green-400"></i>
                                            </div>
                                        </div>

                                        <div class="template-selector p-4 bg-minecraft-gray/30 border border-minecraft-gold/20 rounded-lg hover:border-minecraft-gold/40 cursor-pointer transition-colors" data-template="verification">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="font-medium text-gray-300">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email</h5>
                                                    <p class="text-xs text-gray-500 mt-1">–ü–∏—Å—å–º–æ —Å —Å—Å—ã–ª–∫–æ–π –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ—á—Ç—ã</p>
                                                </div>
                                                <i class="fas fa-envelope-check text-blue-400"></i>
                                            </div>
                                        </div>

                                        <div class="template-selector p-4 bg-minecraft-gray/30 border border-minecraft-gold/20 rounded-lg hover:border-minecraft-gold/40 cursor-pointer transition-colors" data-template="application-approved">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="font-medium text-gray-300">–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞</h5>
                                                    <p class="text-xs text-gray-500 mt-1">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä</p>
                                                </div>
                                                <i class="fas fa-check-circle text-green-400"></i>
                                            </div>
                                        </div>

                                        <div class="template-selector p-4 bg-minecraft-gray/30 border border-minecraft-gold/20 rounded-lg hover:border-minecraft-gold/40 cursor-pointer transition-colors" data-template="application-rejected">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="font-medium text-gray-300">–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞</h5>
                                                    <p class="text-xs text-gray-500 mt-1">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏ —Å –ø—Ä–∏—á–∏–Ω–æ–π</p>
                                                </div>
                                                <i class="fas fa-times-circle text-red-400"></i>
                                            </div>
                                        </div>

                                        <div class="template-selector p-4 bg-minecraft-gray/30 border border-minecraft-gold/20 rounded-lg hover:border-minecraft-gold/40 cursor-pointer transition-colors" data-template="password-reset">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="font-medium text-gray-300">–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</h5>
                                                    <p class="text-xs text-gray-500 mt-1">–ü–∏—Å—å–º–æ —Å —Å—Å—ã–ª–∫–æ–π –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è</p>
                                                </div>
                                                <i class="fas fa-key text-yellow-400"></i>
                                            </div>
                                        </div>

                                        <div class="template-selector p-4 bg-minecraft-gray/30 border border-minecraft-gold/20 rounded-lg hover:border-minecraft-gold/40 cursor-pointer transition-colors" data-template="newsletter">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h5 class="font-medium text-gray-300">–ù–æ–≤–æ—Å—Ç–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞</h5>
                                                    <p class="text-xs text-gray-500 mt-1">–®–∞–±–ª–æ–Ω –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π</p>
                                                </div>
                                                <i class="fas fa-newspaper text-purple-400"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- –í–∏–∑—É–∞–ª—å–Ω—ã–π HTML —Ä–µ–¥–∞–∫—Ç–æ—Ä —à–∞–±–ª–æ–Ω–æ–≤ -->
                                    <div id="template-editor" class="space-y-6">
                                        <div class="flex items-center justify-between">
                                            <h5 class="text-lg font-medium text-gray-300">–†–µ–¥–∞–∫—Ç–æ—Ä —à–∞–±–ª–æ–Ω–∞: <span id="current-template-name">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ</span></h5>
                                            <div class="flex gap-3">
                                                <button id="preview-template-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                                                    <i class="fas fa-eye mr-2"></i>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
                                                </button>
                                            </div>
                                        </div>

                                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                                            <div class="lg:col-span-3">
                                                <div class="space-y-4">
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-300 mb-2">–¢–µ–º–∞ –ø–∏—Å—å–º–∞</label>
                                                        <input type="text" id="template-subject" 
                                                            class="setting-input w-full px-4 py-3 bg-minecraft-gray border border-minecraft-gold/30 rounded-lg text-white focus:border-minecraft-gold focus:outline-none transition-colors">
                                                    </div>
                                                    
                                                    <div>
                                                        <label class="block text-sm font-medium text-gray-300 mb-2">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–∏—Å—å–º–∞</label>
                                                        
                                                        <!-- –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä -->
                                                        <div id="visual-editor-container" class="border border-minecraft-gold/30 rounded-lg overflow-hidden">
                                                            <div id="quill-editor" style="height: 500px; background: #2a2a2a; color: white;"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="space-y-6">
                                                <div>
                                                    <h6 class="text-sm font-medium text-gray-300 mb-3">–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</h6>
                                                    <div class="space-y-2 text-xs max-h-60 overflow-y-auto">
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="serverName">
                                                            <code class="text-minecraft-gold">{{serverName}}</code><br>
                                                            <span class="text-gray-400">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="nickname">
                                                            <code class="text-minecraft-gold">{{nickname}}</code><br>
                                                            <span class="text-gray-400">–ù–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="email">
                                                            <code class="text-minecraft-gold">{{email}}</code><br>
                                                            <span class="text-gray-400">Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="serverIp">
                                                            <code class="text-minecraft-gold">{{serverIp}}</code><br>
                                                            <span class="text-gray-400">IP —Å–µ—Ä–≤–µ—Ä–∞</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="serverPort">
                                                            <code class="text-minecraft-gold">{{serverPort}}</code><br>
                                                            <span class="text-gray-400">–ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="discordInvite">
                                                            <code class="text-minecraft-gold">{{discordInvite}}</code><br>
                                                            <span class="text-gray-400">Discord –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="telegramInvite">
                                                            <code class="text-minecraft-gold">{{telegramInvite}}</code><br>
                                                            <span class="text-gray-400">Telegram –∫–∞–Ω–∞–ª</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="verificationLink">
                                                            <code class="text-minecraft-gold">{{verificationLink}}</code><br>
                                                            <span class="text-gray-400">–°—Å—ã–ª–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="resetLink">
                                                            <code class="text-minecraft-gold">{{resetLink}}</code><br>
                                                            <span class="text-gray-400">–°—Å—ã–ª–∫–∞ —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è</span>
                                                        </div>
                                                        <div class="p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 cursor-pointer hover:border-minecraft-gold/30 transition-colors" data-variable="currentDate">
                                                            <code class="text-minecraft-gold">{{currentDate}}</code><br>
                                                            <span class="text-gray-400">–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div>
                                                    <h6 class="text-sm font-medium text-gray-300 mb-3">–ë—ã—Å—Ç—Ä—ã–µ –±–ª–æ–∫–∏</h6>
                                                    <div class="space-y-2">
                                                        <button class="w-full text-left p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 hover:border-minecraft-gold/30 transition-colors text-xs" data-quick-block="header">
                                                            <i class="fas fa-heading mr-2"></i>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∏—Å—å–º–∞
                                                        </button>
                                                        <button class="w-full text-left p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 hover:border-minecraft-gold/30 transition-colors text-xs" data-quick-block="button">
                                                            <i class="fas fa-mouse-pointer mr-2"></i>–ö–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
                                                        </button>
                                                        <button class="w-full text-left p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 hover:border-minecraft-gold/30 transition-colors text-xs" data-quick-block="separator">
                                                            <i class="fas fa-minus mr-2"></i>–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
                                                        </button>
                                                        <button class="w-full text-left p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 hover:border-minecraft-gold/30 transition-colors text-xs" data-quick-block="footer">
                                                            <i class="fas fa-copyright mr-2"></i>–ü–æ–¥–≤–∞–ª –ø–∏—Å—å–º–∞
                                                        </button>
                                                        <button class="w-full text-left p-2 bg-minecraft-gray/50 rounded border border-minecraft-gold/10 hover:border-minecraft-gold/30 transition-colors text-xs" data-quick-block="social">
                                                            <i class="fas fa-share-alt mr-2"></i>–°–æ—Ü. —Å–µ—Ç–∏
                                                        </button>
                                                    </div>
                                                </div>

                                                <div>
                                                    <h6 class="text-sm font-medium text-gray-300 mb-3">–î–µ–π—Å—Ç–≤–∏—è</h6>
                                                    <div class="space-y-2">
                                                        <button id="save-template-btn" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-3 rounded-lg text-sm transition-colors">
                                                            <i class="fas fa-save mr-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —à–∞–±–ª–æ–Ω
                                                        </button>
                                                        <button id="reset-template-btn" class="w-full bg-gray-600 hover:bg-gray-700 text-white py-2 px-3 rounded-lg text-sm transition-colors">
                                                            <i class="fas fa-undo mr-2"></i>–°–±—Ä–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                        <div class="mt-12 flex justify-center space-x-4 border-t border-gray-700 pt-8">
                            <button id="reset-settings-btn" class="bg-gray-600 hover:bg-gray-700 text-white px-8 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-undo mr-2"></i>
                                –°–±—Ä–æ—Å–∏—Ç—å –∫ —É–º–æ–ª—á–∞–Ω–∏—é
                            </button>
                            <button id="save-settings-btn" class="btn-minecraft px-12 py-3 rounded-lg font-medium">
                                <i class="fas fa-save mr-2"></i>
                                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                        </div>
                    </div>

                    <!-- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ -->
                    <div id="tab-technical" class="admin-tab-content hidden">
                        <h3 class="text-lg font-semibold text-white mb-6">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        
                        <div class="grid md:grid-cols-2 gap-8">
                            <!-- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-database mr-2"></i>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–•–æ—Å—Ç:</span>
                                        <span class="font-mono text-white">localhost/212.15.49.139</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</span>
                                        <span class="font-mono text-white">chiwawa</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:</span>
                                        <span class="font-mono text-white">chiwawa</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–°—Ç–∞—Ç—É—Å:</span>
                                        <span class="text-green-400 font-medium">–ü–æ–¥–∫–ª—é—á–µ–Ω–∞</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–¢–∞–±–ª–∏—Ü:</span>
                                        <span class="font-medium text-white">15</span>
                                    </div>
                                </div>
                            </div>

                            <!-- –°–µ—Ä–≤–µ—Ä -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-server mr-2"></i>–°–µ—Ä–≤–µ—Ä
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Node.js –≤–µ—Ä—Å–∏—è:</span>
                                        <span class="font-mono text-white" id="node-version">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:</span>
                                        <span class="font-mono text-white" id="uptime">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–∞–º—è—Ç—å (RSS):</span>
                                        <span class="font-mono text-white" id="memory-rss">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–∞–º—è—Ç—å (Heap):</span>
                                        <span class="font-mono text-white" id="memory-heap">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–æ—Ä—Ç:</span>
                                        <span class="font-mono text-white">3000</span>
                                    </div>
                                </div>
                            </div>

                            <!-- API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-chart-line mr-2"></i>API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤:</span>
                                        <span class="font-medium text-white" id="api-total-requests">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–°–µ–≥–æ–¥–Ω—è:</span>
                                        <span class="font-medium text-white" id="api-today-requests">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</span>
                                        <span class="font-medium text-green-400" id="api-active-users">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</span>
                                        <span class="font-medium text-blue-400" id="api-last-activity">Loading...</span>
                                    </div>
                                </div>
                            </div>

                            <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-cogs mr-2"></i>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–†–µ–∂–∏–º:</span>
                                        <span class="font-mono text-white">development</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">CORS:</span>
                                        <span class="text-green-400">–í–∫–ª—é—á–µ–Ω</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Email —Å–∏—Å—Ç–µ–º–∞:</span>
                                        <span class="text-green-400">Yandex SMTP</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤:</span>
                                        <span class="text-green-400">–ê–∫—Ç–∏–≤–Ω–∞</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="mt-8">
                            <h4 class="font-medium text-white mb-4">
                                <i class="fas fa-info-circle mr-2"></i>–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                            </h4>
                            <div class="glass-effect rounded-lg p-6">
                                <div class="grid md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 class="text-sm font-medium text-gray-300 mb-3">–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞</h5>
                                        <div class="space-y-2 text-sm">
                                            <div class="flex items-center">
                                                <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                                <span class="text-gray-300">Web-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω</span>
                                            </div>
                                            <div class="flex items-center">
                                                <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                                <span class="text-gray-300">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞</span>
                                            </div>
                                            <div class="flex items-center">
                                                <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                                <span class="text-gray-300">Email —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞</span>
                                            </div>
                                            <div class="flex items-center">
                                                <div class="w-2 h-2 bg-green-400 rounded-full mr-2"></div>
                                                <span class="text-gray-300">API –º–∞—Ä—à—Ä—É—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <h5 class="text-sm font-medium text-gray-300 mb-3">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                                        <div class="space-y-2 text-sm">
                                            <div class="text-gray-400">‚Ä¢ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫: npm start</div>
                                            <div class="text-gray-400">‚Ä¢ –õ–æ–≥–∏: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å</div>
                                            <div class="text-gray-400">‚Ä¢ Backup –ë–î: pg_dump</div>
                                            <div class="text-gray-400">‚Ä¢ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: htop/Task Manager</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –õ–æ–≥–∏ -->
                    <div id="tab-logs" class="admin-tab-content hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-white">–°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏</h3>
                            <div class="flex space-x-3">
                                <select id="log-action-filter" class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    <option value="all">–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è</option>
                                    <option value="user_moderation">–ú–æ–¥–µ—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</option>
                                    <option value="role_changed">–ò–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–µ–π</option>
                                    <option value="trust_level_changed">–ò–∑–º–µ–Ω–µ–Ω–∏—è Trust Level</option>
                                    <option value="settings_updated">–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫</option>
                                </select>
                                <button id="refresh-logs" class="px-4 py-2 bg-chiwawa-primary text-white rounded-lg hover:bg-chiwawa-dark transition-colors">
                                    <i class="fas fa-refresh mr-2"></i>–û–±–Ω–æ–≤–∏—Ç—å
                                </button>
                            </div>
                        </div>
                        <div id="logs-list" class="space-y-2">
                            <div class="text-center py-8">
                                <i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i>
                                <p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
    <div id="user-details-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-effect rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">
                        <i class="fas fa-user-circle mr-2 text-minecraft-gold"></i>
                        –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                    </h3>
                    <button data-action="close-modal" data-modal="user-details-modal" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="space-y-4 mb-6">
                    <div class="grid md:grid-cols-3 gap-6">
                        <!-- –ê–≤–∞—Ç–∞—Ä –∏ –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="space-y-4">
                            <div class="text-center">
                                <div id="modal-user-avatar" class="w-20 h-20 mx-auto rounded-full overflow-hidden border-2 border-minecraft-gold/30 mb-3">
                                    <div class="w-full h-full bg-minecraft-gray flex items-center justify-center">
                                        <i class="fas fa-user text-minecraft-gold text-2xl"></i>
                                    </div>
                                </div>
                                <div class="text-white font-medium text-lg" id="modal-user-nickname">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">Email:</label>
                                <div class="text-white" id="modal-user-email">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">–†–æ–ª—å:</label>
                                <div class="text-white" id="modal-user-role">-</div>
                            </div>
                        </div>
                        
                        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400">Trust Level:</label>
                                <div class="text-white" id="modal-user-trust-level">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">–°—Ç–∞—Ç—É—Å:</label>
                                <div id="modal-user-status">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">–í–æ–∑—Ä–∞—Å—Ç:</label>
                                <div class="text-white" id="modal-user-age">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">Discord:</label>
                                <div class="text-white" id="modal-user-discord">-</div>
                            </div>
                        </div>
                        
                        <!-- –î–∞—Ç–∞ –∏ –±–∏–æ -->
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</label>
                                <div class="text-white" id="modal-user-created">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è:</label>
                                <div class="text-white text-sm max-h-20 overflow-y-auto" id="modal-user-bio">-</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π –±–ª–æ–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                <div class="mb-6">
                    <!-- –í–∫–ª–∞–¥–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è -->
                    <div class="flex space-x-1 mb-4">
                        <button class="modal-tab active px-4 py-2 rounded-md text-white bg-minecraft-gold/20 font-medium transition-all text-sm" data-tab="activity">
                            <i class="fas fa-globe mr-2"></i>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Å–∞–π—Ç–µ
                        </button>
                        <button class="modal-tab px-4 py-2 rounded-md text-gray-300 hover:text-white hover:bg-minecraft-gold/10 font-medium transition-all text-sm" data-tab="server">
                            <i class="fas fa-server mr-2"></i>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
                        </button>
                    </div>
                    
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
                    <div class="bg-minecraft-dark/30 rounded-lg border border-minecraft-gold/20">
                        <!-- –í–∫–ª–∞–¥–∫–∞ "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Å–∞–π—Ç–µ" -->
                        <div id="modal-tab-activity" class="modal-tab-content max-h-60 overflow-y-auto p-3">
                            <div class="text-center py-4 text-gray-400" id="modal-user-activity">
                                <i class="fas fa-spinner fa-spin"></i>
                                <div class="mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...</div>
                            </div>
                        </div>
                        
                        <!-- –í–∫–ª–∞–¥–∫–∞ "–°–µ—Ä–≤–µ—Ä" -->
                        <div id="modal-tab-server" class="modal-tab-content hidden">
                            <div class="space-y-4">
                                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="space-y-3">
                                        <div>
                                            <label class="text-sm text-gray-400">–°—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:</label>
                                            <div class="text-green-400" id="modal-server-status">ÔøΩ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–í—Ä–µ–º—è –∏–≥—Ä—ã:</label>
                                            <div class="text-white" id="modal-server-playtime">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞—Ö–æ–¥:</label>
                                            <div class="text-white" id="modal-server-last-seen">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:</label>
                                            <div class="text-white font-mono text-sm" id="modal-server-location">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–í—Å–µ–≥–æ –≤—Ö–æ–¥–æ–≤:</label>
                                            <div class="text-white" id="modal-server-total-logins">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-3">
                                        <div>
                                            <label class="text-sm text-gray-400">–£—Ä–æ–≤–µ–Ω—å:</label>
                                            <div class="text-minecraft-gold" id="modal-server-level">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–°–º–µ—Ä—Ç–µ–π:</label>
                                            <div class="text-red-400" id="modal-server-deaths">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–£–±–∏–π—Å—Ç–≤ –º–æ–±–æ–≤:</label>
                                            <div class="text-white" id="modal-server-kills">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π:</label>
                                            <div class="text-white" id="modal-server-sessions">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–°—Ä–µ–¥–Ω—è—è —Å–µ—Å—Å–∏—è:</label>
                                            <div class="text-white" id="modal-server-avg-session">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                                <div class="mt-6">
                                    <h4 class="text-sm font-medium text-minecraft-gold mb-3">üìä –ò–≥—Ä–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
                                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                        <div class="bg-minecraft-dark/20 rounded-lg p-3 text-center">
                                            <div class="text-lg font-bold text-white" id="modal-server-blocks-broken">0</div>
                                            <div class="text-xs text-gray-400">–ë–ª–æ–∫–æ–≤ —Å–ª–æ–º–∞–Ω–æ</div>
                                        </div>
                                        <div class="bg-minecraft-dark/20 rounded-lg p-3 text-center">
                                            <div class="text-lg font-bold text-white" id="modal-server-blocks-placed">0</div>
                                            <div class="text-xs text-gray-400">–ë–ª–æ–∫–æ–≤ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</div>
                                        </div>
                                        <div class="bg-minecraft-dark/20 rounded-lg p-3 text-center">
                                            <div class="text-lg font-bold text-white" id="modal-server-distance">0 –∫–º</div>
                                            <div class="text-xs text-gray-400">–ü—Ä–æ–π–¥–µ–Ω–æ</div>
                                        </div>
                                        <div class="bg-minecraft-dark/20 rounded-lg p-3 text-center">
                                            <div class="text-lg font-bold text-white" id="modal-server-items-crafted">0</div>
                                            <div class="text-xs text-gray-400">–ü—Ä–µ–¥–º–µ—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–æ</div>
                                        </div>
                                        <div class="bg-minecraft-dark/20 rounded-lg p-3 text-center">
                                            <div class="text-lg font-bold text-white" id="modal-server-damage-dealt">0</div>
                                            <div class="text-xs text-gray-400">–£—Ä–æ–Ω–∞ –Ω–∞–Ω–µ—Å–µ–Ω–æ</div>
                                        </div>
                                        <div class="bg-minecraft-dark/20 rounded-lg p-3 text-center">
                                            <div class="text-lg font-bold text-white" id="modal-server-food-eaten">0</div>
                                            <div class="text-xs text-gray-400">–ï–¥—ã —Å—ä–µ–¥–µ–Ω–æ</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Å—Å–∏—è—Ö -->
                                <div class="mt-4">
                                    <h4 class="text-sm font-medium text-minecraft-gold mb-3">‚è±Ô∏è –°–µ—Å—Å–∏–∏</h4>
                                    <div class="bg-minecraft-dark/30 rounded-lg p-4">
                                        <div class="grid grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <span class="text-gray-400">–°–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è:</span>
                                                <div class="text-white font-medium" id="modal-server-longest-session">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                            </div>
                                            <div>
                                                <span class="text-gray-400">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏:</span>
                                                <div class="text-white font-medium" id="modal-server-avg-session">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 text-xs text-gray-500 text-center">
                                    <i class="fas fa-database mr-1"></i>
                                    –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞ Minecraft
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
                    <div class="flex justify-center">
                        <button data-action="close-modal" data-modal="user-details-modal" class="px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="ban-user-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-effect rounded-lg max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">
                        <i class="fas fa-ban mr-2 text-red-400"></i>
                        –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </h3>
                    <button data-action="close-modal" data-modal="ban-user-modal" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="text-sm text-gray-400">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</label>
                        <div class="text-white font-medium" id="ban-modal-user-nickname">-</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–¢–∏–ø –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:</label>
                        <select id="ban-type" autocomplete="off" class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                            <option value="temporary">–í—Ä–µ–º–µ–Ω–Ω–∞—è</option>
                            <option value="permanent">–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è</option>
                        </select>
                    </div>
                    
                    <div id="ban-duration-container">
                        <label class="block text-sm font-medium text-gray-300 mb-2">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–Ω–∏):</label>
                        <input type="number" id="ban-duration" min="1" max="365" value="7" autocomplete="off"
                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–ü—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:</label>
                        <textarea id="ban-reason" rows="3" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏..." required
                            autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white placeholder-gray-400 focus:border-minecraft-gold focus:outline-none resize-none"></textarea>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-6">
                    <button data-action="close-modal" data-modal="ban-user-modal" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button id="confirm-ban-btn" data-action="confirm-ban-user" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors">
                        –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="delete-user-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-effect rounded-lg max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">
                        <i class="fas fa-exclamation-triangle mr-2 text-red-500"></i>
                        –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </h3>
                    <button data-action="close-modal" data-modal="delete-user-modal" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div class="bg-red-900/30 border border-red-500/50 rounded-lg p-4">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-exclamation-triangle text-red-400 text-2xl"></i>
                            <div>
                                <h4 class="text-red-300 font-semibold">–í–ù–ò–ú–ê–ù–ò–ï!</h4>
                                <p class="text-red-200 text-sm">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="text-sm text-gray-400">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:</label>
                        <div class="text-white font-medium" id="delete-modal-user-nickname">-</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–ü—Ä–∏—á–∏–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è:</label>
                        <textarea id="delete-reason" rows="3" placeholder="–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞..." required
                            autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white placeholder-gray-400 focus:border-minecraft-gold focus:outline-none resize-none"></textarea>
                    </div>
                    
                    <div class="bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-3">
                        <p class="text-yellow-300 text-sm">
                            <i class="fas fa-info-circle mr-2"></i>
                            –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: —Å–µ—Å—Å–∏–∏, –ª–æ–≥–∏, –∑–∞—è–≤–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏.
                        </p>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-6">
                    <button data-action="close-modal" data-modal="delete-user-modal" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button id="confirm-delete-btn" data-action="confirm-delete-user" class="px-4 py-2 bg-red-700 hover:bg-red-800 text-white rounded-lg font-medium transition-colors">
                        <i class="fas fa-trash-alt mr-2"></i>
                        –£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ -->
    <div id="change-role-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-effect rounded-lg max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">
                        <i class="fas fa-user-tag mr-2 text-minecraft-gold"></i>
                        –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </h3>
                    <button data-action="close-modal" data-modal="change-role-modal" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="text-sm text-gray-400">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</label>
                        <div class="text-white font-medium" id="role-modal-user-nickname">-</div>
                    </div>
                    
                    <div>
                        <label class="text-sm text-gray-400">–¢–µ–∫—É—â–∞—è —Ä–æ–ª—å:</label>
                        <div class="text-white" id="role-modal-current-role">-</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–ù–æ–≤–∞—è —Ä–æ–ª—å:</label>
                        <select id="role-select" autocomplete="off" class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                            <option value="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                            <option value="moderator">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è:</label>
                        <textarea id="role-change-reason" rows="3" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏..." 
                            autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white placeholder-gray-400 focus:border-minecraft-gold focus:outline-none resize-none"></textarea>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-6">
                    <button data-action="close-modal" data-modal="change-role-modal" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button data-action="update-user-role" class="px-4 py-2 bg-minecraft-gold hover:bg-yellow-600 text-minecraft-dark rounded-lg font-medium transition-colors">
                        –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="glass-effect border-t border-minecraft-gold/30 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <p class="text-gray-400">
                    Chiwawa ¬© 2025, –°–æ–∑–¥–∞–Ω–æ —Å 
                    <span class="text-minecraft-gold">‚ù§Ô∏è</span> –æ—Ç 
                    <strong class="text-minecraft-yellow">ebluffy</strong>
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        let currentUser = null;
        let quillEditor = null;
        let isVisualMode = true;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(type, message, duration = 5000) {
            // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            let container = document.getElementById('notification-container');
            if (!container) {
                container = document.createElement('div');
                container.id = 'notification-container';
                container.className = 'fixed top-4 right-4 z-50 space-y-2';
                document.body.appendChild(container);
            }
            
            // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-600' : type === 'error' ? 'bg-red-600' : 'bg-blue-600';
            const icon = type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle';
            
            notification.className = `${bgColor} text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out opacity-0 translate-x-full`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${icon} mr-3"></i>
                    <span class="text-sm font-medium">${message}</span>
                    <button data-action="remove-notification" class="ml-4 text-white/80 hover:text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            container.appendChild(notification);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                notification.classList.remove('opacity-0', 'translate-x-full');
            }, 100);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
            setTimeout(() => {
                notification.classList.add('opacity-0', 'translate-x-full');
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 300);
            }, duration);
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏–º –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è
        function toggleProfileDropdown() {
            const profileDropdown = document.getElementById('profileDropdown');
            profileDropdown.classList.toggle('hidden');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞
        function logout() {
            localStorage.removeItem('auth_token');
            localStorage.removeItem('remember_me');
            localStorage.removeItem('token_expires');
            window.location.href = '/';
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
        function initializeEventHandlers() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
            const profileButton = document.getElementById('profile-dropdown-btn');
            if (profileButton) {
                profileButton.addEventListener('click', toggleProfileDropdown);
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞ –≤ dropdown
            const logoutButton = document.getElementById('logout-dropdown-btn');
            if (logoutButton) {
                logoutButton.addEventListener('click', logout);
            }
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', function(event) {
                const profileDropdown = document.getElementById('profileDropdown');
                const profileButton = document.getElementById('profile-dropdown-btn');
                
                if (profileButton && !profileButton.contains(event.target) && !profileDropdown.contains(event.target)) {
                    profileDropdown.classList.add('hidden');
                }
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
                if (event.target.classList.contains('fixed') && event.target.classList.contains('bg-black')) {
                    const modalId = event.target.id;
                    if (modalId) {
                        closeModal(modalId);
                    }
                }
            });
            
            // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–Ω–æ–ø–æ–∫
            document.addEventListener('click', function(event) {
                const target = event.target;
                
                // –ö–Ω–æ–ø–∫–∏ –æ–¥–æ–±—Ä–µ–Ω–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫
                if (target.matches('[data-action="approve-app"]')) {
                    const appId = target.getAttribute('data-app-id');
                    reviewApplication(appId, 'approved');
                } else if (target.matches('[data-action="reject-app"]')) {
                    const appId = target.getAttribute('data-app-id');
                    reviewApplication(appId, 'rejected');
                }
                
                // –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                else if (target.matches('[data-action="show-user-details"]')) {
                    const userId = target.getAttribute('data-user-id');
                    showUserDetails(userId);
                } else if (target.matches('[data-action="ban-user"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const nickname = target.getAttribute('data-user-nickname');
                    banUser(userId, nickname);
                } else if (target.matches('[data-action="unban-user"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const nickname = target.getAttribute('data-user-nickname');
                    unbanUser(userId, nickname);
                } else if (target.matches('[data-action="delete-user"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const nickname = target.getAttribute('data-user-nickname');
                    deleteUser(userId, nickname);
                }
                
                // Trust Level –∑–∞—è–≤–∫–∏
                else if (target.matches('[data-action="approve-trust-app"]')) {
                    const appId = target.getAttribute('data-app-id');
                    reviewTrustApplication(appId, 'approved');
                } else if (target.matches('[data-action="reject-trust-app"]')) {
                    const appId = target.getAttribute('data-app-id');
                    reviewTrustApplication(appId, 'rejected');
                }
                
                // –ö–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–æ–≤
                else if (target.matches('[data-action="close-modal"]') || target.closest('[data-action="close-modal"]')) {
                    const closeButton = target.matches('[data-action="close-modal"]') ? target : target.closest('[data-action="close-modal"]');
                    const modalId = closeButton.getAttribute('data-modal');
                    closeModal(modalId);
                }
                
                // –ö–Ω–æ–ø–∫–∏ –≤ –º–æ–¥–∞–ª–∞—Ö
                else if (target.matches('[data-action="update-user-role"]')) {
                    updateUserRole();
                } else if (target.matches('[data-action="confirm-ban-user"]')) {
                    confirmBanUser();
                } else if (target.matches('[data-action="confirm-delete-user"]')) {
                    confirmDeleteUser();
                }
                
                // –í–∫–ª–∞–¥–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                else if (target.matches('.modal-tab')) {
                    const tabName = target.getAttribute('data-tab');
                    switchModalTab(tabName);
                }
            });
            
            // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è select —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            document.addEventListener('change', function(event) {
                const target = event.target;
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
                if (target.id === 'ban-type') {
                    const durationContainer = document.getElementById('ban-duration-container');
                    const confirmBtn = document.getElementById('confirm-ban-btn');
                    
                    if (target.value === 'permanent' || target.value === 'delete') {
                        durationContainer.style.display = 'none';
                    } else {
                        durationContainer.style.display = 'block';
                    }
                    
                    // –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
                    if (target.value === 'delete') {
                        confirmBtn.textContent = '–£–î–ê–õ–ò–¢–¨ –ê–ö–ö–ê–£–ù–¢';
                        confirmBtn.className = 'px-4 py-2 bg-red-800 hover:bg-red-900 text-white rounded-lg font-medium transition-colors';
                    } else {
                        confirmBtn.textContent = '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å';
                        confirmBtn.className = 'px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors';
                    }
                }
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫
                if (target.matches('[data-action="change-user-role"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const nickname = target.getAttribute('data-user-nickname');
                    const newRole = target.value;
                    changeUserRoleSelect(userId, nickname, newRole);
                }
                
                if (target.matches('[data-action="change-trust-level"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const newLevel = target.value;
                    changeTrustLevel(userId, newLevel);
                }
            });
        }
        
        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞
        let serverSettings = {
            name: 'Chiwawa',
            description: '–ü—Ä–∏–≤–∞—Ç–Ω—ã–π Minecraft —Å–µ—Ä–≤–µ—Ä —Å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º',
            ip: 'play.chiwawa.site',
            port: '25164',
            discordInvite: 'https://discord.gg/chiwawa',
            telegramInvite: 'https://t.me/chiwawa'
        };

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞
        async function loadServerSettings() {
            try {
                const response = await fetch('/api/settings/public');
                if (response.ok) {
                    const settings = await response.json();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    serverSettings.name = settings.serverName || serverSettings.name;
                    serverSettings.description = settings.serverDescription || serverSettings.description;
                    serverSettings.ip = settings.serverIp || serverSettings.ip;
                    serverSettings.port = settings.serverPort || serverSettings.port;
                    serverSettings.discordInvite = settings.discordInvite || serverSettings.discordInvite;
                    serverSettings.telegramInvite = settings.telegramInvite || serverSettings.telegramInvite;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    updateServerElements();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞:', error);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function updateServerElements() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            const serverNameNav = document.getElementById('server-name');
            if (serverNameNav) {
                serverNameNav.textContent = serverSettings.name;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.title = `–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - ${serverSettings.name}`;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', async () => {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            initializeEventHandlers();
            
            const token = localStorage.getItem('auth_token');
            if (!token) {
                window.location.href = '/profile';
                return;
            }

            try {
                const response = await fetch('/api/auth/verify', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const userData = await response.json();
                    currentUser = userData.user;
                    console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏:', userData.user);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∏–∫–Ω–µ–π–º–∞ –∞–¥–º–∏–Ω–∞
                    const adminNickname = document.getElementById('admin-nickname');
                    if (adminNickname && userData.user) {
                        adminNickname.textContent = userData.user.nickname || userData.user.email || 'Admin';
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                    if (currentUser.role !== 'admin' && currentUser.role !== 'moderator') {
                        console.log('–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω. –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', currentUser.role);
                        document.getElementById('access-denied').classList.remove('hidden');
                        return;
                    }
                    
                    document.getElementById('admin-content').classList.remove('hidden');
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    await loadServerSettings();
                    await loadDashboard();
                } else {
                    window.location.href = '/profile';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞:', error);
                window.location.href = '/profile';
            }
        });

        // –í—ã—Ö–æ–¥
        document.addEventListener('DOMContentLoaded', () => {
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.admin-tab').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.dataset.tab;
                    
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                    document.querySelectorAll('.admin-tab').forEach(b => {
                        b.classList.remove('active', 'border-minecraft-gold', 'text-minecraft-gold');
                        b.classList.add('border-transparent', 'text-gray-300');
                    });
                    document.querySelectorAll('.admin-tab-content').forEach(c => c.classList.add('hidden'));
                    
                    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é –≤–∫–ª–∞–¥–∫—É
                    btn.classList.remove('border-transparent', 'text-gray-300');
                    btn.classList.add('active', 'border-minecraft-gold', 'text-minecraft-gold');
                    document.getElementById(`tab-${tabId}`).classList.remove('hidden');
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
                    switch(tabId) {
                        case 'applications':
                            loadApplications();
                            break;
                        case 'users':
                            loadUsers();
                            break;
                        case 'trust-levels':
                            loadTrustLevels();
                            break;
                        case 'settings':
                            loadSettings();
                            break;
                        case 'technical':
                            loadTechnicalInfo();
                            break;
                        case 'logs':
                            loadLogs();
                            break;
                    }
                });
            });

            // –§–∏–ª—å—Ç—Ä—ã
            document.getElementById('app-status-filter')?.addEventListener('change', loadApplications);
            document.getElementById('user-status-filter')?.addEventListener('change', loadUsers);
            document.getElementById('user-search')?.addEventListener('input', debounce(loadUsers, 500));
            document.getElementById('trust-app-status-filter')?.addEventListener('change', loadTrustApplications);
            document.getElementById('log-action-filter')?.addEventListener('change', loadLogs);
            document.getElementById('refresh-logs')?.addEventListener('click', loadLogs);

            // –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.getElementById('save-settings-btn')?.addEventListener('click', saveSettings);
            
            // –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.getElementById('reset-settings-btn')?.addEventListener('click', resetSettings);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
            initializeQuillEditor();
            
            // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ —Ä–µ–∂–∏–º–æ–≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
            document.getElementById('visual-mode-btn')?.addEventListener('click', switchToVisualMode);
            document.getElementById('html-mode-btn')?.addEventListener('click', switchToHtmlMode);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –ø–æ–∫–∞–∑–∞ –ø–∞—Ä–æ–ª—è
            document.querySelectorAll('.password-toggle-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-target');
                    togglePasswordVisibility(targetId);
                });
            });
            
            // –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
            disableAutocomplete();
            
            // –ó–∞–º–µ–Ω—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
            replaceTestDataWithServerSettings();
        });
        
        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
        function disableAutocomplete() {
            const inputs = document.querySelectorAll('input, textarea, select');
            inputs.forEach(input => {
                input.setAttribute('autocomplete', 'off');
                input.setAttribute('data-form-type', 'other');
                
                // –î–ª—è –ø–∞—Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ–º new-password
                if (input.type === 'password') {
                    input.setAttribute('autocomplete', 'new-password');
                }
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–º–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
        function replaceTestDataWithServerSettings() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∑–∞–º–µ–Ω—è–µ–º placeholder'—ã
            fetch('/api/settings/public')
                .then(response => response.json())
                .then(data => {
                    if (data.serverName && data.serverName !== 'ChiwawaTest') {
                        // –ó–∞–º–µ–Ω—è–µ–º ChiwawaTest –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞ –≤–æ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö
                        replaceTestDataInTemplates('ChiwawaTest', data.serverName);
                        replaceTestDataInTemplates('chiwawatest', data.serverName.toLowerCase());
                    }
                    
                    if (data.serverIp && data.serverIp !== 'test.chiwawa.site') {
                        replaceTestDataInTemplates('test.chiwawa.site', data.serverIp);
                    }
                })
                .catch(error => {
                    console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –∑–∞–º–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:', error);
                });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –∑–∞–º–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —à–∞–±–ª–æ–Ω–∞—Ö
        function replaceTestDataInTemplates(searchText, replaceText) {
            // –ó–∞–º–µ–Ω—è–µ–º –≤ default —à–∞–±–ª–æ–Ω–∞—Ö
            Object.keys(window.defaultTemplates || {}).forEach(templateKey => {
                const template = window.defaultTemplates[templateKey];
                if (template.html) {
                    template.html = template.html.replace(new RegExp(searchText, 'gi'), replaceText);
                }
                if (template.subject) {
                    template.subject = template.subject.replace(new RegExp(searchText, 'gi'), replaceText);
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω –µ—Å–ª–∏ –æ–Ω –∑–∞–≥—Ä—É–∂–µ–Ω
            const templateHtml = document.getElementById('template-html');
            const templateSubject = document.getElementById('template-subject');
            
            if (templateHtml && templateHtml.value.includes(searchText)) {
                templateHtml.value = templateHtml.value.replace(new RegExp(searchText, 'gi'), replaceText);
            }
            
            if (templateSubject && templateSubject.value.includes(searchText)) {
                templateSubject.value = templateSubject.value.replace(new RegExp(searchText, 'gi'), replaceText);
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è debounce –¥–ª—è –ø–æ–∏—Å–∫–∞
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
        function switchModalTab(tabName) {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.modal-tab').forEach(tab => {
                tab.classList.remove('active', 'bg-minecraft-gold/20', 'text-white');
                tab.classList.add('text-gray-300');
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º—ã–µ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.modal-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeTab) {
                activeTab.classList.add('active', 'bg-minecraft-gold/20', 'text-white');
                activeTab.classList.remove('text-gray-300');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
            const activeContent = document.getElementById(`modal-tab-${tabName}`);
            if (activeContent) {
                activeContent.classList.remove('hidden');
            }
            
            // –ï—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°–µ—Ä–≤–µ—Ä", –∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            if (tabName === 'server') {
                loadServerStats(currentUserId);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loadServerStats(userId) {
            if (!userId) {
                console.error('User ID –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞');
                return;
            }

            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/stats`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏');
                }

                const stats = await response.json();
                updateServerStatisticsDisplay(stats);

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞:', error);
                showDefaultServerStats();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
        function updateServerStatisticsDisplay(stats) {
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã, –ø—Ä–æ–≤–µ—Ä—è—è –∏—Ö —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
            const updateElement = (id, value) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                } else {
                    console.warn(`–≠–ª–µ–º–µ–Ω—Ç —Å ID '${id}' –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                }
            };

            const updateElementHTML = (id, html) => {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = html;
                } else {
                    console.warn(`–≠–ª–µ–º–µ–Ω—Ç —Å ID '${id}' –Ω–µ –Ω–∞–π–¥–µ–Ω`);
                }
            };

            // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            updateElement('modal-server-playtime', formatMinutesToTime(stats.time_played_minutes || 0));
            updateElement('modal-server-last-seen', formatTimeAgo(stats.last_login));
            updateElement('modal-server-location', `x: ${stats.last_x || 0}, y: ${stats.last_y || 64}, z: ${stats.last_z || 0}`);
            updateElement('modal-server-total-logins', (stats.total_logins || 0).toLocaleString());
            updateElement('modal-server-level', `Level ${stats.player_level || 1}`);
            updateElement('modal-server-deaths', (stats.deaths || 0).toLocaleString());
            updateElement('modal-server-kills', (stats.mob_kills || 0).toLocaleString());
            updateElement('modal-server-sessions', (stats.session_count || 0).toLocaleString());
            
            // –°—Ä–µ–¥–Ω—è—è —Å–µ—Å—Å–∏—è
            const avgSessionMinutes = stats.session_count > 0 ? (stats.time_played_minutes / stats.session_count) : 0;
            updateElement('modal-server-avg-session', formatMinutesToTime(avgSessionMinutes));
            updateElement('modal-server-avg-session-2', formatMinutesToTime(avgSessionMinutes));

            // –ò–≥—Ä–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            updateElement('modal-server-blocks-broken', (stats.blocks_broken || 0).toLocaleString());
            updateElement('modal-server-blocks-placed', (stats.blocks_placed || 0).toLocaleString());
            updateElement('modal-server-distance', `${((stats.distance_traveled || 0) / 1000).toFixed(1)} –∫–º`);
            updateElement('modal-server-items-crafted', (stats.items_crafted || 0).toLocaleString());
            updateElement('modal-server-damage-dealt', (stats.damage_dealt || 0).toLocaleString());
            updateElement('modal-server-food-eaten', (stats.food_eaten || 0).toLocaleString());
            
            // –°–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è (–ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ä–µ–¥–Ω—é—é)
            updateElement('modal-server-longest-session', formatMinutesToTime(avgSessionMinutes * 1.5));
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –æ—à–∏–±–∫–µ
        function showDefaultServerStats() {
            const defaultMessage = '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö';
            
            const updateElement = (id, value) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            };

            const updateElementHTML = (id, html) => {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = html;
                }
            };

            updateElement('modal-server-playtime', '0–º');
            updateElement('modal-server-last-seen', '–ù–∏–∫–æ–≥–¥–∞');
            updateElement('modal-server-location', 'x: 0, y: 64, z: 0');
            updateElement('modal-server-total-logins', '0');
            updateElement('modal-server-level', 'Level 1');
            updateElement('modal-server-deaths', '0');
            updateElement('modal-server-kills', '0');
            updateElement('modal-server-sessions', '0');
            updateElement('modal-server-avg-session', '0–º');
            updateElement('modal-server-avg-session-2', '0–º');
            updateElement('modal-server-blocks-broken', '0');
            updateElement('modal-server-blocks-placed', '0');
            updateElement('modal-server-distance', '0 –∫–º');
            updateElement('modal-server-items-crafted', '0');
            updateElement('modal-server-damage-dealt', '0');
            updateElement('modal-server-food-eaten', '0');
            updateElement('modal-server-longest-session', '0–º');
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function formatMinutesToTime(minutes) {
            if (!minutes || minutes === 0) return '0–º';
            
            const hours = Math.floor(minutes / 60);
            const mins = Math.floor(minutes % 60);
            
            if (hours > 0) {
                return `${hours}—á ${mins}–º`;
            }
            return `${mins}–º`;
        }

        function formatTimeAgo(dateString) {
            if (!dateString) return '–ù–∏–∫–æ–≥–¥–∞';
            
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMinutes = Math.floor(diffMs / (1000 * 60));
            
            if (diffMinutes < 1) return '–¢–æ–ª—å–∫–æ —á—Ç–æ';
            if (diffMinutes < 60) return `${diffMinutes}–º –Ω–∞–∑–∞–¥`;
            
            const diffHours = Math.floor(diffMinutes / 60);
            if (diffHours < 24) return `${diffHours}—á –Ω–∞–∑–∞–¥`;
            
            const diffDays = Math.floor(diffHours / 24);
            if (diffDays < 7) return `${diffDays}–¥ –Ω–∞–∑–∞–¥`;
            
            const diffWeeks = Math.floor(diffDays / 7);
            if (diffWeeks < 4) return `${diffWeeks}–Ω–µ–¥ –Ω–∞–∑–∞–¥`;
            
            const diffMonths = Math.floor(diffDays / 30);
            return `${diffMonths}–º–µ—Å –Ω–∞–∑–∞–¥`;
        }

        function isRecentlyActive(lastLoginString) {
            if (!lastLoginString) return false;
            
            const lastLogin = new Date(lastLoginString);
            const now = new Date();
            const diffMinutes = (now - lastLogin) / (1000 * 60);
            
            return diffMinutes < 5; // –°—á–∏—Ç–∞–µ–º –æ–Ω–ª–∞–π–Ω –µ—Å–ª–∏ –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ (–æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
        function getTimeAgoText(minutes) {
            if (minutes < 60) return `${minutes} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (minutes < 1440) return `${Math.floor(minutes / 60)}—á –Ω–∞–∑–∞–¥`;
            return `${Math.floor(minutes / 1440)}–¥ –Ω–∞–∑–∞–¥`;
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        let currentUserId = null;

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        async function showUserDetails(userId) {
            currentUserId = userId;
            
            // –°–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π
            openModal('user-details-modal');
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
            document.getElementById('modal-user-nickname').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-email').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-role').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-trust-level').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-status').innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-created').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-age').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-discord').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-bio').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-avatar').innerHTML = '<div class="w-full h-full bg-minecraft-gray flex items-center justify-center"><i class="fas fa-spinner fa-spin text-minecraft-gold text-2xl"></i></div>';
            document.getElementById('modal-user-activity').innerHTML = '<div class="text-center py-4 text-gray-400"><i class="fas fa-spinner fa-spin"></i><div class="mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...</div></div>';
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∫–ª–∞–¥–∫—É "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å" –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—É—é
            switchModalTab('activity');
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/details`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }

                const user = await response.json();
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–∞–Ω–Ω—ã–º–∏
                document.getElementById('modal-user-nickname').textContent = user.nickname || '-';
                document.getElementById('modal-user-email').textContent = user.email || '-';
                document.getElementById('modal-user-role').textContent = getRoleText(user.role);
                document.getElementById('modal-user-trust-level').textContent = `–£—Ä–æ–≤–µ–Ω—å ${user.trust_level || 0}`;
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–æ–≤—ã–µ –ø–æ–ª—è
                document.getElementById('modal-user-age').textContent = user.age ? `${user.age} –ª–µ—Ç` : '–ù–µ —É–∫–∞–∑–∞–Ω';
                document.getElementById('modal-user-discord').textContent = user.discord_username || '–ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω';
                document.getElementById('modal-user-bio').textContent = user.bio || '–ù–µ —É–∫–∞–∑–∞–Ω–∞';
                
                // –ê–≤–∞—Ç–∞—Ä
                const avatarElement = document.getElementById('modal-user-avatar');
                if (user.avatar_url) {
                    avatarElement.innerHTML = `<img src="${user.avatar_url}" alt="–ê–≤–∞—Ç–∞—Ä ${user.nickname}" class="w-full h-full object-cover">`;
                } else {
                    avatarElement.innerHTML = '<div class="w-full h-full bg-minecraft-gray flex items-center justify-center"><i class="fas fa-user text-minecraft-gold text-2xl"></i></div>';
                }
                
                const statusElement = document.getElementById('modal-user-status');
                if (user.is_banned) {
                    let statusText = '<span class="text-red-400">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>';
                    if (user.ban_reason) {
                        statusText += `<div class="text-sm text-red-300 mt-1">–ü—Ä–∏—á–∏–Ω–∞: ${user.ban_reason}</div>`;
                    }
                    if (user.ban_until) {
                        const banDate = new Date(user.ban_until);
                        statusText += `<div class="text-sm text-red-300">–î–æ: ${banDate.toLocaleDateString('ru-RU')}</div>`;
                    }
                    statusElement.innerHTML = statusText;
                } else {
                    statusElement.innerHTML = '<span class="text-green-400">–ê–∫—Ç–∏–≤–µ–Ω</span>';
                }
                
                document.getElementById('modal-user-created').textContent = formatDate(user.registered_at);
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                loadUserActivity(userId);
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–µ—Ä–≤–µ—Ä–∞
                loadServerStats(userId);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                document.getElementById('modal-user-nickname').textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
                document.getElementById('modal-user-email').textContent = '-';
                document.getElementById('modal-user-role').textContent = '-';
                document.getElementById('modal-user-trust-level').textContent = '-';
                document.getElementById('modal-user-status').innerHTML = '<span class="text-red-400">–û—à–∏–±–∫–∞</span>';
                document.getElementById('modal-user-created').textContent = '-';
                document.getElementById('modal-user-activity').innerHTML = '<div class="text-red-400 text-sm">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loadUserActivity(userId) {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/activity`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                const activityContainer = document.getElementById('modal-user-activity');
                
                if (!response.ok) {
                    activityContainer.innerHTML = '<div class="text-red-400 text-sm">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>';
                    return;
                }

                const activityData = await response.json();
                
                // –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å–µ—Å—Å–∏–∏ –∏ –ª–æ–≥–∏ –≤—Ö–æ–¥–æ–≤ –≤ –æ–¥–∏–Ω –º–∞—Å—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                const sessions = activityData.sessions || [];
                const loginLogs = activityData.loginLogs || [];
                
                const activities = [
                    ...sessions.map(session => ({
                        action: 'session',
                        created_at: session.created_at,
                        ip_address: session.ip_address,
                        details: `–°–µ—Å—Å–∏—è ${session.is_active ? '–∞–∫—Ç–∏–≤–Ω–∞' : '–∑–∞–≤–µ—Ä—à–µ–Ω–∞'}`
                    })),
                    ...loginLogs.map(log => ({
                        action: 'login',
                        created_at: log.login_time,
                        ip_address: log.ip_address,
                        details: log.success ? '–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥' : '–ù–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞'
                    }))
                ].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
                
                if (activities.length === 0) {
                    activityContainer.innerHTML = '<div class="text-gray-400 text-sm">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>';
                    return;
                }

                const activityHtml = activities.slice(0, 10).map(activity => `
                    <div class="flex justify-between items-center py-3 px-3 rounded-lg bg-minecraft-dark/20 border border-minecraft-gold/10 mb-2">
                        <div class="flex items-center space-x-3">
                            <div class="flex-shrink-0">
                                <i class="fas fa-circle text-xs ${getActivityColor(activity.action)}"></i>
                            </div>
                            <div>
                                <span class="text-sm text-white font-medium">${getActivityText(activity.action)}</span>
                                ${activity.details ? `<div class="text-xs text-gray-400 mt-1">${activity.details}</div>` : ''}
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-xs text-gray-400">${formatDate(activity.created_at)}</span>
                            ${activity.ip_address ? `<div class="text-xs text-gray-500 font-mono">${activity.ip_address}</div>` : ''}
                        </div>
                    </div>
                `).join('');
                
                activityContainer.innerHTML = activityHtml;
            } catch (error) {
                document.getElementById('modal-user-activity').innerHTML = 
                    '<div class="text-red-400 text-sm">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
        async function loadServerStats(userId) {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/stats`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞');
                }

                const stats = await response.json();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
                const playtimeHours = Math.floor((stats.time_played_minutes || 0) / 60);
                const playtimeMinutes = (stats.time_played_minutes || 0) % 60;
                document.getElementById('modal-server-playtime').textContent = 
                    `${playtimeHours}—á ${playtimeMinutes}–º`;
                
                document.getElementById('modal-server-last-seen').textContent = 
                    stats.last_seen ? formatTimeAgo(stats.last_seen) : '–ù–∏–∫–æ–≥–¥–∞';
                
                document.getElementById('modal-server-status').innerHTML = 
                    stats.last_seen && isRecentlyActive(stats.last_seen) 
                        ? 'üü¢ –ù–µ–¥–∞–≤–Ω–æ –±—ã–ª –æ–Ω–ª–∞–π–Ω' 
                        : 'üî¥ –û—Ñ–ª–∞–π–Ω';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
                document.getElementById('modal-server-level').textContent = 
                    `Level ${stats.current_level || 0}`;
                    
                document.getElementById('modal-server-deaths').textContent = 
                    stats.deaths_count || 0;
                    
                document.getElementById('modal-server-kills').textContent = 
                    stats.mobs_killed || 0;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –ø–æ–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                updateServerStatisticsDisplay(stats);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞:', error);
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
                showDefaultServerStats();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∏—Å–ø–ª–µ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
        function updateServerStatisticsDisplay(stats) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
            const elements = {
                'modal-server-blocks-broken': stats.blocks_broken || 0,
                'modal-server-blocks-placed': stats.blocks_placed || 0,
                'modal-server-distance': Math.floor((stats.distance_walked || 0) / 1000) + ' –∫–º',
                'modal-server-items-crafted': stats.items_crafted || 0,
                'modal-server-damage-dealt': stats.damage_dealt || 0,
                'modal-server-food-eaten': stats.food_eaten || 0,
                'modal-server-sessions': stats.session_count || 0,
                'modal-server-avg-session': formatMinutesToTime(stats.average_session_duration || 0),
                'modal-server-longest-session': formatMinutesToTime(stats.longest_session_duration || 0),
                'modal-server-total-logins': stats.total_logins || 0
            };
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã, –µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
            Object.entries(elements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º IP –∞–¥—Ä–µ—Å –µ—Å–ª–∏ –µ—Å—Ç—å
            const ipElement = document.getElementById('modal-server-location');
            if (ipElement) {
                ipElement.textContent = stats.last_ip_address || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–∑ minecraft_stats
            if (stats.minecraft_stats) {
                const mcStats = typeof stats.minecraft_stats === 'string' 
                    ? JSON.parse(stats.minecraft_stats) 
                    : stats.minecraft_stats;
                    
                if (mcStats.favorite_block) {
                    const favBlockElement = document.getElementById('modal-server-favorite-block');
                    if (favBlockElement) {
                        favBlockElement.textContent = mcStats.favorite_block;
                    }
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–µ
        function showDefaultServerStats() {
            document.getElementById('modal-server-playtime').textContent = '0—á 0–º';
            document.getElementById('modal-server-last-seen').textContent = '–ù–∏–∫–æ–≥–¥–∞';
            document.getElementById('modal-server-status').innerHTML = 'üî¥ –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö';
            document.getElementById('modal-server-level').textContent = 'Level 0';
            document.getElementById('modal-server-deaths').textContent = '0';
            document.getElementById('modal-server-kills').textContent = '0';
        }

        // –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function changeUserRole(userId, nickname) {
            currentUserId = userId;
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/details`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }

                const user = await response.json();
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                document.getElementById('role-modal-user-nickname').textContent = nickname;
                document.getElementById('role-modal-current-role').textContent = getRoleText(user.role);
                document.getElementById('role-select').value = user.role;
                document.getElementById('role-change-reason').value = '';
                
                openModal('change-role-modal');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—É—Å–∫–æ—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        async function banUser(userId, nickname) {
            // –°–Ω–∞—á–∞–ª–∞ —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            openModal('ban-user-modal');
            
            const modal = document.getElementById('ban-user-modal');
            const nicknameElement = modal.querySelector('#ban-modal-user-nickname');
            const confirmBtn = modal.querySelector('#confirm-ban-btn');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            nicknameElement.textContent = nickname;
            confirmBtn.setAttribute('data-user-id', userId);
            
            // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
            const banTypeSelect = modal.querySelector('#ban-type');
            const reasonTextarea = modal.querySelector('#ban-reason');
            const durationInput = modal.querySelector('#ban-duration');
            
            banTypeSelect.value = 'temporary';
            reasonTextarea.value = '';
            durationInput.value = '7';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            modal.querySelector('#ban-duration-container').style.display = 'block';
            
            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ –ø—Ä–∏—á–∏–Ω—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
            setTimeout(() => {
                reasonTextarea.focus();
            }, 100);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
        async function confirmBanUser() {
            const modal = document.getElementById('ban-user-modal');
            const banType = modal.querySelector('#ban-type').value;
            const reason = modal.querySelector('#ban-reason').value.trim();
            const confirmBtn = modal.querySelector('#confirm-ban-btn');
            const userId = confirmBtn.getAttribute('data-user-id');
            
            if (!reason) {
                showMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏', 'error');
                return;
            }
            
            if (!userId) {
                showMessage('–û—à–∏–±–∫–∞: –Ω–µ —É–∫–∞–∑–∞–Ω ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'error');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const originalText = confirmBtn.innerHTML;
            confirmBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–û–±—Ä–∞–±–æ—Ç–∫–∞...';
            confirmBtn.disabled = true;
            
            try {
                const token = localStorage.getItem('auth_token');
                let requestData = { reason, type: banType };
                
                // –î–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                if (banType === 'temporary') {
                    const duration = parseInt(modal.querySelector('#ban-duration').value);
                    requestData.duration = duration;
                    requestData.unit = 'days';
                }
                
                const response = await fetch(`/api/admin/users/${userId}/ban`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestData)
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error || '–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏');
                }

                const result = await response.json();
                showMessage(result.message || '–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'success');
                closeModal('ban-user-modal');
                await loadUsers(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                await loadDashboard(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏:', error);
                showMessage('–û—à–∏–±–∫–∞: ' + error.message, 'error');
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                confirmBtn.innerHTML = originalText;
                confirmBtn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function unbanUser(userId, nickname) {
            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${nickname}?`)) {
                return;
            }
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/unban`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }

                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω');
                await loadUsers(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function deleteUser(userId, nickname) {
            // –°—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
            openModal('delete-user-modal');
            
            const modal = document.getElementById('delete-user-modal');
            const nicknameElement = modal.querySelector('#delete-modal-user-nickname');
            const confirmBtn = modal.querySelector('#confirm-delete-btn');
            const reasonTextarea = modal.querySelector('#delete-reason');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            nicknameElement.textContent = nickname;
            confirmBtn.setAttribute('data-user-id', userId);
            
            // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
            reasonTextarea.value = '';
            
            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ –ø—Ä–∏—á–∏–Ω—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
            setTimeout(() => {
                reasonTextarea.focus();
            }, 100);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function confirmDeleteUser() {
            const modal = document.getElementById('delete-user-modal');
            const reason = modal.querySelector('#delete-reason').value.trim();
            const confirmBtn = modal.querySelector('#confirm-delete-btn');
            const userId = confirmBtn.getAttribute('data-user-id');
            
            if (!reason) {
                showMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É —É–¥–∞–ª–µ–Ω–∏—è', 'error');
                return;
            }
            
            if (reason.length < 5) {
                showMessage('–ü—Ä–∏—á–∏–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                return;
            }
            
            if (!userId) {
                showMessage('–û—à–∏–±–∫–∞: –Ω–µ —É–∫–∞–∑–∞–Ω ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'error');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const originalText = confirmBtn.innerHTML;
            confirmBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–£–¥–∞–ª–µ–Ω–∏–µ...';
            confirmBtn.disabled = true;
            
            try {
                const token = localStorage.getItem('auth_token');
                
                const response = await fetch(`/api/admin/users/${userId}/delete`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ reason })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error || '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }

                const result = await response.json();
                showMessage(result.message || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω', 'success');
                closeModal('delete-user-modal');
                await loadUsers(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                await loadDashboard(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);
                showMessage('–û—à–∏–±–∫–∞: ' + error.message, 'error');
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                confirmBtn.innerHTML = originalText;
                confirmBtn.disabled = false;
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getRoleText(role) {
            switch (role) {
                case 'admin': return '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä';
                case 'moderator': return '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä';
                case 'user': return '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                default: return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            }
        }

        function getActivityColor(action) {
            switch (action) {
                case 'login': return 'text-green-400';
                case 'logout': return 'text-gray-400';
                case 'application_submitted': return 'text-blue-400';
                case 'application_approved': return 'text-green-400';
                case 'application_rejected': return 'text-red-400';
                case 'user_banned': return 'text-red-400';
                case 'user_unbanned': return 'text-green-400';
                case 'role_changed': return 'text-yellow-400';
                case 'trust_level_changed': return 'text-minecraft-gold';
                case 'password_changed': return 'text-purple-400';
                case 'email_verified': return 'text-cyan-400';
                case 'profile_updated': return 'text-blue-300';
                default: return 'text-gray-400';
            }
        }

        function getActivityText(action) {
            switch (action) {
                case 'login': return '–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É';
                case 'logout': return '–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã';
                case 'application_submitted': return '–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏';
                case 'application_approved': return '–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞';
                case 'application_rejected': return '–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞';
                case 'user_banned': return '–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞';
                case 'user_unbanned': return '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞';
                case 'role_changed': return '–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏';
                case 'trust_level_changed': return '–ò–∑–º–µ–Ω–µ–Ω–∏–µ Trust Level';
                case 'password_changed': return '–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è';
                case 'email_verified': return '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email';
                case 'profile_updated': return '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è';
                default: return action.replace(/_/g, ' ');
            }
        }

        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleString('ru-RU');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–Ω—É—Ç –≤ —á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
        function formatMinutesToTime(minutes) {
            if (!minutes || minutes === 0) return '0–º';
            
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            
            if (hours === 0) return `${mins}–º`;
            if (mins === 0) return `${hours}—á`;
            return `${hours}—á ${mins}–º`;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ "–Ω–∞–∑–∞–¥"
        function formatTimeAgo(dateString) {
            if (!dateString) return '–ù–∏–∫–æ–≥–¥–∞';
            
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / (1000 * 60));
            const diffHours = Math.floor(diffMins / 60);
            const diffDays = Math.floor(diffHours / 24);
            
            if (diffMins < 1) return '–¢–æ–ª—å–∫–æ —á—Ç–æ';
            if (diffMins < 60) return `${diffMins} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (diffHours < 24) return `${diffHours} —á –Ω–∞–∑–∞–¥`;
            if (diffDays < 30) return `${diffDays} –¥–Ω –Ω–∞–∑–∞–¥`;
            
            return formatDate(dateString);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–¥–∞–≤–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        function isRecentlyActive(dateString) {
            if (!dateString) return false;
            
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / (1000 * 60));
            
            return diffMins < 30; // –°—á–∏—Ç–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º –µ—Å–ª–∏ –±—ã–ª –≤ —Å–µ—Ç–∏ –º–µ–Ω–µ–µ 30 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥
        }

        async function loadDashboard() {
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch('/api/admin/stats', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    document.getElementById('total-users').textContent = data.users.total_users || 0;
                    document.getElementById('pending-apps').textContent = data.applications.pending || 0;
                    document.getElementById('active-sessions').textContent = data.sessions.active_sessions || 0;
                    document.getElementById('banned-users').textContent = data.users.banned_users || 0;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞—è–≤–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ –∑–∞—è–≤–æ–∫
            const activeTab = document.querySelector('.admin-tab.active');
            if (activeTab && activeTab.dataset.tab === 'applications') {
                loadApplications();
            }
        }

        async function loadApplications() {
            const token = localStorage.getItem('auth_token');
            const status = document.getElementById('app-status-filter').value;
            const appsList = document.getElementById('applications-list');
            
            appsList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i><p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p></div>';
            
            try {
                const url = `/api/applications?status=${status}&limit=20`;
                const response = await fetch(url, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.applications && data.applications.length > 0) {
                        appsList.innerHTML = data.applications.map(app => `
                            <div class="glass-effect border border-gray-200 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 class="font-semibold text-white">${app.minecraft_nick}</h4>
                                        <p class="text-sm text-gray-300">${app.email} ‚Ä¢ ${app.discord}</p>
                                        <p class="text-xs text-gray-500">${new Date(app.submitted_at).toLocaleString('ru-RU')}</p>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 text-xs font-medium rounded ${getStatusBadge(app.status)}">${getStatusText(app.status)}</span>
                                        ${app.status === 'pending' ? `
                                            <button data-action="approve-app" data-app-id="${app.id}" class="px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600">
                                                –û–¥–æ–±—Ä–∏—Ç—å
                                            </button>
                                            <button data-action="reject-app" data-app-id="${app.id}" class="px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600">
                                                –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                                            </button>
                                        ` : ''}
                                    </div>
                                </div>
                                <div class="grid md:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> ${app.age}<br>
                                        <strong>–û–ø—ã—Ç:</strong> ${app.experience}
                                    </div>
                                    <div>
                                        ${app.reviewed_by_nickname ? `<strong>–†–∞—Å—Å–º–æ—Ç—Ä–µ–ª:</strong> ${app.reviewed_by_nickname}<br>` : ''}
                                        ${app.reviewed_at ? `<strong>–î–∞—Ç–∞:</strong> ${new Date(app.reviewed_at).toLocaleString('ru-RU')}` : ''}
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <details class="text-sm">
                                        <summary class="cursor-pointer text-chiwawa-primary font-medium">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∑–∞—è–≤–∫–∏</summary>
                                        <div class="mt-2 space-y-2 text-gray-300">
                                            <div><strong>–ú–æ—Ç–∏–≤–∞—Ü–∏—è:</strong> ${app.motivation}</div>
                                            <div><strong>–ü–ª–∞–Ω—ã:</strong> ${app.plans}</div>
                                            ${app.review_comment ? `<div><strong>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</strong> ${app.review_comment}</div>` : ''}
                                        </div>
                                    </details>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        appsList.innerHTML = '<div class="text-center py-8 text-gray-500">–ó–∞—è–≤–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    }
                } else {
                    appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫</div>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫:', error);
                appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
        }

        async function loadUsers() {
            const token = localStorage.getItem('auth_token');
            const status = document.getElementById('user-status-filter').value;
            const search = document.getElementById('user-search').value;
            const usersList = document.getElementById('users-list');
            
            usersList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i><p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</p></div>';
            
            try {
                const params = new URLSearchParams({ status, search, limit: 50 });
                const response = await fetch(`/api/admin/users?${params}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.users && data.users.length > 0) {
                        usersList.innerHTML = data.users.map(user => `
                            <div class="glass-effect border border-gray-200 rounded-lg p-6">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <div class="w-12 h-12 rounded-full flex items-center justify-center mr-4 overflow-hidden border-2 border-minecraft-gold/30">
                                            ${user.avatar_url 
                                                ? `<img src="${user.avatar_url}" alt="–ê–≤–∞—Ç–∞—Ä ${user.nickname}" class="w-full h-full object-cover">`
                                                : `<div class="w-full h-full bg-minecraft-gray flex items-center justify-center"><i class="fas fa-user text-minecraft-gold"></i></div>`
                                            }
                                        </div>
                                        <div>
                                            <div class="flex items-center space-x-2">
                                                <h4 class="font-semibold text-white">${user.nickname}</h4>
                                                ${user.discord_username ? `<span class="text-xs bg-indigo-600 text-white px-2 py-1 rounded">Discord: ${user.discord_username}</span>` : ''}
                                            </div>
                                            <p class="text-sm text-gray-300">${user.email}</p>
                                            <div class="flex items-center space-x-3 text-xs text-gray-500 mt-1">
                                                <span>Trust Level ${user.trust_level}</span>
                                                <span>‚Ä¢</span>
                                                <span>${Math.floor((user.total_minutes || 0) / 60)} —á–∞—Å–æ–≤</span>
                                                ${user.age ? `<span>‚Ä¢ ${user.age} –ª–µ—Ç</span>` : ''}
                                            </div>
                                            ${user.bio ? `<p class="text-xs text-gray-400 mt-1 italic">${user.bio.length > 60 ? user.bio.substring(0, 60) + '...' : user.bio}</p>` : ''}
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 text-xs font-medium rounded ${user.is_banned ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}">
                                            ${user.is_banned ? '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω' : '–ê–∫—Ç–∏–≤–µ–Ω'}
                                        </span>
                                        <span class="px-2 py-1 text-xs font-medium rounded bg-minecraft-gold/20 text-minecraft-gold">
                                            ${user.role === 'admin' ? '–ê–¥–º–∏–Ω' : user.role === 'moderator' ? '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}
                                        </span>
                                        <div class="flex space-x-1">
                                            <button data-action="show-user-details" data-user-id="${user.id}" class="px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600" title="–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
                                                <i class="fas fa-info-circle"></i>
                                            </button>
                                            <select data-action="change-user-role" data-user-id="${user.id}" data-user-nickname="${user.nickname}" class="px-2 py-1 text-xs bg-minecraft-gray border border-minecraft-gold/20 rounded text-white" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å">
                                                <option value="user" ${user.role === 'user' ? 'selected' : ''}>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                                                <option value="moderator" ${user.role === 'moderator' ? 'selected' : ''}>üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                                                <option value="admin" ${user.role === 'admin' ? 'selected' : ''}>üëë –ê–¥–º–∏–Ω</option>
                                            </select>
                                            ${!user.is_banned ? `
                                                <button data-action="ban-user" data-user-id="${user.id}" data-user-nickname="${user.nickname}" class="px-2 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600" title="–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å">
                                                    <i class="fas fa-ban"></i>
                                                </button>
                                            ` : `
                                                <button data-action="unban-user" data-user-id="${user.id}" data-user-nickname="${user.nickname}" class="px-2 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600" title="–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å">
                                                    <i class="fas fa-check"></i>
                                                </button>
                                            `}
                                            <select data-action="change-trust-level" data-user-id="${user.id}" class="px-2 py-1 text-xs bg-minecraft-gray border border-minecraft-gold/20 rounded text-white" title="–ò–∑–º–µ–Ω–∏—Ç—å Trust Level">
                                                ${[0,1,2,3].map(level => {
                                                    const levelNames = ['üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü', 'üë§ –ù–æ–≤–∏—á–æ–∫', '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π', 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'];
                                                    return `<option value="${level}" ${user.trust_level == level ? 'selected' : ''}>${levelNames[level]} (${level})</option>`;
                                                }).join('')}
                                            </select>
                                            ${user.role !== 'admin' ? `
                                                <button data-action="delete-user" data-user-id="${user.id}" data-user-nickname="${user.nickname}" class="px-2 py-1 bg-red-700 text-white text-xs rounded hover:bg-red-800 transition-colors" title="–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                                                    <i class="fas fa-trash-alt"></i>
                                                </button>
                                            ` : ''}
                                        </div>
                                    </div>
                                </div>
                                ${user.ban_reason ? `<div class="mt-2 text-sm text-red-600"><strong>–ü—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:</strong> ${user.ban_reason}</div>` : ''}
                            </div>
                        `).join('');
                    } else {
                        usersList.innerHTML = '<div class="text-center py-8 text-gray-500">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
                usersList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ—Ä–≤–µ—Ä–µ
        async function loadTechnicalInfo() {
            const token = localStorage.getItem('auth_token');
            
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                const systemResponse = await fetch('/api/admin/system-info', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (systemResponse.ok) {
                    const systemInfo = await systemResponse.json();
                    
                    document.getElementById('node-version').textContent = systemInfo.nodeVersion || 'N/A';
                    document.getElementById('uptime').textContent = systemInfo.uptime || 'N/A';
                    document.getElementById('memory-rss').textContent = systemInfo.memory?.rss || 'N/A';
                    document.getElementById('memory-heap').textContent = systemInfo.memory?.heapUsed || 'N/A';
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint)
                const statsResponse = await fetch('/api/admin/stats', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (statsResponse.ok) {
                    const stats = await statsResponse.json();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    document.getElementById('api-total-requests').textContent = stats.totalUsers || 'N/A';
                    document.getElementById('api-today-requests').textContent = stats.totalApplications || 'N/A';
                    document.getElementById('api-active-users').textContent = stats.activeUsers || 'N/A';
                    
                    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                    const lastActivity = stats.lastActivity ? 
                        new Date(stats.lastActivity).toLocaleString('ru-RU') : '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö';
                    document.getElementById('api-last-activity').textContent = lastActivity;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:', error);
            }
        }

        async function loadLogs() {
            const token = localStorage.getItem('auth_token');
            const action = document.getElementById('log-action-filter').value;
            const logsList = document.getElementById('logs-list');
            
            logsList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i><p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</p></div>';
            
            try {
                const params = new URLSearchParams({ action, limit: 100 });
                const response = await fetch(`/api/admin/logs?${params}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.logs && data.logs.length > 0) {
                        logsList.innerHTML = data.logs.map(log => `
                            <div class="glass-effect border-l-4 ${getLogBorderColor(log.action)} p-4">
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2">
                                            <span class="font-medium text-white">${log.action}</span>
                                            ${log.admin_nickname ? `<span class="text-sm text-gray-300">–æ—Ç ${log.admin_nickname}</span>` : ''}
                                        </div>
                                        <p class="text-sm text-gray-300 mt-1">${log.details}</p>
                                        ${log.target_user_nickname ? `<p class="text-xs text-gray-500">–¶–µ–ª—å: ${log.target_user_nickname}</p>` : ''}
                                    </div>
                                    <div class="text-xs text-gray-500">
                                        ${new Date(log.created_at).toLocaleString('ru-RU')}
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        logsList.innerHTML = '<div class="text-center py-8 text-gray-500">–õ–æ–≥–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    }
                } else {
                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
                    const errorText = await response.text();
                    console.error('–û—à–∏–±–∫–∞ API –ª–æ–≥–æ–≤:', response.status, errorText);
                    
                    if (response.status === 500) {
                        logsList.innerHTML = `<div class="text-center py-8 text-red-500">
                            <div class="mb-2">–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (500)</div>
                            <div class="text-sm text-gray-400">–§–∏–ª—å—Ç—Ä "${action}" –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º</div>
                            <div class="text-xs text-gray-500 mt-2">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä "–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è"</div>
                        </div>`;
                    } else {
                        logsList.innerHTML = `<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤ (${response.status})</div>`;
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤:', error);
                logsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
        }

        // –î–µ–π—Å—Ç–≤–∏—è —Å –∑–∞—è–≤–∫–∞–º–∏
        async function reviewApplication(id, status) {
            const reason = status === 'rejected' ? prompt('–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):') : '';
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch(`/api/applications/${id}/review`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ status, comment: reason })
                });
                
                if (response.ok) {
                    loadApplications();
                    loadDashboard();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        // –î–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ HTML
        // –°—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è banUser —É–¥–∞–ª–µ–Ω–∞ –∏ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é
        
        async function unbanUser(id, nickname) {
            if (!confirm(`–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${nickname}?`)) return;
            
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch(`/api/admin/users/${id}/unban`, {
                    method: 'PUT',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    loadUsers();
                    loadDashboard();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        async function changeTrustLevel(id, level) {
            const levelNames = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫', 
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'
            };
            
            const levelName = levelNames[level] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
            const reason = prompt(`–ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è Trust Level –Ω–∞ "${levelName}" (${level}):`);
            
            if (!reason) return; // –û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
            
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch(`/api/admin/users/${id}/trust-level`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ level: parseInt(level), reason })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showMessage(result.message || 'Trust Level —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω', 'success');
                    loadUsers();
                    loadDashboard(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                } else {
                    const error = await response.json();
                    showMessage('–û—à–∏–±–∫–∞: ' + error.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è Trust Level:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        // –£—Ç–∏–ª–∏—Ç—ã
        function getStatusBadge(status) {
            const badges = {
                'pending': 'bg-yellow-100 text-yellow-600',
                'approved': 'bg-green-100 text-green-600',
                'rejected': 'bg-red-100 text-red-600',
                'banned': 'bg-gray-100 text-gray-300'
            };
            return badges[status] || 'bg-gray-100 text-gray-300';
        }

        function getStatusText(status) {
            const texts = {
                'pending': '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏',
                'approved': '–û–¥–æ–±—Ä–µ–Ω–∞',
                'rejected': '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞',
                'banned': '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞'
            };
            return texts[status] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        }

        function getLogBorderColor(action) {
            if (action.includes('login')) return 'border-blue-400';
            if (action.includes('banned') || action.includes('deleted')) return 'border-red-400';
            if (action.includes('unbanned')) return 'border-green-400';
            if (action.includes('application')) return 'border-green-400';
            if (action.includes('trust_level')) return 'border-yellow-400';
            if (action.includes('role_changed')) return 'border-purple-400';
            if (action.includes('settings')) return 'border-minecraft-gold';
            return 'border-gray-400';
        }

        function formatUptime(seconds) {
            const days = Math.floor(seconds / 86400);
            const hours = Math.floor((seconds % 86400) / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            
            if (days > 0) return `${days}–¥ ${hours}—á`;
            if (hours > 0) return `${hours}—á ${minutes}–º`;
            return `${minutes}–º`;
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Trust Level –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
        async function loadTrustLevels() {
            const token = localStorage.getItem('auth_token');
            const statsElement = document.getElementById('trust-level-stats');
            
            if (statsElement) {
                statsElement.innerHTML = '<div class="text-center py-4"><i class="fas fa-spinner fa-spin text-minecraft-gold"></i><p class="text-gray-300 mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p></div>';
                
                try {
                    const response = await fetch('/api/admin/trust-levels/stats', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        statsElement.innerHTML = `
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-300">üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü (0):</span>
                                    <span class="text-white font-bold">${data.level0 || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">üë§ –ù–æ–≤–∏—á–æ–∫ (1):</span>
                                    <span class="text-white font-bold">${data.level1 || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π (2):</span>
                                    <span class="text-white font-bold">${data.level2 || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">üèÜ –í–µ—Ç–µ—Ä–∞–Ω (3):</span>
                                    <span class="text-white font-bold">${data.level3 || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                                </div>
                            </div>
                        `;
                    } else {
                        statsElement.innerHTML = '<div class="text-center py-4 text-red-400">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</div>';
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ Trust Level:', error);
                    statsElement.innerHTML = '<div class="text-center py-4 text-red-400">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
                }
            }
            
            loadTrustApplications();
        }

        async function loadTrustApplications() {
            const token = localStorage.getItem('auth_token');
            const status = document.getElementById('trust-app-status-filter')?.value || 'all';
            const appsList = document.getElementById('trust-applications-list');
            
            if (appsList) {
                appsList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i><p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p></div>';
                
                try {
                    const response = await fetch(`/api/admin/trust-applications?status=${status}`, {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        if (data.applications && data.applications.length > 0) {
                            appsList.innerHTML = data.applications.map(app => `
                                <div class="glass-effect rounded-lg p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <div>
                                            <h4 class="font-semibold text-white">${app.nickname}</h4>
                                            <p class="text-sm text-gray-300">–ó–∞—è–≤–∫–∞ –Ω–∞ ${app.requested_level} —É—Ä–æ–≤–µ–Ω—å</p>
                                            <p class="text-xs text-gray-500">${new Date(app.submitted_at).toLocaleString('ru-RU')}</p>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="px-2 py-1 text-xs font-medium rounded ${getStatusBadge(app.status)}">${getStatusText(app.status)}</span>
                                        </div>
                                    </div>
                                    <div class="text-sm text-gray-300">
                                        <p><strong>–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:</strong> ${app.reason}</p>
                                    </div>
                                </div>
                            `).join('');
                        } else {
                            appsList.innerHTML = '<div class="text-center py-8 text-gray-500">–ó–∞—è–≤–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                        }
                    } else {
                        appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫</div>';
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫ Trust Level:', error);
                    appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤
        function showTestResult(type, message) {
            const resultsDiv = document.getElementById('test-results');
            const outputDiv = document.getElementById('test-output');
            
            if (resultsDiv && outputDiv) {
                resultsDiv.classList.remove('hidden');
                outputDiv.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
                outputDiv.className = `text-sm font-mono whitespace-pre-wrap ${
                    type === 'success' ? 'text-green-600' : 'text-red-600'
                }`;
                
                // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
                resultsDiv.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('save-settings-btn')?.addEventListener('click', async () => {
                const btn = document.getElementById('save-settings-btn');
                const originalText = btn.innerHTML;
                
                btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–°–æ—Ö—Ä–∞–Ω—è—é...';
                btn.disabled = true;
                
                try {
                    // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–æ—Ä–º—ã
                    const settings = {
                        server: {
                            name: document.getElementById('server-name')?.value,
                            description: document.getElementById('server-description')?.value,
                            ip: document.getElementById('server-ip')?.value,
                            port: document.getElementById('server-port')?.value,
                            discord: document.getElementById('discord-invite')?.value,
                            telegram: document.getElementById('telegram-invite')?.value
                        },
                        applications: {
                            minMotivationLength: parseInt(document.getElementById('min-motivation-length')?.value) || 50,
                            minPlansLength: parseInt(document.getElementById('min-plans-length')?.value) || 30,
                            maxApplicationsPerDay: parseInt(document.getElementById('max-applications-per-day')?.value) || 3,
                        }
                    };
                    
                    const token = localStorage.getItem('auth_token');
                    const response = await fetch('/api/admin/settings', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({ settings })
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok) {
                        showMessage('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
                    } else {
                        showMessage('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + (result.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
                    }
                } catch (error) {
                    showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + error.message, 'error');
                } finally {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }
            });
        });

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(text, type) {
            const message = document.createElement('div');
            message.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${
                type === 'success' ? 
                'bg-green-900/90 text-green-300 border border-green-500/50' : 
                'bg-red-900/90 text-red-300 border border-red-500/50'
            }`;
            message.textContent = text;
            
            document.body.appendChild(message);
            
            setTimeout(() => {
                message.style.opacity = '0';
                message.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(message);
                }, 300);
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª–∞–º–∏
        async function loadTrustLevels() {
            await loadTrustLevelStats();
            await loadTrustApplications();
        }

        async function loadTrustLevelStats() {
            const token = localStorage.getItem('auth_token');
            const statsDiv = document.getElementById('trust-level-stats');
            
            try {
                const response = await fetch('/api/admin/stats', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const trustLevels = data.trust_levels || [];
                    
                    // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —É—Ä–æ–≤–Ω—è–º
                    const levelCounts = { 0: 0, 1: 0, 2: 0, 3: 0 };
                    trustLevels.forEach(level => {
                        levelCounts[level.trust_level] = level.user_count;
                    });
                    
                    statsDiv.innerHTML = `
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-300">üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º—Ü—ã:</span>
                                <span class="text-white font-medium">${levelCounts[0]} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-300">üë§ –ù–æ–≤–∏—á–∫–∏:</span>
                                <span class="text-white font-medium">${levelCounts[1]} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-300">‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ:</span>
                                <span class="text-white font-medium">${levelCounts[2]} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-300">üèÜ –í–µ—Ç–µ—Ä–∞–Ω—ã:</span>
                                <span class="text-white font-medium">${levelCounts[3]} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                            </div>
                            ${data.trust_applications ? `
                                <hr class="border-minecraft-gold/20 my-3">
                                <div class="flex justify-between">
                                    <span class="text-gray-300">üìù –ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏:</span>
                                    <span class="text-minecraft-gold font-medium">${data.trust_applications.pending || 0}</span>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª–æ–≤:', error);
                statsDiv.innerHTML = '<div class="text-red-500 text-center">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</div>';
            }
        }

        async function loadTrustApplications() {
            const token = localStorage.getItem('auth_token');
            const status = document.getElementById('trust-app-status-filter').value;
            const appsList = document.getElementById('trust-applications-list');
            
            appsList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i><p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p></div>';
            
            try {
                const params = new URLSearchParams({ status, limit: 20 });
                const response = await fetch(`/api/trust-level/applications?${params}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.applications && data.applications.length > 0) {
                        appsList.innerHTML = data.applications.map(app => `
                            <div class="glass-effect border border-gray-200 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 class="font-semibold text-white">${app.nickname}</h4>
                                        <p class="text-sm text-gray-300">
                                            –ü–æ–≤—ã—à–µ–Ω–∏–µ —Å —É—Ä–æ–≤–Ω—è ${app.current_level} –¥–æ ${app.requested_level}
                                        </p>
                                        <p class="text-xs text-gray-500">${new Date(app.created_at).toLocaleString('ru-RU')}</p>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 text-xs font-medium rounded ${getTrustStatusBadge(app.status)}">${getTrustStatusText(app.status)}</span>
                                        ${app.status === 'pending' ? `
                                            <button data-action="approve-trust-app" data-app-id="${app.id}" class="px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600">
                                                –û–¥–æ–±—Ä–∏—Ç—å
                                            </button>
                                            <button data-action="reject-trust-app" data-app-id="${app.id}" class="px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600">
                                                –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                                            </button>
                                        ` : ''}
                                    </div>
                                </div>
                                <div class="grid md:grid-cols-3 gap-4 text-sm mb-4">
                                    <div>
                                        <strong>–í—Ä–µ–º—è –∏–≥—Ä—ã:</strong> ${Math.floor(app.hours_played || 0)} —á–∞—Å–æ–≤<br>
                                        <strong>–†–µ–ø—É—Ç–∞—Ü–∏—è:</strong> ${app.current_reputation || app.reputation_score || 0}
                                    </div>
                                    <div>
                                        <strong>–ü–æ—á—Ç–∞:</strong> ${app.email_verified ? '‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞' : '‚ùå –ù–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞'}<br>
                                        <strong>–¢—Ä–µ–±—É–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å:</strong> ${getTrustLevelName(app.requested_level)}
                                    </div>
                                    <div>
                                        ${app.reviewer_nickname ? `<strong>–†–∞—Å—Å–º–æ—Ç—Ä–µ–ª:</strong> ${app.reviewer_nickname}<br>` : ''}
                                        ${app.reviewed_at ? `<strong>–î–∞—Ç–∞:</strong> ${new Date(app.reviewed_at).toLocaleString('ru-RU')}` : ''}
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <details class="text-sm">
                                        <summary class="cursor-pointer text-minecraft-gold font-medium">–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏</summary>
                                        <div class="mt-2 text-gray-300">
                                            ${app.reason}
                                            ${app.review_comment ? `<div class="mt-2 p-3 bg-minecraft-gray rounded border-l-4 border-minecraft-gold"><strong>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</strong> ${app.review_comment}</div>` : ''}
                                        </div>
                                    </details>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        appsList.innerHTML = '<div class="text-center py-8 text-gray-500">–ó–∞—è–≤–æ–∫ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    }
                } else {
                    appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫</div>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª:', error);
                appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
        }

        async function reviewTrustApplication(id, status) {
            const comment = status === 'rejected' ? prompt('–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):') : prompt('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):');
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch(`/api/trust-level/applications/${id}/review`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ status, comment })
                });
                
                if (response.ok) {
                    showMessage(`–ó–∞—è–≤–∫–∞ ${status === 'approved' ? '–æ–¥–æ–±—Ä–µ–Ω–∞' : '–æ—Ç–∫–ª–æ–Ω–µ–Ω–∞'}`, 'success');
                    loadTrustApplications();
                    loadTrustLevelStats();
                    loadDashboard(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                } else {
                    const error = await response.json();
                    showMessage('–û—à–∏–±–∫–∞: ' + error.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            }
        }

        function getTrustStatusBadge(status) {
            const badges = {
                'pending': 'bg-yellow-100 text-yellow-800',
                'approved': 'bg-green-100 text-green-800',
                'rejected': 'bg-red-100 text-red-800'
            };
            return badges[status] || 'bg-gray-100 text-gray-800';
        }

        function getTrustStatusText(status) {
            const texts = {
                'pending': '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏',
                'approved': '–û–¥–æ–±—Ä–µ–Ω–∞',
                'rejected': '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞'
            };
            return texts[status] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        }

        function getTrustLevelName(level) {
            const names = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫', 
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'
            };
            return names[level] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
        }

        function getTrustLevelDisplayName(level) {
            const names = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü (–£—Ä–æ–≤–µ–Ω—å 0)',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫ (–£—Ä–æ–≤–µ–Ω—å 1)', 
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π (–£—Ä–æ–≤–µ–Ω—å 2)',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω (–£—Ä–æ–≤–µ–Ω—å 3)'
            };
            return names[level] || `–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (${level})`;
        }

        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function saveSettings() {
            const token = localStorage.getItem('auth_token');
            const saveBtn = document.getElementById('save-settings-btn');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const originalText = saveBtn.innerHTML;
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
            saveBtn.disabled = true;
            
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–æ—Ä–º—ã
                const settingsData = {
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    serverName: document.getElementById('server-name')?.value,
                    serverDescription: document.getElementById('server-description')?.value,
                    serverIp: document.getElementById('server-ip')?.value,
                    serverPort: parseInt(document.getElementById('server-port')?.value),
                    maxPlayers: parseInt(document.getElementById('max-players')?.value),
                    discordInvite: document.getElementById('discord-invite')?.value,
                    telegramInvite: document.getElementById('telegram-invite')?.value,
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
                    applicationsEnabled: document.getElementById('applications-enabled')?.checked,
                    minMotivationLength: parseInt(document.getElementById('min-motivation-length')?.value),
                    minPlansLength: parseInt(document.getElementById('min-plans-length')?.value),
                    maxApplicationsPerDay: parseInt(document.getElementById('max-applications-per-day')?.value),
                    autoApproveTrustLevel: parseInt(document.getElementById('auto-approve-trust-level')?.value),
                    
                    // Trust Level –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    trustPointsEmail: parseInt(document.getElementById('trust-points-email')?.value),
                    trustPointsDiscord: parseInt(document.getElementById('trust-points-discord')?.value),
                    trustPointsHour: parseInt(document.getElementById('trust-points-hour')?.value),
                    trustPointsReputation: parseInt(document.getElementById('trust-points-reputation')?.value),
                    trustMinimumHours: parseInt(document.getElementById('trust-minimum-hours')?.value),
                    trustMinimumReputation: parseInt(document.getElementById('trust-minimum-reputation')?.value),
                    trustLevel1Required: parseInt(document.getElementById('trust-level-1-required')?.value),
                    trustLevel2Required: parseInt(document.getElementById('trust-level-2-required')?.value),
                    trustLevel3Required: parseInt(document.getElementById('trust-level-3-required')?.value),
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                    maxLoginAttempts: parseInt(document.getElementById('max-login-attempts')?.value),
                    loginLockoutDuration: parseInt(document.getElementById('login-lockout-duration')?.value),
                    jwtExpiresDays: parseInt(document.getElementById('jwt-expires-days')?.value),
                    requireEmailVerification: document.getElementById('require-email-verification')?.value === 'true',
                    twoFactorEnabled: document.getElementById('two-factor-enabled')?.checked,
                    rateLimitRequests: parseInt(document.getElementById('rate-limit-requests')?.value),
                    
                    // Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    smtpHost: document.getElementById('smtp-host')?.value,
                    smtpPort: parseInt(document.getElementById('smtp-port')?.value),
                    smtpFrom: document.getElementById('smtp-from')?.value,
                    smtpUser: document.getElementById('smtp-user')?.value,
                    smtpPassword: document.getElementById('smtp-password')?.value,
                    smtpTls: document.getElementById('smtp-tls')?.checked,
                    smtpSenderName: document.getElementById('smtp-sender-name')?.value,
                    smtpReplyTo: document.getElementById('smtp-reply-to')?.value,
                    smtpTimeout: parseInt(document.getElementById('smtp-timeout')?.value)
                };
                
                console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', settingsData);
                
                const response = await fetch('/api/admin/settings', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(settingsData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    
                    console.log('–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', result);
                    
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ API
                    await loadSettings();
                    
                    showNotification('success', result.message || '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
                } else {
                    const errorData = await response.json();
                    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', errorData);
                    showNotification('error', '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + (errorData.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showNotification('error', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                saveBtn.innerHTML = originalText;
                saveBtn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è email –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function testEmailSettings() {
            const btn = document.getElementById('test-email-simple-btn');
            const resultDiv = document.getElementById('email-test-result');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–û—Ç–ø—Ä–∞–≤–ª—è—é...';
            btn.disabled = true;
            
            try {
                const token = localStorage.getItem('auth_token');
                const recipient = document.getElementById('test-email-recipient').value;
                const template = document.getElementById('test-email-template').value;
                
                if (!recipient) {
                    showNotification('error', '–£–∫–∞–∂–∏—Ç–µ email –ø–æ–ª—É—á–∞—Ç–µ–ª—è –¥–ª—è —Ç–µ—Å—Ç–∞');
                    return;
                }
                
                const testData = {
                    recipient: recipient,
                    template: template,
                    settings: {
                        host: document.getElementById('smtp-host').value,
                        port: parseInt(document.getElementById('smtp-port').value),
                        user: document.getElementById('smtp-user').value,
                        password: document.getElementById('smtp-password').value,
                        from: document.getElementById('smtp-from').value,
                        secure: document.getElementById('smtp-secure').checked
                    }
                };
                
                const response = await fetch('/api/admin/test-email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(testData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    showNotification('success', '–¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!');
                    resultDiv.innerHTML = `
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-green-400 mr-3 mt-1"></i>
                            <div class="text-sm">
                                <div class="text-green-300 font-medium">–ü–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!</div>
                                <div class="text-gray-400 mt-1">
                                    <div>–ü–æ–ª—É—á–∞—Ç–µ–ª—å: ${recipient}</div>
                                    <div>–í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏: ${result.sentAt || '–°–µ–π—á–∞—Å'}</div>
                                    <div>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: ${result.deliveryTime || 'N/A'}</div>
                                </div>
                            </div>
                        </div>
                    `;
                    resultDiv.classList.remove('hidden');
                    resultDiv.className = resultDiv.className.replace(/bg-\w+-500\/10/, 'bg-green-500/10');
                } else {
                    showNotification('error', '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: ' + (result.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
                    resultDiv.innerHTML = `
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-circle text-red-400 mr-3 mt-1"></i>
                            <div class="text-sm">
                                <div class="text-red-300 font-medium">–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏</div>
                                <div class="text-gray-400 mt-1">${result.error || '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP'}</div>
                            </div>
                        </div>
                    `;
                    resultDiv.classList.remove('hidden');
                    resultDiv.className = resultDiv.className.replace(/bg-\w+-500\/10/, 'bg-red-500/10');
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è email:', error);
                showNotification('error', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
                resultDiv.innerHTML = `
                    <div class="flex items-start">
                        <i class="fas fa-exclamation-triangle text-yellow-400 mr-3 mt-1"></i>
                        <div class="text-sm">
                            <div class="text-yellow-300 font-medium">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>
                            <div class="text-gray-400 mt-1">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É</div>
                        </div>
                    </div>
                `;
                resultDiv.classList.remove('hidden');
                resultDiv.className = resultDiv.className.replace(/bg-\w+-500\/10/, 'bg-yellow-500/10');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫ —É–º–æ–ª—á–∞–Ω–∏—é
        async function resetSettings() {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?')) {
                return;
            }
            
            const btn = document.getElementById('reset-settings-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–°–±—Ä–æ—Å...';
            btn.disabled = true;
            
            try {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                const defaultSettings = {
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    'server-name': 'Chiwawa',
                    'server-description': '–ü—Ä–∏–≤–∞—Ç–Ω—ã–π Minecraft —Å–µ—Ä–≤–µ—Ä —Å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º',
                    'server-ip': 'play.chiwawa.site',
                    'server-port': '25164',
                    'max-players': '100',
                    'discord-invite': 'https://discord.gg/chiwawa',
                    'telegram-invite': 'https://t.me/chiwawa',
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
                    'min-motivation-length': '50',
                    'min-plans-length': '30',
                    'max-applications-per-day': '3',
                    'auto-approve-trust-level': '0',
                    
                    // Trust Level
                    'trust-points-email': '10',
                    'trust-points-discord': '15',
                    'trust-points-hour': '1',
                    'trust-points-reputation': '2',
                    'trust-minimum-hours': '5',
                    'trust-minimum-reputation': '0',
                    'trust-level-1-required': '25',
                    'trust-level-2-required': '100',
                    'trust-level-3-required': '500',
                    
                    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
                    'max-login-attempts': '5',
                    'login-lockout-duration': '15',
                    'jwt-expires-days': '7',
                    'rate-limit-requests': '100',
                    
                    // Email
                    'smtp-host': '',
                    'smtp-port': '587',
                    'smtp-from': '',
                    'smtp-user': '',
                    'smtp-password': '',
                    'smtp-sender-name': 'Chiwawa Server',
                    'smtp-reply-to': '',
                    'smtp-timeout': '30'
                };
                
                const defaultCheckboxes = {
                    'applications-enabled': true,
                    'two-factor-enabled': false,
                    'smtp-tls': true
                };
                
                const defaultSelects = {
                    'require-email-verification': 'true'
                };
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                Object.entries(defaultSettings).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = value;
                    }
                });
                
                Object.entries(defaultCheckboxes).forEach(([id, checked]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.checked = checked;
                    }
                });
                
                Object.entries(defaultSelects).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = value;
                    }
                });
                
                showMessage('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é', 'success');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(text, type) {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            let messageElement = document.getElementById('global-message');
            if (!messageElement) {
                messageElement = document.createElement('div');
                messageElement.id = 'global-message';
                messageElement.className = 'fixed top-4 right-4 z-50 px-6 py-4 rounded-lg font-medium';
                document.body.appendChild(messageElement);
            }
            
            messageElement.textContent = text;
            messageElement.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg font-medium ${
                type === 'success' ? 
                'bg-green-900/90 text-green-300 border border-green-500/50' : 
                'bg-red-900/90 text-red-300 border border-red-500/50'
            }`;
            
            messageElement.style.display = 'block';
            
            setTimeout(() => {
                messageElement.style.display = 'none';
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function loadSettings() {
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch('/api/admin/settings', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const settings = data.settings || {};
                    
                    console.log('–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', settings);
                    
                    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª—è
                    const setElementValue = (id, value) => {
                        const element = document.getElementById(id);
                        if (element && value !== undefined && value !== null) {
                            element.value = value;
                        }
                    };
                    
                    const setElementChecked = (id, checked) => {
                        const element = document.getElementById(id);
                        if (element && checked !== undefined && checked !== null) {
                            element.checked = checked;
                        }
                    };
                    
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
                    setElementValue('server-name', settings.serverName);
                    setElementValue('server-description', settings.serverDescription);
                    setElementValue('server-ip', settings.serverIp);
                    setElementValue('server-port', settings.serverPort);
                    setElementValue('max-players', settings.maxPlayers);
                    setElementValue('discord-invite', settings.discordInvite);
                    setElementValue('telegram-invite', settings.telegramInvite);
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
                    setElementValue('min-motivation-length', settings.minMotivationLength);
                    setElementValue('min-plans-length', settings.minPlansLength);
                    setElementValue('max-applications-per-day', settings.maxApplicationsPerDay);
                    setElementChecked('applications-enabled', settings.applicationsEnabled);
                    setElementValue('auto-approve-trust-level', settings.autoApproveTrustLevel);
                    
                    // Trust Level –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    setElementValue('trust-points-email', settings.trustPointsEmail);
                    setElementValue('trust-points-discord', settings.trustPointsDiscord);
                    setElementValue('trust-points-hour', settings.trustPointsHour);
                    setElementValue('trust-points-reputation', settings.trustPointsReputation);
                    setElementValue('trust-minimum-hours', settings.trustMinimumHours);
                    setElementValue('trust-minimum-reputation', settings.trustMinimumReputation);
                    setElementValue('trust-level-1-required', settings.trustLevel1Required);
                    setElementValue('trust-level-2-required', settings.trustLevel2Required);
                    setElementValue('trust-level-3-required', settings.trustLevel3Required);
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                    setElementValue('max-login-attempts', settings.maxLoginAttempts);
                    setElementValue('login-lockout-duration', settings.loginLockoutDuration);
                    setElementValue('jwt-expires-days', settings.jwtExpiresDays);
                    setElementValue('rate-limit-requests', settings.rateLimitRequests);
                    setElementChecked('two-factor-enabled', settings.twoFactorEnabled);
                    
                    // Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    setElementValue('smtp-host', settings.smtpHost);
                    setElementValue('smtp-port', settings.smtpPort);
                    setElementValue('smtp-from', settings.smtpFrom);
                    setElementValue('smtp-user', settings.smtpUser);
                    setElementValue('smtp-password', settings.smtpPassword);
                    setElementChecked('smtp-tls', settings.smtpTls);
                    setElementValue('smtp-sender-name', settings.smtpSenderName);
                    setElementValue('smtp-reply-to', settings.smtpReplyTo);
                    setElementValue('smtp-timeout', settings.smtpTimeout);
                    
                    // Select –ø–æ–ª—è
                    const emailVerificationSelect = document.getElementById('require-email-verification');
                    if (emailVerificationSelect && settings.requireEmailVerification !== undefined) {
                        emailVerificationSelect.value = settings.requireEmailVerification ? 'true' : 'false';
                    }
                    
                    console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ —Ñ–æ—Ä–º–µ');
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', response.status);
                    showMessage('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
            }
        }

        async function changeTrustLevel(userId, newLevel) {
            const levelNames = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫', 
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'
            };
            
            const levelName = levelNames[newLevel] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
            const reason = prompt(`–ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è Trust Level –Ω–∞ "${levelName}" (${newLevel}):`);
            
            if (!reason) return; // –û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/trust-level`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ level: parseInt(newLevel), reason: reason })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showMessage(result.message || 'Trust Level —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω', 'success');
                    loadUsers();
                    loadDashboard();
                } else {
                    const error = await response.json();
                    showMessage('–û—à–∏–±–∫–∞: ' + error.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª–∞:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            }
        }

        async function changeUserRoleSelect(userId, nickname, newRole) {
            if (!confirm(`–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${nickname} –Ω–∞ ${getRoleText(newRole)}?`)) {
                // –ï—Å–ª–∏ –æ—Ç–º–µ–Ω–∏–ª–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                loadUsers();
                return;
            }
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/role`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        role: newRole,
                        reason: `–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å`
                    })
                });
                
                if (response.ok) {
                    loadUsers();
                    loadDashboard();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                    loadUsers(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
                loadUsers(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            }
        }

        async function unbanUser(userId, nickname) {
            if (confirm(`–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${nickname}?`)) {
                try {
                    const token = localStorage.getItem('auth_token');
                    const response = await fetch(`/api/admin/users/${userId}/unban`, {
                        method: 'PUT',
                        headers: { 
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        loadUsers();
                        loadDashboard();
                    } else {
                        const error = await response.json();
                        alert('–û—à–∏–±–∫–∞: ' + error.error);
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:', error);
                    alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
                }
            }
        }

        async function reviewTrustApplication(id, status) {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/trust-level/applications/${id}/review`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        decision: status,
                        comment: status === 'approved' ? '–û–¥–æ–±—Ä–µ–Ω–æ' : '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ'
                    })
                });
                
                if (response.ok) {
                    loadTrustApplications();
                    loadTrustLevelStats();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        async function updateUserRole(userId) {
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            console.log('–û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', userId);
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç
        async function testEmail() {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch('/api/admin/test/email', {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                const result = await response.json();
                showTestResult(result.success ? 'success' : 'error', result.message || result.error);
            } catch (error) {
                showTestResult('error', '–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ email: ' + error.message);
            }
        }



        // === –ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –ù–ê–°–¢–†–û–ï–ö ===
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function initSettingsCategories() {
            const categoryTabs = document.querySelectorAll('.settings-category-tab');
            const categoryContents = document.querySelectorAll('.settings-category-content');

            categoryTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const category = tab.dataset.category;
                    
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã
                    categoryTabs.forEach(t => {
                        t.classList.remove('active', 'text-minecraft-gold', 'border-minecraft-gold');
                        t.classList.add('text-gray-300', 'border-transparent');
                    });
                    categoryContents.forEach(c => c.classList.add('hidden'));
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã
                    tab.classList.add('active', 'text-minecraft-gold', 'border-minecraft-gold');
                    tab.classList.remove('text-gray-300', 'border-transparent');
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                    const targetContent = document.getElementById(`settings-category-${category}`);
                    if (targetContent) {
                        targetContent.classList.remove('hidden');
                    }
                });
            });
        }

        // –¢—É–ª—Ç–∏–ø—ã –¥–ª—è –ø–æ–ª–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function initTooltips() {
            const tooltipElements = document.querySelectorAll('.tooltip-icon');
            
            tooltipElements.forEach(element => {
                const tooltipText = element.dataset.tooltip;
                if (!tooltipText) return;

                // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Ç—É–ª—Ç–∏–ø–∞
                const tooltip = document.createElement('div');
                tooltip.className = 'absolute z-50 px-3 py-2 text-xs bg-gray-900 text-white rounded-lg shadow-lg border border-gray-700 max-w-xs';
                tooltip.style.display = 'none';
                tooltip.textContent = tooltipText;
                document.body.appendChild(tooltip);

                element.addEventListener('mouseenter', (e) => {
                    const rect = e.target.getBoundingClientRect();
                    tooltip.style.display = 'block';
                    tooltip.style.left = rect.left + 'px';
                    tooltip.style.top = (rect.bottom + 5) + 'px';
                });

                element.addEventListener('mouseleave', () => {
                    tooltip.style.display = 'none';
                });
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
        function togglePasswordVisibility(inputId) {
            const passwordInput = document.getElementById(inputId);
            const eyeIcon = document.getElementById(inputId + '-eye');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.remove('fa-eye');
                eyeIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('fa-eye-slash');
                eyeIcon.classList.add('fa-eye');
            }
        }

        // –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ email
        async function initEmailTemplates() {
            const templateSelectors = document.querySelectorAll('.template-selector');
            const templateHtml = document.getElementById('template-html');
            const templateSubject = document.getElementById('template-subject');
            const currentTemplateName = document.getElementById('current-template-name');

            let templates = {};
            let currentTemplate = 'welcome';

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —à–∞–±–ª–æ–Ω—ã –∏–∑ API
            try {
                const token = localStorage.getItem('auth_token') || localStorage.getItem('token');
                const response = await fetch('/api/admin/email-templates', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    if (data.success && data.templates) {
                        templates = data.templates;
                        console.log('–®–∞–±–ª–æ–Ω—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:', Object.keys(templates));
                    }
                } else {
                    const errorText = await response.text();
                    console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —à–∞–±–ª–æ–Ω—ã –∏–∑ API:', response.status, errorText);
                }
            } catch (error) {
                console.warn('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ API:', error);
            }

            // –ï—Å–ª–∏ —à–∞–±–ª–æ–Ω—ã –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å –∏–∑ API, –∏—Å–ø–æ–ª—å–∑—É–µ–º —à–∞–±–ª–æ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            if (Object.keys(templates).length === 0) {
                templates = {
                'welcome': {
                    name: '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ',
                    subject: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ {{serverName}}!',
                    html: `<div style="max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 12px; padding: 40px; font-family: Arial, sans-serif; color: #ffffff;">
    
    <div style="text-align: center; margin-bottom: 40px; padding: 25px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 10px;">
        <h1 style="margin: 0; font-size: 28px; color: #000; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">{{serverName}}</h1>
        <p style="margin: 8px 0 0 0; color: #000; font-weight: 500;">–ü—Ä–∏–≤–∞—Ç–Ω—ã–π Minecraft —Å–µ—Ä–≤–µ—Ä</p>
    </div>
    
    <h2 style="color: #f59e0b; text-align: center; margin-bottom: 25px; font-size: 24px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{nickname}}!</h2>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
        üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –Ω–∞—à–µ–º Minecraft —Å–µ—Ä–≤–µ—Ä–µ –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ú—ã —Ä–∞–¥—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∞—Å –≤ –Ω–∞—à–µ–º –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ!
    </p>
    
    <div style="background: rgba(248, 181, 0, 0.1); border-left: 4px solid #f8b500; padding: 20px; margin: 25px 0; border-radius: 5px;">
        <h3 style="margin: 0 0 15px 0; color: #f8b500; font-size: 18px;">üìç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</h3>
        <ul style="margin: 0; padding-left: 20px; color: #e2e8f0;">
            <li style="margin-bottom: 8px;"><strong>IP —Å–µ—Ä–≤–µ—Ä–∞:</strong> {{serverIp}}:{{serverPort}}</li>
            <li style="margin-bottom: 8px;"><strong>–í–µ—Ä—Å–∏—è:</strong> Java Edition 1.20+</li>
            <li style="margin-bottom: 8px;"><strong>–†–µ–∂–∏–º:</strong> –í—ã–∂–∏–≤–∞–Ω–∏–µ —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏</li>
            <li><strong>Whitelist:</strong> –í–∫–ª—é—á–µ–Ω (–≤—ã —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã)</li>
        </ul>
    </div>
    
    <div style="text-align: center; margin: 35px 0;">
        <a href="{{discordInvite}}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #5865f2 0%, #4752c4 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0 10px 10px 0; box-shadow: 0 4px 12px rgba(88, 101, 242, 0.3);">
            üéÆ Discord —Å–µ—Ä–≤–µ—Ä
        </a>
        <a href="{{telegramInvite}}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #0088cc 0%, #006bb3 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0 10px 10px 0; box-shadow: 0 4px 12px rgba(0, 136, 204, 0.3);">
            üí¨ Telegram —á–∞—Ç
        </a>
    </div>
    
    <p style="font-size: 16px; line-height: 1.6; text-align: center; margin: 30px 0;">
        <strong style="color: #f8b500;">–£–≤–∏–¥–∏–º—Å—è –≤ –∏–≥—Ä–µ! üéÆ</strong>
    </p>
    
    <hr style="border: none; border-top: 2px solid #f8b500; margin: 40px 0; opacity: 0.5;">
    
    <div style="text-align: center; color: #94a3b8; font-size: 14px;">
        <p style="margin: 5px 0;"><strong>–° –Ω–∞–∏–ª—É—á—à–∏–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏,</strong></p>
        <p style="margin: 5px 0; color: #f8b500;">–ö–æ–º–∞–Ω–¥–∞ {{serverName}}</p>
        <p style="margin: 15px 0 5px 0; font-size: 12px; opacity: 0.7;">
            –î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {{currentDate}}
        </p>
        <p style="margin: 5px 0; font-size: 12px; opacity: 0.7;">
            –≠—Ç–æ –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ –Ω–µ–≥–æ.
        </p>
    </div>
</div>`
                },
                'verification': {
                    name: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email',
                    subject: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email –∞–¥—Ä–µ—Å–∞ - {{serverName}}',
                    html: `<div style="max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 12px; padding: 40px; font-family: Arial, sans-serif; color: #ffffff;">
    
    <div style="text-align: center; margin-bottom: 40px; padding: 25px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 10px;">
        <h1 style="margin: 0; font-size: 28px; color: #000; font-weight: bold;">{{serverName}}</h1>
        <p style="margin: 8px 0 0 0; color: #000; font-weight: 500;">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
    </div>
    
    <h2 style="color: #10b981; text-align: center; margin-bottom: 25px; font-size: 24px;">üîê –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–∞—à email</h2>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
        –ü—Ä–∏–≤–µ—Ç, <strong style="color: #f8b500;">{{nickname}}</strong>!
    </p>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 25px;">
        –î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ <strong>{{serverName}}</strong> –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–∞—à email –∞–¥—Ä–µ—Å. 
        –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –∑–∞—â–∏—Ç–∏—Ç—å –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç –∏ —É–≤–µ–¥–æ–º–ª—è—Ç—å –≤–∞—Å –æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
    </p>
    
    <div style="background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981; padding: 20px; margin: 25px 0; border-radius: 5px;">
        <p style="margin: 0; color: #e2e8f0; font-size: 15px;">
            ‚è∞ <strong style="color: #10b981;">–í–∞–∂–Ω–æ:</strong> –°—Å—ã–ª–∫–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ <strong>24 —á–∞—Å–æ–≤</strong>. 
            –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.
        </p>
    </div>
    
    <div style="text-align: center; margin: 35px 0;">
        <a href="{{verificationLink}}" style="display: inline-block; padding: 18px 36px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; text-decoration: none; border-radius: 10px; font-weight: bold; font-size: 16px; box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4); transition: all 0.3s ease;">
            ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email –∞–¥—Ä–µ—Å
        </a>
    </div>
    
    <div style="background: rgba(107, 114, 128, 0.1); border-radius: 8px; padding: 20px; margin: 25px 0;">
        <p style="margin: 0 0 10px 0; color: #9ca3af; font-size: 14px; line-height: 1.5;">
            <strong>–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong> –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –∞–¥—Ä–µ—Å–Ω—É—é —Å—Ç—Ä–æ–∫—É –±—Ä–∞—É–∑–µ—Ä–∞:
        </p>
        <div style="background: #1f2937; padding: 12px; border-radius: 5px; border: 1px solid #374151; word-break: break-all;">
            <code style="color: #10b981; font-size: 13px; font-family: 'Courier New', monospace;">{{verificationLink}}</code>
        </div>
    </div>
    
    <hr style="border: none; border-top: 2px solid #10b981; margin: 40px 0; opacity: 0.5;">
    
    <div style="text-align: center; color: #94a3b8; font-size: 14px;">
        <p style="margin: 15px 0 5px 0; font-size: 13px; color: #6b7280;">
            üõ°Ô∏è –ï—Å–ª–∏ –≤—ã –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ –Ω–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ç–æ –ø–∏—Å—å–º–æ.
        </p>
        <p style="margin: 5px 0; color: #10b981;">–ö–æ–º–∞–Ω–¥–∞ {{serverName}}</p>
        <p style="margin: 15px 0 5px 0; font-size: 12px; opacity: 0.7;">{{currentDate}}</p>
    </div>
</div>`
                },
                'application-approved': {
                    name: '–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞',
                    subject: 'üéâ –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞ - {{serverName}}',
                    html: `<div style="max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 12px; padding: 40px; font-family: Arial, sans-serif; color: #ffffff;">
    
    <div style="text-align: center; margin-bottom: 40px; padding: 25px; background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); border-radius: 10px;">
        <h1 style="margin: 0; font-size: 28px; color: #000; font-weight: bold;">{{serverName}}</h1>
        <p style="margin: 8px 0 0 0; color: #000; font-weight: 500;">–ó–∞—è–≤–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∞</p>
    </div>
    
    <div style="background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); padding: 25px; border-radius: 10px; text-align: center; margin-bottom: 30px;">
        <h2 style="margin: 0; font-size: 24px; color: #000; font-weight: bold;">üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞!</h2>
    </div>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
        –ü—Ä–∏–≤–µ—Ç, <strong style="color: #f8b500;">{{nickname}}</strong>!
    </p>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 25px;">
        üåü –û—Ç–ª–∏—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏! –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É <strong>{{serverName}}</strong> –±—ã–ª–∞ —Ç—â–∞—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ <strong style="color: #16a34a;">–æ–¥–æ–±—Ä–µ–Ω–∞</strong>!
    </p>
    
    <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 20px; margin: 25px 0; border-radius: 5px;">
        <h3 style="margin: 0 0 15px 0; color: #22c55e; font-size: 18px;">üéÆ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –∏–≥—Ä—ã:</h3>
        <ul style="margin: 0; padding-left: 20px; color: #e2e8f0;">
            <li style="margin-bottom: 8px;"><strong>IP —Å–µ—Ä–≤–µ—Ä–∞:</strong> {{serverIp}}:{{serverPort}}</li>
            <li style="margin-bottom: 8px;"><strong>–í–∞—à —Å—Ç–∞—Ç—É—Å:</strong> –£—á–∞—Å—Ç–Ω–∏–∫ —Å–µ—Ä–≤–µ—Ä–∞</li>
            <li style="margin-bottom: 8px;"><strong>Whitelist:</strong> –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</li>
            <li><strong>–í–µ—Ä—Å–∏—è:</strong> Java Edition 1.20+</li>
        </ul>
    </div>
    
    <div style="text-align: center; margin: 35px 0;">
        <a href="{{discordInvite}}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #5865f2 0%, #4752c4 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0 10px 10px 0; box-shadow: 0 4px 12px rgba(88, 101, 242, 0.3);">
            üí¨ Discord —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
        </a>
        <a href="{{telegramInvite}}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #0088cc 0%, #006bb3 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0 10px 10px 0; box-shadow: 0 4px 12px rgba(0, 136, 204, 0.3);">
            üì± Telegram —á–∞—Ç
        </a>
    </div>
    
    <p style="font-size: 16px; line-height: 1.6; text-align: center; margin: 30px 0;">
        <strong style="color: #22c55e;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ! üè°</strong>
    </p>
    
    <hr style="border: none; border-top: 2px solid #22c55e; margin: 40px 0; opacity: 0.5;">
    
    <div style="text-align: center; color: #94a3b8; font-size: 14px;">
        <p style="margin: 5px 0;"><strong>–£–≤–∏–¥–∏–º—Å—è –≤ –∏–≥—Ä–µ!</strong></p>
        <p style="margin: 5px 0; color: #22c55e;">–ö–æ–º–∞–Ω–¥–∞ {{serverName}}</p>
        <p style="margin: 15px 0 5px 0; font-size: 12px; opacity: 0.7;">{{currentDate}}</p>
    </div>
</div>`
                },
                'application-rejected': {
                    name: '–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞',
                    subject: '‚ùå –û –≤–∞—à–µ–π –∑–∞—è–≤–∫–µ - {{serverName}}',
                    html: `<div style="max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 12px; padding: 40px; font-family: Arial, sans-serif; color: #ffffff;">
    
    <div style="text-align: center; margin-bottom: 40px; padding: 25px; background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); border-radius: 10px;">
        <h1 style="margin: 0; font-size: 28px; color: #fff; font-weight: bold;">{{serverName}}</h1>
        <p style="margin: 8px 0 0 0; color: #fff; font-weight: 500;">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏</p>
    </div>
    
    <h2 style="color: #dc2626; text-align: center; margin-bottom: 25px; font-size: 24px;">‚ùå –ó–∞—è–≤–∫–∞ –Ω–µ –æ–¥–æ–±—Ä–µ–Ω–∞</h2>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
        –ü—Ä–∏–≤–µ—Ç, <strong style="color: #f8b500;">{{nickname}}</strong>!
    </p>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 25px;">
        –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤–∞—à–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É <strong>{{serverName}}</strong> –Ω–µ –±—ã–ª–∞ –æ–¥–æ–±—Ä–µ–Ω–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç.
    </p>
    
    <div style="background: rgba(220, 38, 38, 0.1); border-left: 4px solid #dc2626; padding: 20px; margin: 25px 0; border-radius: 5px;">
        <h3 style="margin: 0 0 15px 0; color: #dc2626; font-size: 18px;">üìù –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è:</h3>
        <p style="margin: 0; color: #e2e8f0; font-size: 15px;">
            {{rejectionReason}}
        </p>
    </div>
    
    <div style="background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; padding: 20px; margin: 25px 0; border-radius: 5px;">
        <h3 style="margin: 0 0 15px 0; color: #3b82f6; font-size: 18px;">üí° –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:</h3>
        <ul style="margin: 0; padding-left: 20px; color: #e2e8f0;">
            <li style="margin-bottom: 8px;">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ —á–µ—Ä–µ–∑ <strong>7 –¥–Ω–µ–π</strong></li>
            <li style="margin-bottom: 8px;">–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ</li>
            <li style="margin-bottom: 8px;">–û–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞</li>
            <li>–û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞ —Å–æ–≤–µ—Ç–æ–º</li>
        </ul>
    </div>
    
    <div style="text-align: center; margin: 35px 0;">
        <a href="{{discordInvite}}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #5865f2 0%, #4752c4 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0 10px 10px 0; box-shadow: 0 4px 12px rgba(88, 101, 242, 0.3);">
            üí¨ –°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π
        </a>
    </div>
    
    <p style="font-size: 16px; line-height: 1.6; text-align: center; margin: 30px 0; color: #94a3b8;">
        –ù–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ—Å—å! –£ –≤–∞—Å –±—É–¥–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É —Å–Ω–æ–≤–∞.
    </p>
    
    <hr style="border: none; border-top: 2px solid #dc2626; margin: 40px 0; opacity: 0.5;">
    
    <div style="text-align: center; color: #94a3b8; font-size: 14px;">
        <p style="margin: 5px 0;">–° —É–≤–∞–∂–µ–Ω–∏–µ–º,</p>
        <p style="margin: 5px 0; color: #dc2626;">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è {{serverName}}</p>
        <p style="margin: 15px 0 5px 0; font-size: 12px; opacity: 0.7;">{{currentDate}}</p>
        <div style="margin-top: 15px;">
            <p style="margin: 5px 0;">–° —É–≤–∞–∂–µ–Ω–∏–µ–º,</p>
            <p style="margin: 5px 0; color: #dc2626;">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è {{serverName}}</p>
            <p style="margin: 15px 0 5px 0; font-size: 12px; opacity: 0.7;">{{currentDate}}</p>
        </div>
    </div>
</div>`
                },
                'password-reset': {
                    name: '–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è',
                    subject: 'üîë –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è - {{serverName}}',
                    html: `<div style="max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 12px; padding: 40px; font-family: Arial, sans-serif; color: #ffffff;">
    
    <div style="text-align: center; margin-bottom: 40px; padding: 25px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 10px;">
        <h1 style="margin: 0; font-size: 28px; color: #000; font-weight: bold;">{{serverName}}</h1>
        <p style="margin: 8px 0 0 0; color: #000; font-weight: 500;">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞</p>
    </div>
    
    <h2 style="color: #f59e0b; text-align: center; margin-bottom: 25px; font-size: 24px;">üîë –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h2>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
        –ü—Ä–∏–≤–µ—Ç, <strong style="color: #f8b500;">{{nickname}}</strong>!
    </p>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 25px;">
        –ú—ã –ø–æ–ª—É—á–∏–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –¥–ª—è –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ <strong>{{serverName}}</strong>. 
        –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª–∏ –≤—ã, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è.
    </p>
    
    <div style="background: rgba(245, 158, 11, 0.1); border-left: 4px solid #f59e0b; padding: 20px; margin: 25px 0; border-radius: 5px;">
        <p style="margin: 0; color: #e2e8f0; font-size: 15px;">
            ‚è∞ <strong style="color: #f59e0b;">–í–∞–∂–Ω–æ:</strong> –°—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ <strong>1 —á–∞—Å–∞</strong>. 
            –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.
        </p>
    </div>
    
    <div style="text-align: center; margin: 35px 0;">
        <a href="{{resetLink}}" style="display: inline-block; padding: 18px 36px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; text-decoration: none; border-radius: 10px; font-weight: bold; font-size: 16px; box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);">
            üîê –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
        </a>
    </div>
    
    <div style="background: rgba(107, 114, 128, 0.1); border-radius: 8px; padding: 20px; margin: 25px 0;">
        <p style="margin: 0 0 10px 0; color: #9ca3af; font-size: 14px; line-height: 1.5;">
            <strong>–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong> –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ –∞–¥—Ä–µ—Å–Ω—É—é —Å—Ç—Ä–æ–∫—É –±—Ä–∞—É–∑–µ—Ä–∞:
        </p>
        <div style="background: #1f2937; padding: 12px; border-radius: 5px; border: 1px solid #374151; word-break: break-all;">
            <code style="color: #f59e0b; font-size: 13px; font-family: 'Courier New', monospace;">{{resetLink}}</code>
        </div>
    </div>
    
    <div style="background: rgba(239, 68, 68, 0.1); border-left: 4px solid #ef4444; padding: 20px; margin: 25px 0; border-radius: 5px;">
        <p style="margin: 0; color: #e2e8f0; font-size: 15px;">
            üõ°Ô∏è <strong style="color: #ef4444;">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong> –ï—Å–ª–∏ –≤—ã –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è, 
            –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ —ç—Ç–æ –ø–∏—Å—å–º–æ. –í–∞—à —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º.
        </p>
    </div>
    
    <hr style="border: none; border-top: 2px solid #f59e0b; margin: 40px 0; opacity: 0.5;">
    
    <div style="text-align: center; color: #94a3b8; font-size: 14px;">
        <p style="margin: 5px 0;">–° —É–≤–∞–∂–µ–Ω–∏–µ–º,</p>
        <p style="margin: 5px 0; color: #f59e0b;">–ö–æ–º–∞–Ω–¥–∞ {{serverName}}</p>
        <p style="margin: 15px 0 5px 0; font-size: 12px; opacity: 0.7;">{{currentDate}}</p>
    </div>
</div>`
                },
                'newsletter': {
                    name: '–ù–æ–≤–æ—Å—Ç–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞',
                    subject: 'üì∞ –ù–æ–≤–æ—Å—Ç–∏ {{serverName}} - {{newsletterTitle}}',
                    html: `<div style="max-width: 600px; margin: 0 auto; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border-radius: 12px; padding: 40px; font-family: Arial, sans-serif; color: #ffffff;">
    
    <div style="text-align: center; margin-bottom: 40px; padding: 25px; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); border-radius: 10px; border-bottom: 3px solid #f8b500;">
        <h1 style="margin: 0; font-size: 28px; color: #000; font-weight: bold;">{{serverName}}</h1>
        <p style="margin: 8px 0 0 0; color: #000; font-weight: 500;">–ù–æ–≤–æ—Å—Ç–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</p>
    </div>
    
    <h2 style="color: #8b5cf6; text-align: center; margin-bottom: 25px; font-size: 24px;">üì∞ {{newsletterTitle}}</h2>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 20px;">
        –ü—Ä–∏–≤–µ—Ç, <strong style="color: #f8b500;">{{nickname}}</strong>!
    </p>
    
    <p style="font-size: 16px; line-height: 1.6; margin-bottom: 30px;">
        üéØ –£ –Ω–∞—Å –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ <strong>{{serverName}}</strong>!
    </p>
    
    <div style="background: rgba(139, 92, 246, 0.1); border-left: 4px solid #8b5cf6; padding: 25px; margin: 30px 0; border-radius: 8px;">
        <h3 style="margin: 0 0 15px 0; color: #8b5cf6; font-size: 20px;">üì¢ {{newsTitle1}}</h3>
        <p style="margin: 0; color: #e2e8f0; font-size: 16px; line-height: 1.6;">
            {{newsContent1}}
        </p>
    </div>
    
    <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 25px; margin: 30px 0; border-radius: 8px;">
        <h3 style="margin: 0 0 15px 0; color: #22c55e; font-size: 20px;">üöÄ {{newsTitle2}}</h3>
        <p style="margin: 0; color: #e2e8f0; font-size: 16px; line-height: 1.6;">
            {{newsContent2}}
        </p>
    </div>
    
    <div style="text-align: center; margin: 40px 0;">
        <a href="{{serverLink}}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0 10px 10px 0; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);">
            üéÆ –ò–≥—Ä–∞—Ç—å —Å–µ–π—á–∞—Å
        </a>
        <a href="{{discordInvite}}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #5865f2 0%, #4752c4 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0 10px 10px 0; box-shadow: 0 4px 12px rgba(88, 101, 242, 0.3);">
            üí¨ Discord
        </a>
        <a href="{{telegramInvite}}" style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #0088cc 0%, #006bb3 100%); color: white; text-decoration: none; border-radius: 8px; font-weight: bold; margin: 0 10px 10px 0; box-shadow: 0 4px 12px rgba(0, 136, 204, 0.3);">
            üì± Telegram
        </a>
    </div>
    
    <hr style="border: none; border-top: 2px solid #8b5cf6; margin: 40px 0; opacity: 0.5;">
    
    <div style="text-align: center; color: #94a3b8; font-size: 14px;">
        <p style="margin: 5px 0;"><strong>–° –Ω–∞–∏–ª—É—á—à–∏–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏,</strong></p>
        <p style="margin: 5px 0; color: #8b5cf6;">–ö–æ–º–∞–Ω–¥–∞ {{serverName}}</p>
        <p style="margin: 15px 0 5px 0; font-size: 12px; opacity: 0.7;">{{currentDate}}</p>
        <p style="margin: 10px 0; font-size: 12px;">
            <a href="{{unsubscribeLink}}" style="color: #94a3b8; text-decoration: underline;">–û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ä–∞—Å—Å—ã–ª–∫–∏</a>
        </p>
    </div>
</div>`
                }
            };
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —à–∞–±–ª–æ–Ω –≤ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
            function loadTemplate(templateKey) {
                const template = templates[templateKey];
                if (template) {
                    document.getElementById('template-subject').value = template.subject;
                    document.getElementById('current-template-name').textContent = template.name;
                    currentTemplate = templateKey;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
                    if (quillEditor && quillEditor.root) {
                        try {
                            // –û—á–∏—â–∞–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
                            quillEditor.setContents([]);
                            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                            quillEditor.clipboard.dangerouslyPasteHTML(template.html);
                        } catch (error) {
                            console.warn('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Quill —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:', error);
                            // Fallback - –æ–±–Ω–æ–≤–ª—è–µ–º —á–µ—Ä–µ–∑ innerHTML
                            if (quillEditor.root) {
                                quillEditor.root.innerHTML = template.html;
                            }
                        }
                    }
                }
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞
            templateSelectors.forEach(selector => {
                selector.addEventListener('click', () => {
                    templateSelectors.forEach(s => s.classList.remove('border-minecraft-gold', 'bg-minecraft-gold/10'));
                    selector.classList.add('border-minecraft-gold', 'bg-minecraft-gold/10');
                    
                    const templateKey = selector.dataset.template;
                    loadTemplate(templateKey);
                });
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä)
            const saveTemplateBtn = document.getElementById('save-template-btn');
            if (saveTemplateBtn) {
                saveTemplateBtn.addEventListener('click', async () => {
                    try {
                        if (!quillEditor) {
                            showNotification('error', '–†–µ–¥–∞–∫—Ç–æ—Ä –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                            return;
                        }

                        const templateHtml = quillEditor.root.innerHTML;
                        const templateSubject = document.getElementById('template-subject').value;
                        const currentTemplateName = document.getElementById('current-template-name').textContent;

                        if (!templateHtml.trim() || templateHtml === '<p><br></p>') {
                            showNotification('error', '–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º');
                            return;
                        }

                        if (!templateSubject.trim()) {
                            showNotification('error', '–¢–µ–º–∞ –ø–∏—Å—å–º–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π');
                            return;
                        }

                        const token = localStorage.getItem('auth_token') || localStorage.getItem('token');
                        const response = await fetch('/api/admin/email-templates', {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${token}`,
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                templateKey: currentTemplate,
                                html: templateHtml,
                                subject: templateSubject,
                                name: currentTemplateName
                            })
                        });

                        if (response.ok) {
                            const data = await response.json();
                            showNotification('success', '–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
                            
                            // –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
                            templates[currentTemplate] = {
                                name: currentTemplateName,
                                subject: templateSubject,
                                html: templateHtml
                            };
                        } else {
                            const error = await response.json();
                            showNotification('error', error.error || '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞');
                        }
                    } catch (error) {
                        console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞:', error);
                        showNotification('error', '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞');
                    }
                });
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–±—Ä–æ—Å–∞ —à–∞–±–ª–æ–Ω–∞
            const resetTemplateBtn = document.getElementById('reset-template-btn');
            if (resetTemplateBtn) {
                resetTemplateBtn.addEventListener('click', () => {
                    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è? –ù–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.')) {
                        loadTemplate(currentTemplate);
                        showNotification('info', '–®–∞–±–ª–æ–Ω —Å–±—Ä–æ—à–µ–Ω –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏');
                    }
                });
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–≤—ã–π —à–∞–±–ª–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            loadTemplate('welcome');
        }

        // –í—Å—Ç–∞–≤–∫–∞ –≥–æ—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤ –≤ —à–∞–±–ª–æ–Ω
        function insertTemplate(type) {
            const templateHtml = document.getElementById('template-html');
            const cursorPos = templateHtml.selectionStart;
            const textBefore = templateHtml.value.substring(0, cursorPos);
            const textAfter = templateHtml.value.substring(templateHtml.selectionEnd);
            
            let insertText = '';
            
            switch(type) {
                case 'username':
                    insertText = '<p>–ü—Ä–∏–≤–µ—Ç, {{username}}!</p>';
                    break;
                case 'button':
                    insertText = '<p style="text-align: center;"><a href="#" class="button">–ù–∞–∂–º–∏ –º–µ–Ω—è</a></p>';
                    break;
                case 'footer':
                    insertText = `<div class="footer">
    <p>–° –Ω–∞–∏–ª—É—á—à–∏–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏,<br>–ö–æ–º–∞–Ω–¥–∞ {{serverName}}</p>
    <p>{{currentDate}}</p>
</div>`;
                    break;
            }
            
            templateHtml.value = textBefore + insertText + textAfter;
            templateHtml.focus();
            templateHtml.setSelectionRange(cursorPos + insertText.length, cursorPos + insertText.length);
        }

        // –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–∞
        function previewTemplate() {
            const templateHtml = document.getElementById('template-html').value;
            const newWindow = window.open('', '_blank');
            newWindow.document.write(templateHtml);
            newWindow.document.close();
        }

        // –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∏–∑ SMTP –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function testEmailWithTemplate() {
            const templateKey = document.getElementById('test-email-template').value;
            const userModeActive = !document.getElementById('user-selector-container').classList.contains('hidden');
            
            let recipientData = {};
            
            if (userModeActive) {
                // –†–µ–∂–∏–º –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const selectedUserId = document.getElementById('test-email-user').value;
                if (!selectedUserId) {
                    showNotification('error', '–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞');
                    return;
                }
                recipientData.userId = parseInt(selectedUserId);
            } else {
                // –†–µ–∂–∏–º –≤–≤–æ–¥–∞ email
                const recipientEmail = document.getElementById('test-email-recipient').value;
                if (!recipientEmail || !recipientEmail.includes('@')) {
                    showNotification('error', '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –ø–æ–ª—É—á–∞—Ç–µ–ª—è');
                    return;
                }
                recipientData.recipientEmail = recipientEmail;
            }
            
            if (!templateKey) {
                showNotification('error', '–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏');
                return;
            }
            
            const testButton = document.getElementById('test-email-btn');
            const originalText = testButton.innerHTML;
            testButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–û—Ç–ø—Ä–∞–≤–∫–∞...';
            testButton.disabled = true;
            
            try {
                const requestBody = {
                    templateKey: templateKey,
                    ...recipientData
                };
                
                const response = await fetch('/api/admin/test-email-with-template', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('auth_token')}`
                    },
                    body: JSON.stringify(requestBody)
                });

                if (response.ok) {
                    const result = await response.json();
                    showNotification('success', result.message || '–¢–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!');
                    document.getElementById('email-test-result').classList.remove('hidden');
                    document.getElementById('email-test-result').className = 'p-4 rounded-lg bg-green-500/10 border border-green-500/30';
                    
                    // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                    let recipientInfo = '';
                    if (result.details.recipientInfo) {
                        recipientInfo = ` (${result.details.recipientInfo.nickname}, ${result.details.recipientInfo.role})`;
                    }
                    
                    document.getElementById('email-test-result').innerHTML = `
                        <div class="text-green-400 font-medium">‚úÖ ${result.details.templateName} –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω</div>
                        <div class="text-sm text-gray-300 mt-1">
                            üìß –ü–æ–ª—É—á–∞—Ç–µ–ª—å: ${result.details.recipient}${recipientInfo}<br>
                            üìù –¢–µ–º–∞: ${result.details.subject}<br>
                            üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–º–µ–Ω–µ–Ω–æ: ${result.details.variablesReplaced}
                        </div>
                    `;
                } else {
                    const error = await response.json();
                    console.error('Error response:', error);
                    
                    let errorMessage = error.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞';
                    
                    // –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ SPAM
                    if (error.yandexBlockingInfo) {
                        errorMessage = `üö´ ${error.error}\n\nüìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:\n${error.yandexBlockingInfo.recommendations.map(r => `‚Ä¢ ${r}`).join('\n')}`;
                    }
                    
                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞
                    if (response.status === 429) {
                        errorMessage = `‚è±Ô∏è ${error.error}`;
                        if (error.cooldownRemaining) {
                            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç
                            showCooldownTimer(error.cooldownRemaining);
                        }
                    }
                    
                    showNotification('error', errorMessage.length > 200 ? '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Å–º. –∫–æ–Ω—Å–æ–ª—å)' : errorMessage);
                    document.getElementById('email-test-result').classList.remove('hidden');
                    document.getElementById('email-test-result').className = 'p-4 rounded-lg bg-red-500/10 border border-red-500/30';
                    document.getElementById('email-test-result').innerHTML = `
                        <div class="text-red-400 font-medium">‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏</div>
                        <div class="text-sm text-gray-300 mt-1 whitespace-pre-line">${errorMessage}</div>
                    `;
                }
            } catch (error) {
                console.error('Network error:', error);
                showNotification('error', '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
                document.getElementById('email-test-result').classList.remove('hidden');
                document.getElementById('email-test-result').className = 'p-4 rounded-lg bg-red-500/10 border border-red-500/30';
                document.getElementById('email-test-result').innerHTML = `
                    <div class="text-red-400 font-medium">‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏</div>
                    <div class="text-sm text-gray-300 mt-1">${error.message}</div>
                `;
            } finally {
                testButton.innerHTML = originalText;
                testButton.disabled = false;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞ –∫—É–ª–¥–∞—É–Ω–∞
        function showCooldownTimer(seconds) {
            const testButton = document.getElementById('test-email-btn');
            const originalText = testButton.innerHTML;
            
            function updateTimer() {
                if (seconds <= 0) {
                    testButton.innerHTML = originalText;
                    testButton.disabled = false;
                    return;
                }
                
                testButton.innerHTML = `<i class="fas fa-clock mr-2"></i>–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${seconds}—Å`;
                testButton.disabled = true;
                seconds--;
                setTimeout(updateTimer, 1000);
            }
            
            updateTimer();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
        document.addEventListener('DOMContentLoaded', () => {
            initSettingsCategories();
            initTooltips();
            initEmailTemplates();
            initEmailTesting();

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –≤ —Ä–∞–∑–¥–µ–ª–µ —à–∞–±–ª–æ–Ω–æ–≤
            const previewBtn = document.getElementById('preview-template-btn');
            const testEmailBtn = document.getElementById('test-email-btn');
            
            if (previewBtn) {
                previewBtn.addEventListener('click', previewTemplate);
            }
            
            if (testEmailBtn) {
                testEmailBtn.addEventListener('click', testEmailWithTemplate);
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            const firstTab = document.querySelector('.settings-category-tab[data-category="general"]');
            if (firstTab) {
                firstTab.click();
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            loadAllSettings();
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è email
        async function initEmailTesting() {
            // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ —Ä–µ–∂–∏–º–æ–≤
            const userModeBtn = document.getElementById('user-mode-btn');
            const emailModeBtn = document.getElementById('email-mode-btn');
            const userContainer = document.getElementById('user-selector-container');
            const emailContainer = document.getElementById('email-input-container');
            
            if (userModeBtn && emailModeBtn) {
                userModeBtn.addEventListener('click', () => {
                    switchToUserMode(userModeBtn, emailModeBtn, userContainer, emailContainer);
                });
                
                emailModeBtn.addEventListener('click', () => {
                    switchToEmailMode(userModeBtn, emailModeBtn, userContainer, emailContainer);
                });
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            await loadUsersForEmailTesting();
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function switchToUserMode(userBtn, emailBtn, userContainer, emailContainer) {
            userBtn.className = userBtn.className.replace('text-gray-300 hover:bg-minecraft-gold/10', 'bg-minecraft-gold text-black font-medium');
            emailBtn.className = emailBtn.className.replace('bg-minecraft-gold text-black font-medium', 'text-gray-300 hover:bg-minecraft-gold/10');
            
            userContainer.classList.remove('hidden');
            emailContainer.classList.add('hidden');
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º –≤–≤–æ–¥–∞ email
        function switchToEmailMode(userBtn, emailBtn, userContainer, emailContainer) {
            emailBtn.className = emailBtn.className.replace('text-gray-300 hover:bg-minecraft-gold/10', 'bg-minecraft-gold text-black font-medium');
            userBtn.className = userBtn.className.replace('bg-minecraft-gold text-black font-medium', 'text-gray-300 hover:bg-minecraft-gold/10');
            
            emailContainer.classList.remove('hidden');
            userContainer.classList.add('hidden');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è email
        async function loadUsersForEmailTesting() {
            const userSelect = document.getElementById('test-email-user');
            if (!userSelect) return;
            
            try {
                const response = await fetch('/api/admin/users-for-email', {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('auth_token')}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    
                    // –û—á–∏—â–∞–µ–º –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫
                    userSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...</option>';
                    
                    data.users.forEach(user => {
                        const option = document.createElement('option');
                        option.value = user.id;
                        option.textContent = user.displayName;
                        option.dataset.email = user.email;
                        option.dataset.nickname = user.nickname;
                        option.dataset.role = user.role;
                        userSelect.appendChild(option);
                    });
                    
                    console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${data.users.length} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è email`);
                } else {
                    userSelect.innerHTML = '<option value="">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</option>';
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', response.status);
                }
            } catch (error) {
                userSelect.innerHTML = '<option value="">‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</option>';
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞
        async function loadAllSettings() {
            try {
                const response = await fetch('/api/admin/settings', {
                    headers: {
                        'Authorization': `Bearer ${localStorage.getItem('auth_token')}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        populateSettingsForm(data.settings);
                        console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${data.totalSettings} –Ω–∞—Å—Ç—Ä–æ–µ–∫`);
                    }
                } else {
                    console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:', response.status);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
            }
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–∞–Ω–Ω—ã–º–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
        function populateSettingsForm(settings) {
            // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            setElementValue('server-name', settings.serverName);
            setElementValue('server-description', settings.serverDescription);
            setElementValue('server-ip', settings.serverIp);
            setElementValue('server-port', settings.serverPort);
            setElementValue('max-players', settings.maxPlayers);
            setElementValue('discord-invite', settings.discordInvite);
            setElementValue('telegram-invite', settings.telegramInvite);

            // –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            setElementChecked('maintenance-mode', settings.maintenanceMode);
            setElementChecked('registration-enabled', settings.registrationEnabled);
            setElementChecked('auto-backup-enabled', settings.autoBackupEnabled);

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
            setElementChecked('applications-enabled', settings.applicationsEnabled);
            setElementValue('min-motivation-length', settings.minMotivationLength);
            setElementValue('min-plans-length', settings.minPlansLength);
            setElementValue('max-applications-per-day', settings.maxApplicationsPerDay);
            setElementValue('auto-approve-trust-level', settings.autoApproveTrustLevel);

            // Trust Level —Å–∏—Å—Ç–µ–º–∞
            setElementValue('trust-points-email', settings.trustPointsEmail);
            setElementValue('trust-points-discord', settings.trustPointsDiscord);
            setElementValue('trust-points-hour', settings.trustPointsHour);
            setElementValue('trust-points-reputation', settings.trustPointsReputation);
            setElementValue('trust-minimum-hours', settings.trustMinimumHours);
            setElementValue('trust-minimum-reputation', settings.trustMinimumReputation);
            setElementValue('trust-level-1-required', settings.trustLevel1Required);
            setElementValue('trust-level-2-required', settings.trustLevel2Required);
            setElementValue('trust-level-3-required', settings.trustLevel3Required);

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
            setElementValue('max-login-attempts', settings.maxLoginAttempts);
            setElementValue('login-lockout-duration', settings.loginLockoutDuration);
            setElementValue('jwt-expires-days', settings.jwtExpiresDays);
            setElementValue('require-email-verification', settings.requireEmailVerification);
            setElementChecked('two-factor-enabled', settings.twoFactorEnabled);
            setElementValue('rate-limit-requests', settings.rateLimitRequests);

            // Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            setElementValue('smtp-host', settings.smtpHost);
            setElementValue('smtp-port', settings.smtpPort);
            setElementValue('smtp-from', settings.smtpFrom);
            setElementValue('smtp-user', settings.smtpUser);
            setElementValue('smtp-password', settings.smtpPassword);
            setElementChecked('smtp-tls', settings.smtpTls);
            setElementValue('smtp-sender-name', settings.smtpSenderName);
            setElementValue('smtp-reply-to', settings.smtpReplyTo);
            setElementChecked('email-notifications-enabled', settings.emailNotificationsEnabled);
            setElementValue('smtp-timeout', settings.smtpTimeout);
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π
        function setElementValue(id, value) {
            const element = document.getElementById(id);
            if (element && value !== undefined && value !== null) {
                element.value = value;
            }
        }

        function setElementChecked(id, value) {
            const element = document.getElementById(id);
            if (element && typeof value === 'boolean') {
                element.checked = value;
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function saveAllSettings() {
            const token = localStorage.getItem('auth_token');
            const saveBtn = document.getElementById('save-settings-btn');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const originalText = saveBtn.innerHTML;
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
            saveBtn.disabled = true;
            
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–æ—Ä–º—ã
                const settingsData = {
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    serverName: document.getElementById('server-name')?.value,
                    serverDescription: document.getElementById('server-description')?.value,
                    serverIp: document.getElementById('server-ip')?.value,
                    serverPort: parseInt(document.getElementById('server-port')?.value),
                    maxPlayers: parseInt(document.getElementById('max-players')?.value),
                    discordInvite: document.getElementById('discord-invite')?.value,
                    telegramInvite: document.getElementById('telegram-invite')?.value,
                    
                    // –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    maintenanceMode: document.getElementById('maintenance-mode')?.checked,
                    registrationEnabled: document.getElementById('registration-enabled')?.checked,
                    autoBackupEnabled: document.getElementById('auto-backup-enabled')?.checked,
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
                    applicationsEnabled: document.getElementById('applications-enabled')?.checked,
                    minMotivationLength: parseInt(document.getElementById('min-motivation-length')?.value),
                    minPlansLength: parseInt(document.getElementById('min-plans-length')?.value),
                    maxApplicationsPerDay: parseInt(document.getElementById('max-applications-per-day')?.value),
                    autoApproveTrustLevel: parseInt(document.getElementById('auto-approve-trust-level')?.value),
                    
                    // Trust Level –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    trustPointsEmail: parseInt(document.getElementById('trust-points-email')?.value),
                    trustPointsDiscord: parseInt(document.getElementById('trust-points-discord')?.value),
                    trustPointsHour: parseInt(document.getElementById('trust-points-hour')?.value),
                    trustPointsReputation: parseInt(document.getElementById('trust-points-reputation')?.value),
                    trustMinimumHours: parseInt(document.getElementById('trust-minimum-hours')?.value),
                    trustMinimumReputation: parseInt(document.getElementById('trust-minimum-reputation')?.value),
                    trustLevel1Required: parseInt(document.getElementById('trust-level-1-required')?.value),
                    trustLevel2Required: parseInt(document.getElementById('trust-level-2-required')?.value),
                    trustLevel3Required: parseInt(document.getElementById('trust-level-3-required')?.value),
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                    maxLoginAttempts: parseInt(document.getElementById('max-login-attempts')?.value),
                    loginLockoutDuration: parseInt(document.getElementById('login-lockout-duration')?.value),
                    jwtExpiresDays: parseInt(document.getElementById('jwt-expires-days')?.value),
                    requireEmailVerification: document.getElementById('require-email-verification')?.value === 'true',
                    twoFactorEnabled: document.getElementById('two-factor-enabled')?.checked,
                    rateLimitRequests: parseInt(document.getElementById('rate-limit-requests')?.value),
                    
                    // Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    smtpHost: document.getElementById('smtp-host')?.value,
                    smtpPort: parseInt(document.getElementById('smtp-port')?.value),
                    smtpFrom: document.getElementById('smtp-from')?.value,
                    smtpUser: document.getElementById('smtp-user')?.value,
                    smtpPassword: document.getElementById('smtp-password')?.value,
                    smtpTls: document.getElementById('smtp-tls')?.checked,
                    smtpSenderName: document.getElementById('smtp-sender-name')?.value,
                    smtpReplyTo: document.getElementById('smtp-reply-to')?.value,
                    emailNotificationsEnabled: document.getElementById('email-notifications-enabled')?.checked,
                    smtpTimeout: parseInt(document.getElementById('smtp-timeout')?.value)
                };

                const response = await fetch('/api/admin/settings', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(settingsData)
                });

                if (response.ok) {
                    const data = await response.json();
                    showNotification('success', data.message || '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
                } else {
                    const error = await response.json();
                    showNotification('error', '–û—à–∏–±–∫–∞: ' + (error.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
                }

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showNotification('error', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                saveBtn.innerHTML = originalText;
                saveBtn.disabled = false;
            }
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            const saveBtn = document.getElementById('save-settings-btn');
            if (saveBtn) {
                saveBtn.addEventListener('click', saveAllSettings);
            }
        });
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
        function initializeQuillEditor() {
            if (typeof Quill !== 'undefined') {
                const quillContainer = document.getElementById('quill-editor');
                if (quillContainer && !quillEditor) {
                    try {
                        // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π Quill —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
                        quillEditor = new Quill('#quill-editor', {
                            theme: 'snow',
                            modules: {
                                toolbar: [
                                    [{ 'header': [1, 2, 3, false] }],
                                    [{ 'font': [] }],
                                    [{ 'size': ['small', false, 'large', 'huge'] }],
                                    ['bold', 'italic', 'underline', 'strike'],
                                    [{ 'color': [] }, { 'background': [] }],
                                    [{ 'script': 'sub'}, { 'script': 'super' }],
                                    [{ 'list': 'ordered'}, { 'list': 'bullet' }, { 'list': 'check' }],
                                    [{ 'indent': '-1'}, { 'indent': '+1' }],
                                    [{ 'direction': 'rtl' }],
                                    [{ 'align': [] }],
                                    ['link', 'image', 'video', 'formula'],
                                    ['blockquote', 'code-block'],
                                    ['clean']
                                ]
                            },
                            placeholder: '–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø–∏—Å—å–º–∞...',
                            formats: [
                                'header', 'font', 'size',
                                'bold', 'italic', 'underline', 'strike',
                                'color', 'background',
                                'script',
                                'list', 'bullet', 'check',
                                'indent',
                                'direction', 'align',
                                'link', 'image', 'video', 'formula',
                                'blockquote', 'code-block'
                            ]
                        });
                        
                        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã –¥–ª—è Quill
                        const quillDiv = document.querySelector('#quill-editor .ql-editor');
                        if (quillDiv) {
                            quillDiv.style.backgroundColor = '#1a1a1a';
                            quillDiv.style.color = '#e5e5e5';
                            quillDiv.style.border = '1px solid #444';
                        }
                        
                        // –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ç—É–ª–±–∞—Ä–∞
                        const toolbar = document.querySelector('#quill-editor .ql-toolbar');
                        if (toolbar) {
                            toolbar.style.backgroundColor = '#2a2a2a';
                            toolbar.style.border = '1px solid #444';
                            toolbar.style.borderBottom = 'none';
                        }
                        
                        // –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è dropdown
                        const colorPickers = document.querySelectorAll('.ql-color .ql-picker-options, .ql-background .ql-picker-options');
                        colorPickers.forEach(picker => {
                            picker.style.backgroundColor = '#2a2a2a';
                            picker.style.border = '1px solid #444';
                        });
                        
                        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å HTML —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
                        if (quillEditor && quillEditor.on) {
                            quillEditor.on('text-change', function() {
                                if (isVisualMode) {
                                    const templateHtmlEl = document.getElementById('template-html');
                                    if (templateHtmlEl) {
                                        templateHtmlEl.value = quillEditor.root.innerHTML;
                                    }
                                }
                            });
                        }
                        
                        console.log('Quill —Ä–µ–¥–∞–∫—Ç–æ—Ä —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                    } catch (error) {
                        console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Quill —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:', error);
                        quillEditor = null;
                    }
                }
            } else {
                console.warn('Quill.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
        }
                
        function switchToVisualMode() {
            isVisualMode = true;
            document.getElementById('visual-mode-btn').className = document.getElementById('visual-mode-btn').className.replace('text-gray-300', 'bg-minecraft-gold text-black');
            document.getElementById('html-mode-btn').className = document.getElementById('html-mode-btn').className.replace('bg-minecraft-gold text-black', 'text-gray-300');
            
            document.getElementById('visual-editor-container').classList.remove('hidden');
            document.getElementById('html-editor-container').classList.add('hidden');
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å HTML —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
            if (quillEditor) {
                const htmlContent = document.getElementById('template-html').value;
                quillEditor.root.innerHTML = htmlContent;
            }
        }
        
        function switchToHtmlMode() {
            isVisualMode = false;
            document.getElementById('html-mode-btn').className = document.getElementById('html-mode-btn').className.replace('text-gray-300', 'bg-minecraft-gold text-black');
            document.getElementById('visual-mode-btn').className = document.getElementById('visual-mode-btn').className.replace('bg-minecraft-gold text-black', 'text-gray-300');
            
            document.getElementById('html-editor-container').classList.remove('hidden');
            document.getElementById('visual-editor-container').classList.add('hidden');
            
            // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
            if (quillEditor) {
                document.getElementById('template-html').value = quillEditor.root.innerHTML;
            }
        }
        
        function insertVariable(variable) {
            const variableText = `{{${variable}}}`;
            
            if (isVisualMode && quillEditor) {
                const range = quillEditor.getSelection();
                if (range) {
                    quillEditor.insertText(range.index, variableText);
                } else {
                    quillEditor.insertText(quillEditor.getLength(), variableText);
                }
            } else {
                const htmlTextarea = document.getElementById('template-html');
                const cursorPos = htmlTextarea.selectionStart;
                const textBefore = htmlTextarea.value.substring(0, cursorPos);
                const textAfter = htmlTextarea.value.substring(cursorPos);
                htmlTextarea.value = textBefore + variableText + textAfter;
                htmlTextarea.selectionStart = htmlTextarea.selectionEnd = cursorPos + variableText.length;
                htmlTextarea.focus();
            }
        }
        
        function insertQuickBlock(blockType) {
            let blockHtml = '';
            
            switch(blockType) {
                case 'header':
                    blockHtml = `
                        <div style="background: #f8b500; color: white; padding: 20px; text-align: center; margin-bottom: 20px;">
                            <h1 style="margin: 0; font-size: 24px;">{{serverName}}</h1>
                        </div>
                    `;
                    break;
                case 'button':
                    blockHtml = `
                        <div style="text-align: center; margin: 20px 0;">
                            <a href="#" style="display: inline-block; background: #f8b500; color: white; padding: 12px 24px; text-decoration: none; border-radius: 5px; font-weight: bold;">–ö–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è</a>
                        </div>
                    `;
                    break;
                case 'separator':
                    blockHtml = `
                        <hr style="border: none; border-top: 2px solid #f8b500; margin: 30px 0;">
                    `;
                    break;
                case 'footer':
                    blockHtml = `
                        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; text-align: center; color: #666; font-size: 12px;">
                            <p>–° —É–≤–∞–∂–µ–Ω–∏–µ–º, –∫–æ–º–∞–Ω–¥–∞ {{serverName}}</p>
                            <p>–≠—Ç–æ –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ –æ—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ –Ω–µ–≥–æ.</p>
                        </div>
                    `;
                    break;
                case 'social':
                    blockHtml = `
                        <div style="text-align: center; margin: 20px 0;">
                            <a href="{{discordInvite}}" style="margin: 0 10px; color: #5865F2; text-decoration: none;">Discord</a>
                            <a href="{{telegramInvite}}" style="margin: 0 10px; color: #0088cc; text-decoration: none;">Telegram</a>
                        </div>
                    `;
                    break;
            }
            
            if (isVisualMode && quillEditor) {
                const range = quillEditor.getSelection() || { index: quillEditor.getLength() };
                quillEditor.clipboard.dangerouslyPasteHTML(range.index, blockHtml);
            } else {
                const htmlTextarea = document.getElementById('template-html');
                const cursorPos = htmlTextarea.selectionStart;
                const textBefore = htmlTextarea.value.substring(0, cursorPos);
                const textAfter = htmlTextarea.value.substring(cursorPos);
                htmlTextarea.value = textBefore + blockHtml + textAfter;
                htmlTextarea.selectionStart = htmlTextarea.selectionEnd = cursorPos + blockHtml.length;
                htmlTextarea.focus();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –ø–∞—Ä–æ–ª—è
        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const icon = document.getElementById(inputId + '-eye');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }

        // –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –±–ª–æ–∫–æ–≤
        document.addEventListener('DOMContentLoaded', () => {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å data-variable
            document.addEventListener('click', (event) => {
                const variableElement = event.target.closest('[data-variable]');
                if (variableElement) {
                    const variable = variableElement.getAttribute('data-variable');
                    if (variable) {
                        insertVariable(variable);
                    }
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å data-quick-block
            document.addEventListener('click', (event) => {
                const blockElement = event.target.closest('[data-quick-block]');
                if (blockElement) {
                    const blockType = blockElement.getAttribute('data-quick-block');
                    if (blockType) {
                        insertQuickBlock(blockType);
                    }
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            document.addEventListener('click', (event) => {
                const removeButton = event.target.closest('[data-action="remove-notification"]');
                if (removeButton) {
                    removeButton.parentElement.parentElement.remove();
                }
            });
        });
    </script>
</body>
</html>
