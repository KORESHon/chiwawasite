<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - Chiwawa Server</title>
    <meta name="description" content="–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º Chiwawa">
    <meta name="author" content="ebluffy">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmJiZjI0Ii8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZjU5ZTBiIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTIiIGZpbGw9InVybCgjYSkiLz48dGV4dCB4PSIzMiIgeT0iNDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIzMiIgZmlsbD0iIzFmMjkzNyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+QlTwvdGV4dD48L3N2Zz4=">
    
    <!-- –°–æ–∑–¥–∞—Ç–µ–ª—å: ebluffy -->
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?v=2"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'minecraft-dark': '#0a0a0a',
                        'minecraft-darker': '#050505',
                        'minecraft-gold': '#FFAA00',
                        'minecraft-yellow': '#FFFF55',
                        'minecraft-gray': '#2a2a2a',
                        'minecraft-light-gray': '#404040',
                        'minecraft-lighter-gray': '#555555'
                    },
                    fontFamily: {
                        'minecraft': ['Courier New', 'monospace']
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate'
                    },
                    keyframes: {
                        glow: {
                            '0%': { boxShadow: '0 0 5px #FFAA00' },
                            '100%': { boxShadow: '0 0 20px #FFAA00, 0 0 30px #FFAA00' }
                        }
                    },
                    backdropBlur: {
                        'xs': '2px',
                    }
                }
            }
        }
    </script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            scrollbar-width: thin;
            scrollbar-color: #FFAA00 #1a1a1a;
        }
        
        *::-webkit-scrollbar {
            width: 8px;
        }
        
        *::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        *::-webkit-scrollbar-thumb {
            background: #FFAA00;
            border-radius: 4px;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .minecraft-bg {
            background-image: 
                radial-gradient(circle at 25% 25%, #2a2a2a 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, #404040 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
        }
        
        .glass-effect {
            background: rgba(42, 42, 42, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 170, 0, 0.1);
        }
        
        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        
        .btn-minecraft {
            background: linear-gradient(135deg, #FFAA00 0%, #FF8800 100%);
            border: 2px solid #FFAA00;
            color: #000;
            font-weight: bold;
            text-shadow: none;
            transition: all 0.3s ease;
        }
        
        .btn-minecraft:hover {
            background: linear-gradient(135deg, #FFFF55 0%, #FFAA00 100%);
            border-color: #FFFF55;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 170, 0, 0.4);
        }
        
        .nav-item:hover {
            color: #FFAA00 !important;
            transition: all 0.3s ease;
        }
        
        .admin-badge {
            background: linear-gradient(45deg, #ff0000, #ff6600);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        .admin-tab.active {
            border-bottom-color: #FFAA00 !important;
            color: #FFAA00 !important;
        }
        
        .admin-tab:hover {
            color: #FFAA00 !important;
        }
        
        .stat-card {
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 170, 0, 0.2);
        }
    </style>
</head>
<body class="minecraft-bg min-h-screen overflow-x-hidden relative">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="glass-effect sticky top-0 z-50 border-b border-minecraft-gold/30">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ -->
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-minecraft-yellow text-shadow flex items-center">
                        <i class="fas fa-crown text-minecraft-gold mr-2"></i>
                        Admin Panel
                    </span>
                </div>
                
                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å - –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ -->
                <div class="flex items-center space-x-6">
                    <a href="/" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="/rules" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–ü—Ä–∞–≤–∏–ª–∞</a>
                    <a href="/forum" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–§–æ—Ä—É–º</a>
                    <a href="/online" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–û–Ω–ª–∞–π–Ω</a>
                    <a href="/map" target="_blank" class="nav-item text-white hover:text-minecraft-gold transition-colors text-shadow">–ö–∞—Ä—Ç–∞</a>
                </div>
                
                <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—å -->
                <div class="flex items-center space-x-4">
                    <!-- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ -->
                    <div class="flex items-center space-x-2">
                        <a href="https://discord.gg/chiwawa" target="_blank" id="discord-link" class="text-gray-400 hover:text-purple-400 transition-colors text-lg" title="Discord">
                            <i class="fab fa-discord"></i>
                        </a>
                        <a href="https://t.me/chiwawa" target="_blank" id="telegram-link" class="text-gray-400 hover:text-blue-400 transition-colors text-lg" title="Telegram">
                            <i class="fab fa-telegram"></i>
                        </a>
                    </div>
                    
                    <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
                    <div class="h-6 w-px bg-minecraft-gold/30"></div>
                    
                    <!-- –ü—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
                    <div class="relative">
                        <button id="profile-dropdown-btn" class="nav-item bg-gradient-to-r from-minecraft-gold to-yellow-500 text-minecraft-dark px-4 py-2 rounded-lg font-bold hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-minecraft-gold/50 cursor-pointer flex items-center space-x-2">
                            <div class="w-8 h-8 bg-minecraft-dark rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-minecraft-gold text-sm"></i>
                            </div>
                            <span id="admin-nickname" class="font-medium">ebluffy</span>
                            <span class="ml-2 px-2 py-1 bg-red-500/80 text-white text-xs font-bold rounded-full border border-red-500/40">
                                <i class="fas fa-crown mr-1"></i>ADMIN
                            </span>
                            <i class="fas fa-chevron-down text-xs ml-1"></i>
                        </button>
                        
                        <!-- Dropdown –º–µ–Ω—é -->
                        <div id="profileDropdown" class="absolute top-full right-0 mt-2 w-48 bg-minecraft-gray rounded-lg shadow-xl border border-minecraft-gold/30 hidden z-50">
                            <a href="/profile" class="block px-4 py-3 text-white hover:bg-minecraft-light-gray transition-colors border-b border-minecraft-gold/20">
                                <i class="fas fa-user-circle mr-2 text-minecraft-gold"></i>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
                            </a>
                            <a href="/admin" class="block px-4 py-3 text-minecraft-gold hover:bg-minecraft-light-gray transition-colors border-b border-minecraft-gold/20">
                                <i class="fas fa-crown mr-2 text-minecraft-gold"></i>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
                            </a>
                            <button id="logout-dropdown-btn" class="w-full text-left px-4 py-3 text-red-400 hover:bg-minecraft-light-gray transition-colors">
                                <i class="fas fa-sign-out-alt mr-2"></i>–í—ã–π—Ç–∏
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ -->
    <div id="access-denied" class="hidden">
        <div class="max-w-md mx-auto mt-20">
            <div class="glass-effect rounded-xl shadow-lg p-8 text-center">
                <i class="fas fa-lock text-red-400 text-4xl mb-4"></i>
                <h2 class="text-2xl font-bold text-white mb-4">–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω</h2>
                <p class="text-gray-300 mb-6">–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
                <a href="/profile" class="btn-minecraft px-6 py-3 rounded-lg inline-block">
                    –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å
                </a>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ -->
    <div id="admin-content" class="hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-white">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
                <p class="text-gray-300 mt-2">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="glass-effect rounded-xl shadow-lg p-6 stat-card">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-minecraft-gold/20 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-users text-minecraft-gold text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-white" id="total-users">0</div>
                            <div class="text-sm text-gray-300">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                        </div>
                    </div>
                </div>
                <div class="glass-effect rounded-xl shadow-lg p-6 stat-card">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-file-alt text-green-400 text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-white" id="pending-apps">0</div>
                            <div class="text-sm text-gray-300">–ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</div>
                        </div>
                    </div>
                </div>
                <div class="glass-effect rounded-xl shadow-lg p-6 stat-card">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-clock text-yellow-400 text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-white" id="active-sessions">0</div>
                            <div class="text-sm text-gray-300">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π</div>
                        </div>
                    </div>
                </div>
                <div class="glass-effect rounded-xl shadow-lg p-6 stat-card">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center mr-4">
                            <i class="fas fa-ban text-red-400 text-xl"></i>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-white" id="banned-users">0</div>
                            <div class="text-sm text-gray-300">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º -->
            <div class="glass-effect rounded-xl shadow-lg mb-8">
                <div class="border-b border-minecraft-gold/20">
                    <nav class="flex space-x-8 px-6">
                        <button class="admin-tab active py-4 px-2 border-b-2 border-minecraft-gold text-minecraft-gold font-medium" data-tab="applications">
                            <i class="fas fa-file-alt mr-2"></i>–ó–∞—è–≤–∫–∏
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="users">
                            <i class="fas fa-users mr-2"></i>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="trust-levels">
                            <i class="fas fa-medal mr-2"></i>Trust Level
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="settings">
                            <i class="fas fa-cog mr-2"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="technical">
                            <i class="fas fa-server mr-2"></i>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ
                        </button>
                        <button class="admin-tab py-4 px-2 border-b-2 border-transparent text-gray-300 hover:text-minecraft-gold" data-tab="logs">
                            <i class="fas fa-list mr-2"></i>–õ–æ–≥–∏
                        </button>
                    </nav>
                </div>

                <div class="p-6">
                    <!-- –ó–∞—è–≤–∫–∏ -->
                    <div id="tab-applications" class="admin-tab-content">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-white">–ó–∞—è–≤–∫–∏ –Ω–∞ whitelist</h3>
                            <select id="app-status-filter" class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white">
                                <option value="all">–í—Å–µ –∑–∞—è–≤–∫–∏</option>
                                <option value="pending">–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</option>
                                <option value="approved">–û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ</option>
                                <option value="rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</option>
                            </select>
                        </div>
                        <div id="applications-list" class="space-y-4">
                            <div class="text-center py-8">
                                <i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i>
                                <p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p>
                            </div>
                        </div>
                    </div>

                    <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
                    <div id="tab-users" class="admin-tab-content hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-white">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
                            <div class="flex space-x-3">
                                <input type="text" id="user-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..."
                                    autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                    class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white placeholder-gray-400 focus:border-minecraft-gold focus:outline-none">
                                <select id="user-status-filter" class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    <option value="all">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                                    <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                                    <option value="banned">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</option>
                                </select>
                            </div>
                        </div>
                        <div id="users-list" class="space-y-4">
                            <div class="text-center py-8">
                                <i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i>
                                <p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Trust Level —Å–∏—Å—Ç–µ–º–∞ -->
                    <div id="tab-trust-levels" class="admin-tab-content hidden">
                        <h3 class="text-lg font-semibold text-white mb-6">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π Trust Level</h3>
                        
                        <div class="grid md:grid-cols-2 gap-8 mb-8">
                            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-info-circle mr-2 text-minecraft-gold"></i>–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –¥–æ–≤–µ—Ä–∏—è
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü (–£—Ä–æ–≤–µ–Ω—å 0):</span>
                                        <span class="text-white">–õ–∏–º–∏—Ç 10 —á–∞—Å–æ–≤ –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—á—Ç—ã</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">üë§ –ù–æ–≤–∏—á–æ–∫ (–£—Ä–æ–≤–µ–Ω—å 1):</span>
                                        <span class="text-white">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—á—Ç—ã</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π (–£—Ä–æ–≤–µ–Ω—å 2):</span>
                                        <span class="text-white">25 —á–∞—Å–æ–≤ + –ø–æ—á—Ç–∞ + 10+ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ + –∑–∞—è–≤–∫–∞</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">üèÜ –í–µ—Ç–µ—Ä–∞–Ω (–£—Ä–æ–≤–µ–Ω—å 3):</span>
                                        <span class="text-white">50 —á–∞—Å–æ–≤ + –ø–æ—á—Ç–∞ + 20+ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ + –∑–∞—è–≤–∫–∞</span>
                                    </div>
                                </div>
                            </div>

                            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-chart-bar mr-2 text-minecraft-gold"></i>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º
                                </h4>
                                <div id="trust-level-stats" class="space-y-3 text-sm">
                                    <div class="text-center py-4">
                                        <i class="fas fa-spinner fa-spin text-minecraft-gold"></i>
                                        <p class="text-gray-300 mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª–∞ -->
                        <div class="glass-effect rounded-lg p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h4 class="font-medium text-white">
                                    <i class="fas fa-arrow-up mr-2 text-minecraft-gold"></i>–ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
                                </h4>
                                <select id="trust-app-status-filter" class="px-4 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white">
                                    <option value="all">–í—Å–µ –∑–∞—è–≤–∫–∏</option>
                                    <option value="pending">–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</option>
                                    <option value="approved">–û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ</option>
                                    <option value="rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</option>
                                </select>
                            </div>
                            <div id="trust-applications-list" class="space-y-4">
                                <div class="text-center py-8">
                                    <i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i>
                                    <p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ -->
                    <div id="tab-settings" class="admin-tab-content hidden">
                        <h3 class="text-lg font-semibold text-white mb-6">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞</h3>
                        
                        <div class="grid md:grid-cols-2 gap-8">
                            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-globe mr-2 text-minecraft-gold"></i>–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                                </h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞</label>
                                        <input type="text" id="server-name" value="Test" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                        <textarea rows="3" id="server-description" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none resize-none">–ü—Ä–∏–≤–∞—Ç–Ω—ã–π Minecraft —Å–µ—Ä–≤–µ—Ä —Å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º</textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">IP —Å–µ—Ä–≤–µ—Ä–∞</label>
                                        <input type="text" id="server-ip" value="play.chiwawa.site" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–ü–æ—Ä—Ç</label>
                                        <input type="number" id="server-port" value="25565" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">
                                            <i class="fab fa-discord mr-1 text-purple-400"></i>Discord –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
                                        </label>
                                        <input type="text" id="discord-invite" value="https://discord.gg/chiwawa" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">
                                            <i class="fab fa-telegram mr-1 text-blue-400"></i>Telegram –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
                                        </label>
                                        <input type="text" id="telegram-invite" value="https://t.me/chiwawa" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                </div>
                            </div>

                            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫ -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-file-alt mr-2 text-minecraft-gold"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
                                </h4>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-300">–ü—Ä–∏–µ–º –∑–∞—è–≤–æ–∫</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="applications-enabled" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:glass-effect after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-minecraft-gold"></div>
                                        </label>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–ú–∏–Ω. —Å–∏–º–≤–æ–ª–æ–≤ –≤ –º–æ—Ç–∏–≤–∞—Ü–∏–∏</label>
                                        <input type="number" id="min-motivation-length" value="50" min="10" max="500" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–ú–∏–Ω. —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–ª–∞–Ω–∞—Ö</label>
                                        <input type="number" id="min-plans-length" value="30" min="10" max="300" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–õ–∏–º–∏—Ç –∑–∞—è–≤–æ–∫ —Å IP –≤ –¥–µ–Ω—å</label>
                                        <input type="number" id="max-applications-per-day" value="3" min="1" max="20" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ Trust Level</label>
                                        <select id="auto-approve-trust-level" autocomplete="off" class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                            <option value="0">–û—Ç–∫–ª—é—á–µ–Ω–æ</option>
                                            <option value="1">Trust Level 1+</option>
                                            <option value="2">Trust Level 2+</option>
                                            <option value="3">Trust Level 3+</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Trust Level -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-medal mr-2 text-minecraft-gold"></i>Trust Level —Å–∏—Å—Ç–µ–º–∞
                                </h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–û—á–∫–∏ –∑–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email</label>
                                        <input type="number" id="trust-points-email" value="10" min="0" max="100" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–û—á–∫–∏ –∑–∞ Discord —Å–≤—è–∑–∫—É</label>
                                        <input type="number" id="trust-points-discord" value="15" min="0" max="100" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–û—á–∫–∏ –∑–∞ —á–∞—Å –∏–≥—Ä—ã</label>
                                        <input type="number" id="trust-points-hour" value="1" min="0" max="10" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–û—á–∫–∏ –¥–ª—è Trust Level 1</label>
                                        <input type="number" id="trust-level-1-required" value="25" min="1" max="1000" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–û—á–∫–∏ –¥–ª—è Trust Level 2</label>
                                        <input type="number" id="trust-level-2-required" value="100" min="1" max="1000" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–û—á–∫–∏ –¥–ª—è Trust Level 3</label>
                                        <input type="number" id="trust-level-3-required" value="500" min="1" max="1000" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                </div>
                            </div>

                            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-shield-alt mr-2 text-minecraft-gold"></i>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
                                </h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞</label>
                                        <input type="number" id="max-login-attempts" value="5" min="3" max="20" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–º–∏–Ω—É—Ç—ã)</label>
                                        <input type="number" id="login-lockout-duration" value="15" min="5" max="1440" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ JWT (–¥–Ω–∏)</label>
                                        <input type="number" id="jwt-expires-days" value="7" min="1" max="365" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">–¢—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email</label>
                                        <select id="require-email-verification" autocomplete="off" class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                            <option value="true">–î–∞</option>
                                            <option value="false">–ù–µ—Ç</option>
                                        </select>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-300">–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="two-factor-enabled" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:glass-effect after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-minecraft-gold"></div>
                                        </label>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Rate Limiting (–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É)</label>
                                        <input type="number" id="rate-limit-requests" value="100" min="10" max="1000" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                </div>
                            </div>

                            <!-- Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-envelope mr-2 text-minecraft-gold"></i>Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                                </h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">SMTP —Å–µ—Ä–≤–µ—Ä</label>
                                        <input type="text" id="smtp-host" placeholder="smtp.gmail.com" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">SMTP –ø–æ—Ä—Ç</label>
                                        <input type="number" id="smtp-port" value="587" min="25" max="65535" autocomplete="off"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è</label>
                                        <input type="email" id="smtp-from" placeholder="noreply@chiwawa.site" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">SMTP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</label>
                                        <input type="text" id="smtp-user" placeholder="username" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-300 mb-2">SMTP –ø–∞—Ä–æ–ª—å</label>
                                        <input type="password" id="smtp-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password"
                                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-300">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="smtp-tls" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:glass-effect after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-minecraft-gold"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-8 flex justify-center space-x-4">
                            <button id="test-settings-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-vial mr-2"></i>
                                –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                            <button id="reset-settings-btn" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                                <i class="fas fa-undo mr-2"></i>
                                –°–±—Ä–æ—Å–∏—Ç—å –∫ —É–º–æ–ª—á–∞–Ω–∏—é
                            </button>
                            <button id="save-settings-btn" class="btn-minecraft px-8 py-3 rounded-lg font-medium">
                                <i class="fas fa-save mr-2"></i>
                                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                        </div>
                    </div>

                    <!-- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ -->
                    <div id="tab-technical" class="admin-tab-content hidden">
                        <h3 class="text-lg font-semibold text-white mb-6">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        
                        <div class="grid md:grid-cols-2 gap-8">
                            <!-- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-database mr-2"></i>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–•–æ—Å—Ç:</span>
                                        <span class="font-mono text-white">localhost/212.15.49.139</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</span>
                                        <span class="font-mono text-white">chiwawa</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:</span>
                                        <span class="font-mono text-white">chiwawa</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–°—Ç–∞—Ç—É—Å:</span>
                                        <span class="text-green-400 font-medium">–ü–æ–¥–∫–ª—é—á–µ–Ω–∞</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–¢–∞–±–ª–∏—Ü:</span>
                                        <span class="font-medium text-white">15</span>
                                    </div>
                                </div>
                            </div>

                            <!-- –°–µ—Ä–≤–µ—Ä -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-server mr-2"></i>–°–µ—Ä–≤–µ—Ä
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Node.js –≤–µ—Ä—Å–∏—è:</span>
                                        <span class="font-mono text-white" id="node-version">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:</span>
                                        <span class="font-mono text-white" id="uptime">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–∞–º—è—Ç—å (RSS):</span>
                                        <span class="font-mono text-white" id="memory-rss">Loading...</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–∞–º—è—Ç—å (Heap):</span>
                                        <span class="font-mono text-white" id="memory-heap">Loading...</span>
                                    </div>
                                </div>
                            </div>

                            <!-- API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-chart-line mr-2"></i>API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤:</span>
                                        <span class="font-medium text-white">1,234</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–°–µ–≥–æ–¥–Ω—è:</span>
                                        <span class="font-medium text-white">156</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–û—à–∏–±–∫–∏ 5xx:</span>
                                        <span class="font-medium text-red-400">3</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–û—à–∏–±–∫–∏ 4xx:</span>
                                        <span class="font-medium text-yellow-400">27</span>
                                    </div>
                                </div>
                            </div>

                            <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è -->
                            <div class="glass-effect rounded-lg p-6">
                                <h4 class="font-medium text-white mb-4">
                                    <i class="fas fa-cogs mr-2"></i>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
                                </h4>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–ü–æ—Ä—Ç:</span>
                                        <span class="font-mono text-white">3001</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">–†–µ–∂–∏–º:</span>
                                        <span class="font-mono text-white">production</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">CORS:</span>
                                        <span class="text-green-400">–í–∫–ª—é—á–µ–Ω</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-300">Rate Limiting:</span>
                                        <span class="text-green-400">–ê–∫—Ç–∏–≤–µ–Ω</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã -->
                        <div class="mt-8">
                            <h4 class="font-medium text-white mb-4">
                                <i class="fas fa-tools mr-2"></i>–°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
                            </h4>
                            <div class="grid md:grid-cols-3 gap-4">
                                <button id="test-email-btn" 
                                    class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center space-x-2">
                                    <i class="fas fa-envelope"></i>
                                    <span>–¢–µ—Å—Ç –ø–æ—á—Ç—ã</span>
                                </button>
                                <button id="test-db-btn" 
                                    class="bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center space-x-2">
                                    <i class="fas fa-database"></i>
                                    <span>–¢–µ—Å—Ç –ë–î</span>
                                </button>
                                <button id="clear-cache-btn" 
                                    class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center space-x-2">
                                    <i class="fas fa-trash-alt"></i>
                                    <span>–û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à</span>
                                </button>
                            </div>
                        </div>

                        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ -->
                        <div id="test-results" class="mt-6 hidden">
                            <div class="glass-effect rounded-lg p-4">
                                <h5 class="font-medium text-white mb-2">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞:</h5>
                                <div id="test-output" class="text-sm text-gray-300 font-mono whitespace-pre-wrap"></div>
                            </div>
                        </div>
                    </div>

                    <!-- –õ–æ–≥–∏ -->
                    <div id="tab-logs" class="admin-tab-content hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-white">–°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏</h3>
                            <div class="flex space-x-3">
                                <select id="log-action-filter" class="px-4 py-2 border border-minecraft-gold/20 rounded-lg">
                                    <option value="all">–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è</option>
                                    <option value="login">–í—Ö–æ–¥—ã</option>
                                    <option value="application_submitted">–ó–∞—è–≤–∫–∏</option>
                                    <option value="user_banned">–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏</option>
                                    <option value="application_reviewed">–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è</option>
                                </select>
                                <button id="refresh-logs" class="px-4 py-2 bg-chiwawa-primary text-white rounded-lg hover:bg-chiwawa-dark transition-colors">
                                    <i class="fas fa-refresh mr-2"></i>–û–±–Ω–æ–≤–∏—Ç—å
                                </button>
                            </div>
                        </div>
                        <div id="logs-list" class="space-y-2">
                            <div class="text-center py-8">
                                <i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i>
                                <p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
    <div id="user-details-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-effect rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">
                        <i class="fas fa-user-circle mr-2 text-minecraft-gold"></i>
                        –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                    </h3>
                    <button data-action="close-modal" data-modal="user-details-modal" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="space-y-4 mb-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400">–ù–∏–∫–Ω–µ–π–º:</label>
                                <div class="text-white font-medium text-lg" id="modal-user-nickname">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">Email:</label>
                                <div class="text-white" id="modal-user-email">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">–†–æ–ª—å:</label>
                                <div class="text-white" id="modal-user-role">-</div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400">Trust Level:</label>
                                <div class="text-white" id="modal-user-trust-level">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">–°—Ç–∞—Ç—É—Å:</label>
                                <div id="modal-user-status">-</div>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</label>
                                <div class="text-white" id="modal-user-created">-</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –ë–ª–æ–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
                <div class="mb-6">
                    <label class="text-sm text-gray-400 mb-3 block">–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Å–∞–π—Ç–µ:</label>
                    <div class="bg-minecraft-dark/30 rounded-lg border border-minecraft-gold/20 max-h-60 overflow-y-auto p-3" id="modal-user-activity">
                        <div class="text-center py-4 text-gray-400">
                            <i class="fas fa-spinner fa-spin"></i>
                            <div class="mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...</div>
                        </div>
                    </div>
                </div>
                
                <!-- –í–∫–ª–∞–¥–∫–∏ –∏ –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É -->
                <div class="border-t border-minecraft-gold/20 pt-4">
                    <!-- –í–∫–ª–∞–¥–∫–∏ "–°–∞–π—Ç" –∏ "–°–µ—Ä–≤–µ—Ä" -->
                    <div class="flex justify-center space-x-1 mb-4">
                        <button class="modal-tab active px-6 py-2 rounded-md text-white bg-minecraft-gold/20 font-medium transition-all" data-tab="website">
                            <i class="fas fa-globe mr-2"></i>–°–∞–π—Ç
                        </button>
                        <button class="modal-tab px-6 py-2 rounded-md text-gray-300 hover:text-white hover:bg-minecraft-gold/10 font-medium transition-all" data-tab="server">
                            <i class="fas fa-server mr-2"></i>–°–µ—Ä–≤–µ—Ä
                        </button>
                    </div>
                    
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
                    <div class="mb-4">
                        <!-- –í–∫–ª–∞–¥–∫–∞ "–°–∞–π—Ç" -->
                        <div id="modal-tab-website" class="modal-tab-content">
                            <div class="bg-minecraft-dark/20 rounded-lg p-4 text-center">
                                <p class="text-gray-300 text-sm">
                                    <i class="fas fa-chart-line mr-2 text-minecraft-gold"></i>
                                    –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–∞–π—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤—ã—à–µ
                                </p>
                            </div>
                        </div>
                        
                        <!-- –í–∫–ª–∞–¥–∫–∞ "–°–µ—Ä–≤–µ—Ä" -->
                        <div id="modal-tab-server" class="modal-tab-content hidden">
                            <div class="space-y-4">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="space-y-3">
                                        <div>
                                            <label class="text-sm text-gray-400">–°—Ç–∞—Ç—É—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:</label>
                                            <div class="text-green-400" id="modal-server-status">üü¢ –û–Ω–ª–∞–π–Ω</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–í—Ä–µ–º—è –∏–≥—Ä—ã:</label>
                                            <div class="text-white" id="modal-server-playtime">42—á 15–º</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞—Ö–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:</label>
                                            <div class="text-white" id="modal-server-last-seen">5 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:</label>
                                            <div class="text-white" id="modal-server-location">x: 1245, y: 64, z: -892</div>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-3">
                                        <div>
                                            <label class="text-sm text-gray-400">–£—Ä–æ–≤–µ–Ω—å:</label>
                                            <div class="text-minecraft-gold" id="modal-server-level">Level 27</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–û–ø—ã—Ç:</label>
                                            <div class="text-white" id="modal-server-exp">15,432 XP</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–°–º–µ—Ä—Ç–µ–π:</label>
                                            <div class="text-red-400" id="modal-server-deaths">23</div>
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-400">–£–±–∏–π—Å—Ç–≤ –º–æ–±–æ–≤:</label>
                                            <div class="text-white" id="modal-server-kills">1,847</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 p-3 bg-minecraft-dark/30 rounded-lg">
                                    <label class="text-sm text-gray-400 mb-2 block">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:</label>
                                    <div class="space-y-1 text-sm">
                                        <div class="flex justify-between">
                                            <span class="text-gray-300">üèóÔ∏è –ü–æ—Å—Ç—Ä–æ–∏–ª –¥–æ–º</span>
                                            <span class="text-gray-500">15 –º–∏–Ω –Ω–∞–∑–∞–¥</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-300">‚õèÔ∏è –î–æ–±—ã–ª 64 –∂–µ–ª–µ–∑–Ω–æ–π —Ä—É–¥—ã</span>
                                            <span class="text-gray-500">1—á –Ω–∞–∑–∞–¥</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-300">üíÄ –£–º–µ—Ä –æ—Ç –ª–∞–≤—ã</span>
                                            <span class="text-gray-500">2—á –Ω–∞–∑–∞–¥</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-300">üé£ –ü–æ–π–º–∞–ª —Ä—ã–±—É</span>
                                            <span class="text-gray-500">3—á –Ω–∞–∑–∞–¥</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 text-xs text-gray-500 text-center">
                                    <i class="fas fa-info-circle mr-1"></i>
                                    –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã —Å –∏–≥—Ä–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ)
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
                    <div class="flex justify-center">
                        <button data-action="close-modal" data-modal="user-details-modal" class="px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="ban-user-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-effect rounded-lg max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">
                        <i class="fas fa-ban mr-2 text-red-400"></i>
                        –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </h3>
                    <button data-action="close-modal" data-modal="ban-user-modal" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="text-sm text-gray-400">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</label>
                        <div class="text-white font-medium" id="ban-modal-user-nickname">-</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–¢–∏–ø –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:</label>
                        <select id="ban-type" autocomplete="off" class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                            <option value="temporary">–í—Ä–µ–º–µ–Ω–Ω–∞—è</option>
                            <option value="permanent">–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è</option>
                            <option value="delete">–£–î–ê–õ–ò–¢–¨ –ê–ö–ö–ê–£–ù–¢</option>
                        </select>
                    </div>
                    
                    <div id="ban-duration-container">
                        <label class="block text-sm font-medium text-gray-300 mb-2">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–Ω–∏):</label>
                        <input type="number" id="ban-duration" min="1" max="365" value="7" autocomplete="off"
                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–ü—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:</label>
                        <textarea id="ban-reason" rows="3" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏..." required
                            autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white placeholder-gray-400 focus:border-minecraft-gold focus:outline-none resize-none"></textarea>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-6">
                    <button data-action="close-modal" data-modal="ban-user-modal" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button id="confirm-ban-btn" data-action="confirm-ban-user" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors">
                        –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ -->
    <div id="change-role-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-effect rounded-lg max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-white">
                        <i class="fas fa-user-tag mr-2 text-minecraft-gold"></i>
                        –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    </h3>
                    <button data-action="close-modal" data-modal="change-role-modal" class="text-gray-400 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="text-sm text-gray-400">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</label>
                        <div class="text-white font-medium" id="role-modal-user-nickname">-</div>
                    </div>
                    
                    <div>
                        <label class="text-sm text-gray-400">–¢–µ–∫—É—â–∞—è —Ä–æ–ª—å:</label>
                        <div class="text-white" id="role-modal-current-role">-</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–ù–æ–≤–∞—è —Ä–æ–ª—å:</label>
                        <select id="role-select" autocomplete="off" class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white focus:border-minecraft-gold focus:outline-none">
                            <option value="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                            <option value="moderator">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                            <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">–ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è:</label>
                        <textarea id="role-change-reason" rows="3" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏..." 
                            autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
                            class="w-full px-3 py-2 bg-minecraft-gray border border-minecraft-gold/20 rounded-lg text-white placeholder-gray-400 focus:border-minecraft-gold focus:outline-none resize-none"></textarea>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-6">
                    <button data-action="close-modal" data-modal="change-role-modal" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button data-action="update-user-role" class="px-4 py-2 bg-minecraft-gold hover:bg-yellow-600 text-minecraft-dark rounded-lg font-medium transition-colors">
                        –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="glass-effect border-t border-minecraft-gold/30 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <p class="text-gray-400">
                    Chiwawa ¬© 2025, –°–æ–∑–¥–∞–Ω–æ —Å 
                    <span class="text-minecraft-gold">‚ù§Ô∏è</span> –æ—Ç 
                    <strong class="text-minecraft-yellow">ebluffy</strong>
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        let currentUser = null;
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏–º –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è
        function toggleProfileDropdown() {
            const profileDropdown = document.getElementById('profileDropdown');
            profileDropdown.classList.toggle('hidden');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞
        function logout() {
            localStorage.removeItem('auth_token');
            localStorage.removeItem('remember_me');
            localStorage.removeItem('token_expires');
            window.location.href = '/';
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ DOM
        function initializeEventHandlers() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
            const profileButton = document.getElementById('profile-dropdown-btn');
            if (profileButton) {
                profileButton.addEventListener('click', toggleProfileDropdown);
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞ –≤ dropdown
            const logoutButton = document.getElementById('logout-dropdown-btn');
            if (logoutButton) {
                logoutButton.addEventListener('click', logout);
            }
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', function(event) {
                const profileDropdown = document.getElementById('profileDropdown');
                const profileButton = document.getElementById('profile-dropdown-btn');
                
                if (profileButton && !profileButton.contains(event.target) && !profileDropdown.contains(event.target)) {
                    profileDropdown.classList.add('hidden');
                }
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
                if (event.target.classList.contains('fixed') && event.target.classList.contains('bg-black')) {
                    const modalId = event.target.id;
                    if (modalId) {
                        closeModal(modalId);
                    }
                }
            });
            
            // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–Ω–æ–ø–æ–∫
            document.addEventListener('click', function(event) {
                const target = event.target;
                
                // –ö–Ω–æ–ø–∫–∏ –æ–¥–æ–±—Ä–µ–Ω–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫
                if (target.matches('[data-action="approve-app"]')) {
                    const appId = target.getAttribute('data-app-id');
                    reviewApplication(appId, 'approved');
                } else if (target.matches('[data-action="reject-app"]')) {
                    const appId = target.getAttribute('data-app-id');
                    reviewApplication(appId, 'rejected');
                }
                
                // –ö–Ω–æ–ø–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                else if (target.matches('[data-action="show-user-details"]')) {
                    const userId = target.getAttribute('data-user-id');
                    showUserDetails(userId);
                } else if (target.matches('[data-action="ban-user"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const nickname = target.getAttribute('data-user-nickname');
                    banUser(userId, nickname);
                } else if (target.matches('[data-action="unban-user"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const nickname = target.getAttribute('data-user-nickname');
                    unbanUser(userId, nickname);
                }
                
                // Trust Level –∑–∞—è–≤–∫–∏
                else if (target.matches('[data-action="approve-trust-app"]')) {
                    const appId = target.getAttribute('data-app-id');
                    reviewTrustApplication(appId, 'approved');
                } else if (target.matches('[data-action="reject-trust-app"]')) {
                    const appId = target.getAttribute('data-app-id');
                    reviewTrustApplication(appId, 'rejected');
                }
                
                // –ö–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–æ–≤
                else if (target.matches('[data-action="close-modal"]') || target.closest('[data-action="close-modal"]')) {
                    const closeButton = target.matches('[data-action="close-modal"]') ? target : target.closest('[data-action="close-modal"]');
                    const modalId = closeButton.getAttribute('data-modal');
                    closeModal(modalId);
                }
                
                // –ö–Ω–æ–ø–∫–∏ –≤ –º–æ–¥–∞–ª–∞—Ö
                else if (target.matches('[data-action="update-user-role"]')) {
                    updateUserRole();
                } else if (target.matches('[data-action="confirm-ban-user"]')) {
                    confirmBanUser();
                }
                
                // –í–∫–ª–∞–¥–∫–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                else if (target.matches('.modal-tab')) {
                    const tabName = target.getAttribute('data-tab');
                    switchModalTab(tabName);
                }
            });
            
            // –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è select —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            document.addEventListener('change', function(event) {
                const target = event.target;
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
                if (target.id === 'ban-type') {
                    const durationContainer = document.getElementById('ban-duration-container');
                    const confirmBtn = document.getElementById('confirm-ban-btn');
                    
                    if (target.value === 'permanent' || target.value === 'delete') {
                        durationContainer.style.display = 'none';
                    } else {
                        durationContainer.style.display = 'block';
                    }
                    
                    // –ò–∑–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
                    if (target.value === 'delete') {
                        confirmBtn.textContent = '–£–î–ê–õ–ò–¢–¨ –ê–ö–ö–ê–£–ù–¢';
                        confirmBtn.className = 'px-4 py-2 bg-red-800 hover:bg-red-900 text-white rounded-lg font-medium transition-colors';
                    } else {
                        confirmBtn.textContent = '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å';
                        confirmBtn.className = 'px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors';
                    }
                }
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫
                if (target.matches('[data-action="change-user-role"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const nickname = target.getAttribute('data-user-nickname');
                    const newRole = target.value;
                    changeUserRoleSelect(userId, nickname, newRole);
                }
                
                if (target.matches('[data-action="change-trust-level"]')) {
                    const userId = target.getAttribute('data-user-id');
                    const newLevel = target.value;
                    changeTrustLevel(userId, newLevel);
                }
            });
        }
        
        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞
        let serverSettings = {
            name: 'Test',
            description: '–ü—Ä–∏–≤–∞—Ç–Ω—ã–π Minecraft —Å–µ—Ä–≤–µ—Ä —Å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º',
            ip: 'play.chiwawa.site',
            port: '25565',
            discordInvite: 'https://discord.gg/chiwawa',
            telegramInvite: 'https://t.me/chiwawa'
        };

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞
        async function loadServerSettings() {
            try {
                const response = await fetch('/api/settings/public');
                if (response.ok) {
                    const settings = await response.json();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    serverSettings.name = settings.serverName || serverSettings.name;
                    serverSettings.description = settings.serverDescription || serverSettings.description;
                    serverSettings.ip = settings.serverIp || serverSettings.ip;
                    serverSettings.port = settings.serverPort || serverSettings.port;
                    serverSettings.discordInvite = settings.discordInvite || serverSettings.discordInvite;
                    serverSettings.telegramInvite = settings.telegramInvite || serverSettings.telegramInvite;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    updateServerElements();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞:', error);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function updateServerElements() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            const serverNameNav = document.getElementById('server-name');
            if (serverNameNav) {
                serverNameNav.textContent = serverSettings.name;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.title = `–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - ${serverSettings.name}`;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', async () => {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            initializeEventHandlers();
            
            const token = localStorage.getItem('auth_token');
            if (!token) {
                window.location.href = '/profile';
                return;
            }

            try {
                const response = await fetch('/api/auth/verify', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const userData = await response.json();
                    currentUser = userData.user;
                    console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏:', userData.user);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∏–∫–Ω–µ–π–º–∞ –∞–¥–º–∏–Ω–∞
                    const adminNickname = document.getElementById('admin-nickname');
                    if (adminNickname && userData.user) {
                        adminNickname.textContent = userData.user.nickname || userData.user.email || 'Admin';
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                    if (currentUser.role !== 'admin' && currentUser.role !== 'moderator') {
                        console.log('–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω. –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', currentUser.role);
                        document.getElementById('access-denied').classList.remove('hidden');
                        return;
                    }
                    
                    document.getElementById('admin-content').classList.remove('hidden');
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    await loadServerSettings();
                    await loadDashboard();
                } else {
                    window.location.href = '/profile';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞:', error);
                window.location.href = '/profile';
            }
        });

        // –í—ã—Ö–æ–¥
        document.addEventListener('DOMContentLoaded', () => {
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.admin-tab').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.dataset.tab;
                    
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                    document.querySelectorAll('.admin-tab').forEach(b => {
                        b.classList.remove('active', 'border-minecraft-gold', 'text-minecraft-gold');
                        b.classList.add('border-transparent', 'text-gray-300');
                    });
                    document.querySelectorAll('.admin-tab-content').forEach(c => c.classList.add('hidden'));
                    
                    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é –≤–∫–ª–∞–¥–∫—É
                    btn.classList.remove('border-transparent', 'text-gray-300');
                    btn.classList.add('active', 'border-minecraft-gold', 'text-minecraft-gold');
                    document.getElementById(`tab-${tabId}`).classList.remove('hidden');
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
                    switch(tabId) {
                        case 'applications':
                            loadApplications();
                            break;
                        case 'users':
                            loadUsers();
                            break;
                        case 'trust-levels':
                            loadTrustLevels();
                            break;
                        case 'settings':
                            loadSettings();
                            break;
                        case 'technical':
                            loadTechnicalInfo();
                            break;
                        case 'logs':
                            loadLogs();
                            break;
                    }
                });
            });

            // –§–∏–ª—å—Ç—Ä—ã
            document.getElementById('app-status-filter')?.addEventListener('change', loadApplications);
            document.getElementById('user-status-filter')?.addEventListener('change', loadUsers);
            document.getElementById('user-search')?.addEventListener('input', debounce(loadUsers, 500));
            document.getElementById('trust-app-status-filter')?.addEventListener('change', loadTrustApplications);
            document.getElementById('log-action-filter')?.addEventListener('change', loadLogs);
            document.getElementById('refresh-logs')?.addEventListener('click', loadLogs);

            // –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
            document.getElementById('test-email-btn')?.addEventListener('click', testEmail);
            document.getElementById('test-db-btn')?.addEventListener('click', testDatabase);
            document.getElementById('clear-cache-btn')?.addEventListener('click', clearCache);
            
            // –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.getElementById('save-settings-btn')?.addEventListener('click', saveSettings);
            
            // –ö–Ω–æ–ø–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.getElementById('test-settings-btn')?.addEventListener('click', testSettings);
            
            // –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.getElementById('reset-settings-btn')?.addEventListener('click', resetSettings);
        });

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è debounce –¥–ª—è –ø–æ–∏—Å–∫–∞
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
        function switchModalTab(tabName) {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.modal-tab').forEach(tab => {
                tab.classList.remove('active', 'bg-minecraft-gold/20', 'text-white');
                tab.classList.add('text-gray-300');
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º—ã–µ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.modal-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeTab) {
                activeTab.classList.add('active', 'bg-minecraft-gold/20', 'text-white');
                activeTab.classList.remove('text-gray-300');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
            const activeContent = document.getElementById(`modal-tab-${tabName}`);
            if (activeContent) {
                activeContent.classList.remove('hidden');
            }
            
            // –ï—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°–µ—Ä–≤–µ—Ä", –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
            if (tabName === 'server') {
                generateServerData();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–°–µ—Ä–≤–µ—Ä"
        function generateServerData() {
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ, –Ω–æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            const onlineChance = Math.random() > 0.3; // 70% —à–∞–Ω—Å —á—Ç–æ –æ–Ω–ª–∞–π–Ω
            const playtimeHours = Math.floor(Math.random() * 200) + 5; // 5-205 —á–∞—Å–æ–≤
            const playtimeMinutes = Math.floor(Math.random() * 60);
            const level = Math.floor(Math.random() * 50) + 1; // 1-50 —É—Ä–æ–≤–µ–Ω—å
            const exp = Math.floor(Math.random() * 50000) + 1000; // 1000-51000 –æ–ø—ã—Ç–∞
            const deaths = Math.floor(Math.random() * 100); // 0-100 —Å–º–µ—Ä—Ç–µ–π
            const kills = Math.floor(Math.random() * 5000) + 100; // 100-5100 —É–±–∏–π—Å—Ç–≤
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
            const x = Math.floor(Math.random() * 4000) - 2000; // -2000 –¥–æ 2000
            const y = Math.floor(Math.random() * 100) + 5; // 5-105
            const z = Math.floor(Math.random() * 4000) - 2000; // -2000 –¥–æ 2000
            
            // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞—Ö–æ–¥–∞
            const lastSeenMinutes = onlineChance ? 0 : Math.floor(Math.random() * 10080); // 0-7 –¥–Ω–µ–π –≤ –º–∏–Ω—É—Ç–∞—Ö
            const lastSeenText = onlineChance ? '–°–µ–π—á–∞—Å –æ–Ω–ª–∞–π–Ω' : getTimeAgoText(lastSeenMinutes);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
            document.getElementById('modal-server-status').innerHTML = onlineChance 
                ? 'üü¢ <span class="text-green-400">–û–Ω–ª–∞–π–Ω</span>' 
                : 'üî¥ <span class="text-red-400">–û—Ñ—Ñ–ª–∞–π–Ω</span>';
            document.getElementById('modal-server-playtime').textContent = `${playtimeHours}—á ${playtimeMinutes}–º`;
            document.getElementById('modal-server-last-seen').textContent = lastSeenText;
            document.getElementById('modal-server-location').textContent = `x: ${x}, y: ${y}, z: ${z}`;
            document.getElementById('modal-server-level').textContent = `Level ${level}`;
            document.getElementById('modal-server-exp').textContent = `${exp.toLocaleString()} XP`;
            document.getElementById('modal-server-deaths').textContent = deaths;
            document.getElementById('modal-server-kills').textContent = kills.toLocaleString();
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        function getTimeAgoText(minutes) {
            if (minutes < 60) return `${minutes} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            if (minutes < 1440) return `${Math.floor(minutes / 60)}—á –Ω–∞–∑–∞–¥`;
            return `${Math.floor(minutes / 1440)}–¥ –Ω–∞–∑–∞–¥`;
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        let currentUserId = null;

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        async function showUserDetails(userId) {
            currentUserId = userId;
            
            // –°–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π
            openModal('user-details-modal');
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
            document.getElementById('modal-user-nickname').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-email').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-role').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-trust-level').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-status').innerHTML = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-created').textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';
            document.getElementById('modal-user-activity').innerHTML = '<div class="text-center py-4 text-gray-400"><i class="fas fa-spinner fa-spin"></i><div class="mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...</div></div>';
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∫–ª–∞–¥–∫—É "–°–∞–π—Ç" –∫–∞–∫ –∞–∫—Ç–∏–≤–Ω—É—é
            switchModalTab('website');
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/details`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }

                const user = await response.json();
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–∞–Ω–Ω—ã–º–∏
                document.getElementById('modal-user-nickname').textContent = user.nickname || '-';
                document.getElementById('modal-user-email').textContent = user.email || '-';
                document.getElementById('modal-user-role').textContent = getRoleText(user.role);
                document.getElementById('modal-user-trust-level').textContent = `–£—Ä–æ–≤–µ–Ω—å ${user.trust_level || 0}`;
                
                const statusElement = document.getElementById('modal-user-status');
                if (user.is_banned) {
                    statusElement.innerHTML = '<span class="text-red-400">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</span>';
                } else {
                    statusElement.innerHTML = '<span class="text-green-400">–ê–∫—Ç–∏–≤–µ–Ω</span>';
                }
                
                document.getElementById('modal-user-created').textContent = formatDate(user.registered_at);
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                loadUserActivity(userId);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                document.getElementById('modal-user-nickname').textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
                document.getElementById('modal-user-email').textContent = '-';
                document.getElementById('modal-user-role').textContent = '-';
                document.getElementById('modal-user-trust-level').textContent = '-';
                document.getElementById('modal-user-status').innerHTML = '<span class="text-red-400">–û—à–∏–±–∫–∞</span>';
                document.getElementById('modal-user-created').textContent = '-';
                document.getElementById('modal-user-activity').innerHTML = '<div class="text-red-400 text-sm">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loadUserActivity(userId) {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/activity`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                const activityContainer = document.getElementById('modal-user-activity');
                
                if (!response.ok) {
                    activityContainer.innerHTML = '<div class="text-red-400 text-sm">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>';
                    return;
                }

                const activityData = await response.json();
                
                // –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å–µ—Å—Å–∏–∏ –∏ –ª–æ–≥–∏ –≤—Ö–æ–¥–æ–≤ –≤ –æ–¥–∏–Ω –º–∞—Å—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                const sessions = activityData.sessions || [];
                const loginLogs = activityData.loginLogs || [];
                
                const activities = [
                    ...sessions.map(session => ({
                        action: 'session',
                        created_at: session.created_at,
                        ip_address: session.ip_address,
                        details: `–°–µ—Å—Å–∏—è ${session.is_active ? '–∞–∫—Ç–∏–≤–Ω–∞' : '–∑–∞–≤–µ—Ä—à–µ–Ω–∞'}`
                    })),
                    ...loginLogs.map(log => ({
                        action: 'login',
                        created_at: log.login_time,
                        ip_address: log.ip_address,
                        details: log.success ? '–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥' : '–ù–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞'
                    }))
                ].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
                
                if (activities.length === 0) {
                    activityContainer.innerHTML = '<div class="text-gray-400 text-sm">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>';
                    return;
                }

                const activityHtml = activities.slice(0, 10).map(activity => `
                    <div class="flex justify-between items-center py-3 px-3 rounded-lg bg-minecraft-dark/20 border border-minecraft-gold/10 mb-2">
                        <div class="flex items-center space-x-3">
                            <div class="flex-shrink-0">
                                <i class="fas fa-circle text-xs ${getActivityColor(activity.action)}"></i>
                            </div>
                            <div>
                                <span class="text-sm text-white font-medium">${getActivityText(activity.action)}</span>
                                ${activity.details ? `<div class="text-xs text-gray-400 mt-1">${activity.details}</div>` : ''}
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-xs text-gray-400">${formatDate(activity.created_at)}</span>
                            ${activity.ip_address ? `<div class="text-xs text-gray-500 font-mono">${activity.ip_address}</div>` : ''}
                        </div>
                    </div>
                `).join('');
                
                activityContainer.innerHTML = activityHtml;
            } catch (error) {
                document.getElementById('modal-user-activity').innerHTML = 
                    '<div class="text-red-400 text-sm">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function changeUserRole(userId, nickname) {
            currentUserId = userId;
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/details`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }

                const user = await response.json();
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                document.getElementById('role-modal-user-nickname').textContent = nickname;
                document.getElementById('role-modal-current-role').textContent = getRoleText(user.role);
                document.getElementById('role-select').value = user.role;
                document.getElementById('role-change-reason').value = '';
                
                openModal('change-role-modal');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—É—Å–∫–æ—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        async function banUser(userId, nickname) {
            // –°–Ω–∞—á–∞–ª–∞ —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            openModal('ban-user-modal');
            
            const modal = document.getElementById('ban-user-modal');
            const nicknameElement = modal.querySelector('#ban-modal-user-nickname');
            const confirmBtn = modal.querySelector('#confirm-ban-btn');
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            nicknameElement.textContent = nickname;
            confirmBtn.setAttribute('data-user-id', userId);
            
            // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
            const banTypeSelect = modal.querySelector('#ban-type');
            const reasonTextarea = modal.querySelector('#ban-reason');
            const durationInput = modal.querySelector('#ban-duration');
            
            banTypeSelect.value = 'temporary';
            reasonTextarea.value = '';
            durationInput.value = '7';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            modal.querySelector('#ban-duration-container').style.display = 'block';
            
            // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø–æ–ª–µ –ø—Ä–∏—á–∏–Ω—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
            setTimeout(() => {
                reasonTextarea.focus();
            }, 100);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
        async function confirmBanUser() {
            const modal = document.getElementById('ban-user-modal');
            const banType = modal.querySelector('#ban-type').value;
            const reason = modal.querySelector('#ban-reason').value.trim();
            const confirmBtn = modal.querySelector('#confirm-ban-btn');
            const userId = confirmBtn.getAttribute('data-user-id');
            
            if (!reason) {
                showMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏', 'error');
                return;
            }
            
            if (!userId) {
                showMessage('–û—à–∏–±–∫–∞: –Ω–µ —É–∫–∞–∑–∞–Ω ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', 'error');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const originalText = confirmBtn.innerHTML;
            confirmBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–û–±—Ä–∞–±–æ—Ç–∫–∞...';
            confirmBtn.disabled = true;
            
            try {
                const token = localStorage.getItem('auth_token');
                let requestData = { reason, type: banType };
                let endpoint = `/api/admin/users/${userId}/ban`;
                let method = 'PUT';
                
                // –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥—Ä—É–≥–æ–π endpoint
                if (banType === 'delete') {
                    endpoint = `/api/admin/users/${userId}/delete`;
                    method = 'DELETE';
                    requestData = { reason }; // –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏—á–∏–Ω—É
                }
                // –î–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                else if (banType === 'temporary') {
                    const duration = parseInt(modal.querySelector('#ban-duration').value);
                    requestData.duration = duration;
                    requestData.unit = 'days';
                }
                
                const response = await fetch(endpoint, {
                    method: method,
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(requestData)
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error || '–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏');
                }

                const result = await response.json();
                showMessage(result.message || '–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'success');
                closeModal('ban-user-modal');
                await loadUsers(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                await loadDashboard(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏:', error);
                showMessage('–û—à–∏–±–∫–∞: ' + error.message, 'error');
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                confirmBtn.innerHTML = originalText;
                confirmBtn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function unbanUser(userId, nickname) {
            if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${nickname}?`)) {
                return;
            }
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/unban`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                }

                alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω');
                await loadUsers(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getRoleText(role) {
            switch (role) {
                case 'admin': return '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä';
                case 'moderator': return '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä';
                case 'user': return '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                default: return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            }
        }

        function getActivityColor(action) {
            switch (action) {
                case 'login': return 'text-green-400';
                case 'logout': return 'text-gray-400';
                case 'application_submitted': return 'text-blue-400';
                case 'application_approved': return 'text-green-400';
                case 'application_rejected': return 'text-red-400';
                case 'user_banned': return 'text-red-400';
                case 'user_unbanned': return 'text-green-400';
                case 'role_changed': return 'text-yellow-400';
                case 'trust_level_changed': return 'text-minecraft-gold';
                case 'password_changed': return 'text-purple-400';
                case 'email_verified': return 'text-cyan-400';
                case 'profile_updated': return 'text-blue-300';
                default: return 'text-gray-400';
            }
        }

        function getActivityText(action) {
            switch (action) {
                case 'login': return '–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É';
                case 'logout': return '–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã';
                case 'application_submitted': return '–ü–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏';
                case 'application_approved': return '–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞';
                case 'application_rejected': return '–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞';
                case 'user_banned': return '–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞';
                case 'user_unbanned': return '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞';
                case 'role_changed': return '–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏';
                case 'trust_level_changed': return '–ò–∑–º–µ–Ω–µ–Ω–∏–µ Trust Level';
                case 'password_changed': return '–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è';
                case 'email_verified': return '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email';
                case 'profile_updated': return '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è';
                default: return action.replace(/_/g, ' ');
            }
        }

        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleString('ru-RU');
        }

        async function loadDashboard() {
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch('/api/admin/stats', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    document.getElementById('total-users').textContent = data.users.total_users || 0;
                    document.getElementById('pending-apps').textContent = data.applications.pending || 0;
                    document.getElementById('active-sessions').textContent = data.sessions.active_sessions || 0;
                    document.getElementById('banned-users').textContent = data.users.banned_users || 0;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞—è–≤–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ –∑–∞—è–≤–æ–∫
            const activeTab = document.querySelector('.admin-tab.active');
            if (activeTab && activeTab.dataset.tab === 'applications') {
                loadApplications();
            }
        }

        async function loadApplications() {
            const token = localStorage.getItem('auth_token');
            const status = document.getElementById('app-status-filter').value;
            const appsList = document.getElementById('applications-list');
            
            appsList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i><p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p></div>';
            
            try {
                const url = `/api/applications?status=${status}&limit=20`;
                const response = await fetch(url, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.applications && data.applications.length > 0) {
                        appsList.innerHTML = data.applications.map(app => `
                            <div class="glass-effect border border-gray-200 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 class="font-semibold text-white">${app.minecraft_nick}</h4>
                                        <p class="text-sm text-gray-300">${app.email} ‚Ä¢ ${app.discord}</p>
                                        <p class="text-xs text-gray-500">${new Date(app.submitted_at).toLocaleString('ru-RU')}</p>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 text-xs font-medium rounded ${getStatusBadge(app.status)}">${getStatusText(app.status)}</span>
                                        ${app.status === 'pending' ? `
                                            <button data-action="approve-app" data-app-id="${app.id}" class="px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600">
                                                –û–¥–æ–±—Ä–∏—Ç—å
                                            </button>
                                            <button data-action="reject-app" data-app-id="${app.id}" class="px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600">
                                                –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                                            </button>
                                        ` : ''}
                                    </div>
                                </div>
                                <div class="grid md:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> ${app.age}<br>
                                        <strong>–û–ø—ã—Ç:</strong> ${app.experience}
                                    </div>
                                    <div>
                                        ${app.reviewed_by_nickname ? `<strong>–†–∞—Å—Å–º–æ—Ç—Ä–µ–ª:</strong> ${app.reviewed_by_nickname}<br>` : ''}
                                        ${app.reviewed_at ? `<strong>–î–∞—Ç–∞:</strong> ${new Date(app.reviewed_at).toLocaleString('ru-RU')}` : ''}
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <details class="text-sm">
                                        <summary class="cursor-pointer text-chiwawa-primary font-medium">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∑–∞—è–≤–∫–∏</summary>
                                        <div class="mt-2 space-y-2 text-gray-300">
                                            <div><strong>–ú–æ—Ç–∏–≤–∞—Ü–∏—è:</strong> ${app.motivation}</div>
                                            <div><strong>–ü–ª–∞–Ω—ã:</strong> ${app.plans}</div>
                                            ${app.review_comment ? `<div><strong>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</strong> ${app.review_comment}</div>` : ''}
                                        </div>
                                    </details>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        appsList.innerHTML = '<div class="text-center py-8 text-gray-500">–ó–∞—è–≤–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    }
                } else {
                    appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫</div>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫:', error);
                appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
        }

        async function loadUsers() {
            const token = localStorage.getItem('auth_token');
            const status = document.getElementById('user-status-filter').value;
            const search = document.getElementById('user-search').value;
            const usersList = document.getElementById('users-list');
            
            usersList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i><p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</p></div>';
            
            try {
                const params = new URLSearchParams({ status, search, limit: 50 });
                const response = await fetch(`/api/admin/users?${params}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.users && data.users.length > 0) {
                        usersList.innerHTML = data.users.map(user => `
                            <div class="glass-effect border border-gray-200 rounded-lg p-6">
                                <div class="flex justify-between items-center">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-chiwawa-light rounded-full flex items-center justify-center mr-4">
                                            <i class="fas fa-user text-chiwawa-primary"></i>
                                        </div>
                                        <div>
                                            <h4 class="font-semibold text-white">${user.nickname}</h4>
                                            <p class="text-sm text-gray-300">${user.email}</p>
                                            <p class="text-xs text-gray-500">Trust Level ${user.trust_level} ‚Ä¢ ${Math.floor((user.total_minutes || 0) / 60)} —á–∞—Å–æ–≤</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 text-xs font-medium rounded ${user.is_banned ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600'}">
                                            ${user.is_banned ? '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω' : '–ê–∫—Ç–∏–≤–µ–Ω'}
                                        </span>
                                        <span class="px-2 py-1 text-xs font-medium rounded bg-minecraft-gold/20 text-minecraft-gold">
                                            ${user.role === 'admin' ? '–ê–¥–º–∏–Ω' : user.role === 'moderator' ? '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä' : '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}
                                        </span>
                                        <div class="flex space-x-1">
                                            <button data-action="show-user-details" data-user-id="${user.id}" class="px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600" title="–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
                                                <i class="fas fa-info-circle"></i>
                                            </button>
                                            <select data-action="change-user-role" data-user-id="${user.id}" data-user-nickname="${user.nickname}" class="px-2 py-1 text-xs bg-minecraft-gray border border-minecraft-gold/20 rounded text-white" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å">
                                                <option value="user" ${user.role === 'user' ? 'selected' : ''}>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                                                <option value="moderator" ${user.role === 'moderator' ? 'selected' : ''}>üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                                                <option value="admin" ${user.role === 'admin' ? 'selected' : ''}>üëë –ê–¥–º–∏–Ω</option>
                                            </select>
                                            ${!user.is_banned ? `
                                                <button data-action="ban-user" data-user-id="${user.id}" data-user-nickname="${user.nickname}" class="px-2 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600" title="–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å">
                                                    <i class="fas fa-ban"></i>
                                                </button>
                                            ` : `
                                                <button data-action="unban-user" data-user-id="${user.id}" data-user-nickname="${user.nickname}" class="px-2 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600" title="–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å">
                                                    <i class="fas fa-check"></i>
                                                </button>
                                            `}
                                            <select data-action="change-trust-level" data-user-id="${user.id}" class="px-2 py-1 text-xs bg-minecraft-gray border border-minecraft-gold/20 rounded text-white" title="–ò–∑–º–µ–Ω–∏—Ç—å Trust Level">
                                                ${[0,1,2,3].map(level => {
                                                    const levelNames = ['üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü', 'üë§ –ù–æ–≤–∏—á–æ–∫', '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π', 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'];
                                                    return `<option value="${level}" ${user.trust_level == level ? 'selected' : ''}>${levelNames[level]} (${level})</option>`;
                                                }).join('')}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                ${user.ban_reason ? `<div class="mt-2 text-sm text-red-600"><strong>–ü—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:</strong> ${user.ban_reason}</div>` : ''}
                            </div>
                        `).join('');
                    } else {
                        usersList.innerHTML = '<div class="text-center py-8 text-gray-500">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
                usersList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
        }

        async function loadTechnicalInfo() {
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch('/api/admin/stats', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const serverInfo = data.server_info;
                    
                    if (serverInfo) {
                        document.getElementById('node-version').textContent = serverInfo.node_version || 'N/A';
                        document.getElementById('uptime').textContent = formatUptime(serverInfo.uptime || 0);
                        document.getElementById('memory-rss').textContent = formatBytes(serverInfo.memory_usage?.rss || 0);
                        document.getElementById('memory-heap').textContent = formatBytes(serverInfo.memory_usage?.heapUsed || 0);
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:', error);
            }
        }

        async function loadLogs() {
            const token = localStorage.getItem('auth_token');
            const action = document.getElementById('log-action-filter').value;
            const logsList = document.getElementById('logs-list');
            
            logsList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-gray-400 mb-2"></i><p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</p></div>';
            
            try {
                const params = new URLSearchParams({ action, limit: 100 });
                const response = await fetch(`/api/admin/logs?${params}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.logs && data.logs.length > 0) {
                        logsList.innerHTML = data.logs.map(log => `
                            <div class="glass-effect border-l-4 ${getLogBorderColor(log.action)} p-4">
                                <div class="flex justify-between items-start">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2">
                                            <span class="font-medium text-white">${log.action}</span>
                                            ${log.admin_nickname ? `<span class="text-sm text-gray-300">–æ—Ç ${log.admin_nickname}</span>` : ''}
                                        </div>
                                        <p class="text-sm text-gray-300 mt-1">${log.details}</p>
                                        ${log.target_user_nickname ? `<p class="text-xs text-gray-500">–¶–µ–ª—å: ${log.target_user_nickname}</p>` : ''}
                                    </div>
                                    <div class="text-xs text-gray-500">
                                        ${new Date(log.created_at).toLocaleString('ru-RU')}
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        logsList.innerHTML = '<div class="text-center py-8 text-gray-500">–õ–æ–≥–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤:', error);
                logsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
        }

        // –î–µ–π—Å—Ç–≤–∏—è —Å –∑–∞—è–≤–∫–∞–º–∏
        async function reviewApplication(id, status) {
            const reason = status === 'rejected' ? prompt('–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):') : '';
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch(`/api/applications/${id}/review`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ status, comment: reason })
                });
                
                if (response.ok) {
                    loadApplications();
                    loadDashboard();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        // –î–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ HTML
        // –°—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è banUser —É–¥–∞–ª–µ–Ω–∞ –∏ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é
        
        async function unbanUser(id, nickname) {
            if (!confirm(`–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${nickname}?`)) return;
            
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch(`/api/admin/users/${id}/unban`, {
                    method: 'PUT',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    loadUsers();
                    loadDashboard();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        async function changeTrustLevel(id, level) {
            const levelNames = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫', 
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'
            };
            
            const levelName = levelNames[level] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
            const reason = prompt(`–ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è Trust Level –Ω–∞ "${levelName}" (${level}):`);
            
            if (!reason) return; // –û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
            
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch(`/api/admin/users/${id}/trust-level`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ level: parseInt(level), reason })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showMessage(result.message || 'Trust Level —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω', 'success');
                    loadUsers();
                    loadDashboard(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                } else {
                    const error = await response.json();
                    showMessage('–û—à–∏–±–∫–∞: ' + error.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è Trust Level:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        // –£—Ç–∏–ª–∏—Ç—ã
        function getStatusBadge(status) {
            const badges = {
                'pending': 'bg-yellow-100 text-yellow-600',
                'approved': 'bg-green-100 text-green-600',
                'rejected': 'bg-red-100 text-red-600',
                'banned': 'bg-gray-100 text-gray-300'
            };
            return badges[status] || 'bg-gray-100 text-gray-300';
        }

        function getStatusText(status) {
            const texts = {
                'pending': '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏',
                'approved': '–û–¥–æ–±—Ä–µ–Ω–∞',
                'rejected': '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞',
                'banned': '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞'
            };
            return texts[status] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        }

        function getLogBorderColor(action) {
            if (action.includes('login')) return 'border-blue-400';
            if (action.includes('ban')) return 'border-red-400';
            if (action.includes('application')) return 'border-green-400';
            if (action.includes('trust_level')) return 'border-yellow-400';
            return 'border-gray-400';
        }

        function formatUptime(seconds) {
            const days = Math.floor(seconds / 86400);
            const hours = Math.floor((seconds % 86400) / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            
            if (days > 0) return `${days}–¥ ${hours}—á`;
            if (hours > 0) return `${hours}—á ${minutes}–º`;
            return `${minutes}–º`;
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // –ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Trust Level –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
        async function loadTrustLevels() {
            const token = localStorage.getItem('auth_token');
            const statsElement = document.getElementById('trust-level-stats');
            
            if (statsElement) {
                statsElement.innerHTML = '<div class="text-center py-4"><i class="fas fa-spinner fa-spin text-minecraft-gold"></i><p class="text-gray-300 mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</p></div>';
                
                try {
                    const response = await fetch('/api/admin/trust-levels/stats', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        statsElement.innerHTML = `
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-300">üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü (0):</span>
                                    <span class="text-white font-bold">${data.level0 || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">üë§ –ù–æ–≤–∏—á–æ–∫ (1):</span>
                                    <span class="text-white font-bold">${data.level1 || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π (2):</span>
                                    <span class="text-white font-bold">${data.level2 || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-300">üèÜ –í–µ—Ç–µ—Ä–∞–Ω (3):</span>
                                    <span class="text-white font-bold">${data.level3 || 0} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                                </div>
                            </div>
                        `;
                    } else {
                        statsElement.innerHTML = '<div class="text-center py-4 text-red-400">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</div>';
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ Trust Level:', error);
                    statsElement.innerHTML = '<div class="text-center py-4 text-red-400">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
                }
            }
            
            loadTrustApplications();
        }

        async function loadTrustApplications() {
            const token = localStorage.getItem('auth_token');
            const status = document.getElementById('trust-app-status-filter')?.value || 'all';
            const appsList = document.getElementById('trust-applications-list');
            
            if (appsList) {
                appsList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i><p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p></div>';
                
                try {
                    const response = await fetch(`/api/admin/trust-applications?status=${status}`, {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        if (data.applications && data.applications.length > 0) {
                            appsList.innerHTML = data.applications.map(app => `
                                <div class="glass-effect rounded-lg p-6">
                                    <div class="flex justify-between items-start mb-4">
                                        <div>
                                            <h4 class="font-semibold text-white">${app.nickname}</h4>
                                            <p class="text-sm text-gray-300">–ó–∞—è–≤–∫–∞ –Ω–∞ ${app.requested_level} —É—Ä–æ–≤–µ–Ω—å</p>
                                            <p class="text-xs text-gray-500">${new Date(app.submitted_at).toLocaleString('ru-RU')}</p>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <span class="px-2 py-1 text-xs font-medium rounded ${getStatusBadge(app.status)}">${getStatusText(app.status)}</span>
                                        </div>
                                    </div>
                                    <div class="text-sm text-gray-300">
                                        <p><strong>–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:</strong> ${app.reason}</p>
                                    </div>
                                </div>
                            `).join('');
                        } else {
                            appsList.innerHTML = '<div class="text-center py-8 text-gray-500">–ó–∞—è–≤–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                        }
                    } else {
                        appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫</div>';
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫ Trust Level:', error);
                    appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
                }
            }
        }

        function showTestResult(type, message) {
            const resultDiv = document.getElementById('test-results');
            const outputDiv = document.getElementById('test-output');
            
            if (resultDiv && outputDiv) {
                resultDiv.classList.remove('hidden');
                outputDiv.textContent = message;
                outputDiv.className = `text-sm font-mono whitespace-pre-wrap ${
                    type === 'success' ? 'text-green-400' : 'text-red-400'
                }`;
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        async function testEmail() {
            const btn = document.getElementById('test-email-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>–¢–µ—Å—Ç–∏—Ä—É—é...</span>';
            btn.disabled = true;
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch('/api/admin/test-email', {
                    method: 'POST',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        testEmail: 'dima2_05@mail.ru' // –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞ –¥–ª—è —ç—Ç–æ–≥–æ
                    })
                });
                
                const result = await response.json();
                showTestResult(response.ok ? 'success' : 'error', result.message || result.error);
            } catch (error) {
                showTestResult('error', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + error.message);
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function testDatabase() {
            const btn = document.getElementById('test-db-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>–¢–µ—Å—Ç–∏—Ä—É—é...</span>';
            btn.disabled = true;
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch('/api/admin/test-database', {
                    method: 'GET',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                const result = await response.json();
                showTestResult(response.ok ? 'success' : 'error', result.message || result.error);
            } catch (error) {
                showTestResult('error', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + error.message);
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        async function clearCache() {
            const btn = document.getElementById('clear-cache-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>–û—á–∏—â–∞—é...</span>';
            btn.disabled = true;
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch('/api/admin/clear-cache', {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                const result = await response.json();
                showTestResult(response.ok ? 'success' : 'error', result.message || result.error);
            } catch (error) {
                showTestResult('error', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + error.message);
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        function showTestResult(type, message) {
            const resultsDiv = document.getElementById('test-results');
            const outputDiv = document.getElementById('test-output');
            
            resultsDiv.classList.remove('hidden');
            outputDiv.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            outputDiv.className = `text-sm font-mono whitespace-pre-wrap ${
                type === 'success' ? 'text-green-600' : 'text-red-600'
            }`;
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('save-settings-btn')?.addEventListener('click', async () => {
                const btn = document.getElementById('save-settings-btn');
                const originalText = btn.innerHTML;
                
                btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–°–æ—Ö—Ä–∞–Ω—è—é...';
                btn.disabled = true;
                
                try {
                    // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–æ—Ä–º—ã
                    const settings = {
                        server: {
                            name: document.getElementById('server-name')?.value,
                            description: document.getElementById('server-description')?.value,
                            ip: document.getElementById('server-ip')?.value,
                            port: document.getElementById('server-port')?.value,
                            discord: document.getElementById('discord-invite')?.value,
                            telegram: document.getElementById('telegram-invite')?.value
                        },
                        applications: {
                            minMotivationLength: parseInt(document.getElementById('min-motivation-length')?.value) || 50,
                            minPlansLength: parseInt(document.getElementById('min-plans-length')?.value) || 30,
                            maxApplicationsPerDay: parseInt(document.getElementById('max-applications-per-day')?.value) || 3,
                        }
                    };
                    
                    const token = localStorage.getItem('auth_token');
                    const response = await fetch('/api/admin/settings', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({ settings })
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok) {
                        showMessage('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
                    } else {
                        showMessage('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + (result.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
                    }
                } catch (error) {
                    showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ' + error.message, 'error');
                } finally {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }
            });
        });

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(text, type) {
            const message = document.createElement('div');
            message.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 ${
                type === 'success' ? 
                'bg-green-900/90 text-green-300 border border-green-500/50' : 
                'bg-red-900/90 text-red-300 border border-red-500/50'
            }`;
            message.textContent = text;
            
            document.body.appendChild(message);
            
            setTimeout(() => {
                message.style.opacity = '0';
                message.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(message);
                }, 300);
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª–∞–º–∏
        async function loadTrustLevels() {
            await loadTrustLevelStats();
            await loadTrustApplications();
        }

        async function loadTrustLevelStats() {
            const token = localStorage.getItem('auth_token');
            const statsDiv = document.getElementById('trust-level-stats');
            
            try {
                const response = await fetch('/api/admin/stats', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const trustLevels = data.trust_levels || [];
                    
                    // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —É—Ä–æ–≤–Ω—è–º
                    const levelCounts = { 0: 0, 1: 0, 2: 0, 3: 0 };
                    trustLevels.forEach(level => {
                        levelCounts[level.trust_level] = level.user_count;
                    });
                    
                    statsDiv.innerHTML = `
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-300">üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º—Ü—ã:</span>
                                <span class="text-white font-medium">${levelCounts[0]} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-300">üë§ –ù–æ–≤–∏—á–∫–∏:</span>
                                <span class="text-white font-medium">${levelCounts[1]} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-300">‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ:</span>
                                <span class="text-white font-medium">${levelCounts[2]} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-300">üèÜ –í–µ—Ç–µ—Ä–∞–Ω—ã:</span>
                                <span class="text-white font-medium">${levelCounts[3]} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                            </div>
                            ${data.trust_applications ? `
                                <hr class="border-minecraft-gold/20 my-3">
                                <div class="flex justify-between">
                                    <span class="text-gray-300">üìù –ó–∞—è–≤–∫–∏ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏:</span>
                                    <span class="text-minecraft-gold font-medium">${data.trust_applications.pending || 0}</span>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª–æ–≤:', error);
                statsDiv.innerHTML = '<div class="text-red-500 text-center">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</div>';
            }
        }

        async function loadTrustApplications() {
            const token = localStorage.getItem('auth_token');
            const status = document.getElementById('trust-app-status-filter').value;
            const appsList = document.getElementById('trust-applications-list');
            
            appsList.innerHTML = '<div class="text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-minecraft-gold mb-2"></i><p class="text-gray-300">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p></div>';
            
            try {
                const params = new URLSearchParams({ status, limit: 20 });
                const response = await fetch(`/api/trust-level/applications?${params}`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.applications && data.applications.length > 0) {
                        appsList.innerHTML = data.applications.map(app => `
                            <div class="glass-effect border border-gray-200 rounded-lg p-6">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 class="font-semibold text-white">${app.nickname}</h4>
                                        <p class="text-sm text-gray-300">
                                            –ü–æ–≤—ã—à–µ–Ω–∏–µ —Å —É—Ä–æ–≤–Ω—è ${app.current_level} –¥–æ ${app.requested_level}
                                        </p>
                                        <p class="text-xs text-gray-500">${new Date(app.created_at).toLocaleString('ru-RU')}</p>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="px-2 py-1 text-xs font-medium rounded ${getTrustStatusBadge(app.status)}">${getTrustStatusText(app.status)}</span>
                                        ${app.status === 'pending' ? `
                                            <button data-action="approve-trust-app" data-app-id="${app.id}" class="px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600">
                                                –û–¥–æ–±—Ä–∏—Ç—å
                                            </button>
                                            <button data-action="reject-trust-app" data-app-id="${app.id}" class="px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600">
                                                –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                                            </button>
                                        ` : ''}
                                    </div>
                                </div>
                                <div class="grid md:grid-cols-3 gap-4 text-sm mb-4">
                                    <div>
                                        <strong>–í—Ä–µ–º—è –∏–≥—Ä—ã:</strong> ${Math.floor(app.hours_played || 0)} —á–∞—Å–æ–≤<br>
                                        <strong>–†–µ–ø—É—Ç–∞—Ü–∏—è:</strong> ${app.current_reputation || app.reputation_score || 0}
                                    </div>
                                    <div>
                                        <strong>–ü–æ—á—Ç–∞:</strong> ${app.email_verified ? '‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞' : '‚ùå –ù–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞'}<br>
                                        <strong>–¢—Ä–µ–±—É–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å:</strong> ${getTrustLevelName(app.requested_level)}
                                    </div>
                                    <div>
                                        ${app.reviewer_nickname ? `<strong>–†–∞—Å—Å–º–æ—Ç—Ä–µ–ª:</strong> ${app.reviewer_nickname}<br>` : ''}
                                        ${app.reviewed_at ? `<strong>–î–∞—Ç–∞:</strong> ${new Date(app.reviewed_at).toLocaleString('ru-RU')}` : ''}
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <details class="text-sm">
                                        <summary class="cursor-pointer text-minecraft-gold font-medium">–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏</summary>
                                        <div class="mt-2 text-gray-300">
                                            ${app.reason}
                                            ${app.review_comment ? `<div class="mt-2 p-3 bg-minecraft-gray rounded border-l-4 border-minecraft-gold"><strong>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</strong> ${app.review_comment}</div>` : ''}
                                        </div>
                                    </details>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        appsList.innerHTML = '<div class="text-center py-8 text-gray-500">–ó–∞—è–≤–æ–∫ –Ω–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                    }
                } else {
                    appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫</div>';
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª:', error);
                appsList.innerHTML = '<div class="text-center py-8 text-red-500">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</div>';
            }
        }

        async function reviewTrustApplication(id, status) {
            const comment = status === 'rejected' ? prompt('–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):') : prompt('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):');
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch(`/api/trust-level/applications/${id}/review`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ status, comment })
                });
                
                if (response.ok) {
                    showMessage(`–ó–∞—è–≤–∫–∞ ${status === 'approved' ? '–æ–¥–æ–±—Ä–µ–Ω–∞' : '–æ—Ç–∫–ª–æ–Ω–µ–Ω–∞'}`, 'success');
                    loadTrustApplications();
                    loadTrustLevelStats();
                    loadDashboard(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                } else {
                    const error = await response.json();
                    showMessage('–û—à–∏–±–∫–∞: ' + error.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            }
        }

        function getTrustStatusBadge(status) {
            const badges = {
                'pending': 'bg-yellow-100 text-yellow-800',
                'approved': 'bg-green-100 text-green-800',
                'rejected': 'bg-red-100 text-red-800'
            };
            return badges[status] || 'bg-gray-100 text-gray-800';
        }

        function getTrustStatusText(status) {
            const texts = {
                'pending': '–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏',
                'approved': '–û–¥–æ–±—Ä–µ–Ω–∞',
                'rejected': '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞'
            };
            return texts[status] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        }

        function getTrustLevelName(level) {
            const names = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫', 
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'
            };
            return names[level] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
        }

        function getTrustLevelDisplayName(level) {
            const names = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü (–£—Ä–æ–≤–µ–Ω—å 0)',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫ (–£—Ä–æ–≤–µ–Ω—å 1)', 
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π (–£—Ä–æ–≤–µ–Ω—å 2)',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω (–£—Ä–æ–≤–µ–Ω—å 3)'
            };
            return names[level] || `–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (${level})`;
        }

        
        // –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function saveSettings() {
            const token = localStorage.getItem('auth_token');
            const saveBtn = document.getElementById('save-settings-btn');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const originalText = saveBtn.innerHTML;
            saveBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
            saveBtn.disabled = true;
            
            try {
                // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–æ—Ä–º—ã
                const settingsData = {
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    serverName: document.getElementById('server-name').value,
                    serverDescription: document.getElementById('server-description').value,
                    serverIp: document.getElementById('server-ip').value,
                    serverPort: document.getElementById('server-port').value,
                    discordInvite: document.getElementById('discord-invite').value,
                    telegramInvite: document.getElementById('telegram-invite').value,
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
                    applicationsEnabled: document.getElementById('applications-enabled').checked,
                    minMotivationLength: parseInt(document.getElementById('min-motivation-length').value),
                    minPlansLength: parseInt(document.getElementById('min-plans-length').value),
                    maxApplicationsPerDay: parseInt(document.getElementById('max-applications-per-day').value),
                    autoApproveTrustLevel: parseInt(document.getElementById('auto-approve-trust-level').value),
                    
                    // Trust Level –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    trustPointsEmail: parseInt(document.getElementById('trust-points-email').value),
                    trustPointsDiscord: parseInt(document.getElementById('trust-points-discord').value),
                    trustPointsHour: parseInt(document.getElementById('trust-points-hour').value),
                    trustLevel1Required: parseInt(document.getElementById('trust-level-1-required').value),
                    trustLevel2Required: parseInt(document.getElementById('trust-level-2-required').value),
                    trustLevel3Required: parseInt(document.getElementById('trust-level-3-required').value),
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                    maxLoginAttempts: parseInt(document.getElementById('max-login-attempts').value),
                    loginLockoutDuration: parseInt(document.getElementById('login-lockout-duration').value),
                    jwtExpiresDays: parseInt(document.getElementById('jwt-expires-days').value),
                    requireEmailVerification: document.getElementById('require-email-verification').value === 'true',
                    twoFactorEnabled: document.getElementById('two-factor-enabled').checked,
                    rateLimitRequests: parseInt(document.getElementById('rate-limit-requests').value),
                    
                    // Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    smtpHost: document.getElementById('smtp-host').value,
                    smtpPort: parseInt(document.getElementById('smtp-port').value),
                    smtpFrom: document.getElementById('smtp-from').value,
                    smtpUser: document.getElementById('smtp-user').value,
                    smtpPassword: document.getElementById('smtp-password').value,
                    smtpTls: document.getElementById('smtp-tls').checked
                };
                
                const response = await fetch('/api/admin/settings', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(settingsData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    serverSettings.name = settingsData.serverName;
                    serverSettings.description = settingsData.serverDescription;
                    serverSettings.ip = settingsData.serverIp;
                    serverSettings.port = settingsData.serverPort;
                    serverSettings.discordInvite = settingsData.discordInvite;
                    serverSettings.telegramInvite = settingsData.telegramInvite;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                    updateServerElements();
                    
                    showMessage(result.message || '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
                } else {
                    const errorData = await response.json();
                    showMessage('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + (errorData.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            } finally {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
                saveBtn.innerHTML = originalText;
                saveBtn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function testSettings() {
            const btn = document.getElementById('test-settings-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–¢–µ—Å—Ç–∏—Ä—É—é...';
            btn.disabled = true;
            
            try {
                const token = localStorage.getItem('auth_token');
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                const emailData = {
                    host: document.getElementById('smtp-host').value,
                    port: parseInt(document.getElementById('smtp-port').value),
                    user: document.getElementById('smtp-user').value,
                    from: document.getElementById('smtp-from').value,
                    tls: document.getElementById('smtp-tls').checked
                };
                
                if (emailData.host && emailData.user && emailData.from) {
                    const emailResponse = await fetch('/api/admin/test-email-settings', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify(emailData)
                    });
                    
                    const emailResult = await emailResponse.json();
                    if (emailResponse.ok) {
                        showMessage('Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: ‚úÖ ' + emailResult.message, 'success');
                    } else {
                        showMessage('Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: ‚ùå ' + emailResult.error, 'error');
                    }
                } else {
                    showMessage('Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: ‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                }
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
                const dbResponse = await fetch('/api/admin/test-database', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                const dbResult = await dbResponse.json();
                if (dbResponse.ok) {
                    showMessage('–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: ‚úÖ ' + dbResult.message, 'success');
                } else {
                    showMessage('–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: ‚ùå ' + dbResult.error, 'error');
                }
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º Discord webhook (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
                const discordInvite = document.getElementById('discord-invite').value;
                if (discordInvite && discordInvite.includes('discord.gg/')) {
                    showMessage('Discord: ‚úÖ –°—Å—ã–ª–∫–∞-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞', 'success');
                } else if (discordInvite) {
                    showMessage('Discord: ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è', 'error');
                }
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º Telegram (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
                const telegramInvite = document.getElementById('telegram-invite').value;
                if (telegramInvite && telegramInvite.includes('t.me/')) {
                    showMessage('Telegram: ‚úÖ –°—Å—ã–ª–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞', 'success');
                } else if (telegramInvite) {
                    showMessage('Telegram: ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏', 'error');
                }
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫ —É–º–æ–ª—á–∞–Ω–∏—é
        async function resetSettings() {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?')) {
                return;
            }
            
            const btn = document.getElementById('reset-settings-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>–°–±—Ä–æ—Å...';
            btn.disabled = true;
            
            try {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                const defaultSettings = {
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    'server-name': 'Test',
                    'server-description': '–ü—Ä–∏–≤–∞—Ç–Ω—ã–π Minecraft —Å–µ—Ä–≤–µ—Ä —Å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º',
                    'server-ip': 'play.chiwawa.site',
                    'server-port': '25565',
                    'discord-invite': 'https://discord.gg/chiwawa',
                    'telegram-invite': 'https://t.me/chiwawa',
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
                    'min-motivation-length': '50',
                    'min-plans-length': '30',
                    'max-applications-per-day': '3',
                    'auto-approve-trust-level': '0',
                    
                    // Trust Level
                    'trust-points-email': '10',
                    'trust-points-discord': '15',
                    'trust-points-hour': '1',
                    'trust-level-1-required': '25',
                    'trust-level-2-required': '100',
                    'trust-level-3-required': '500',
                    
                    // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
                    'max-login-attempts': '5',
                    'login-lockout-duration': '15',
                    'jwt-expires-days': '7',
                    'rate-limit-requests': '100',
                    
                    // Email
                    'smtp-host': '',
                    'smtp-port': '587',
                    'smtp-from': '',
                    'smtp-user': '',
                    'smtp-password': ''
                };
                
                const defaultCheckboxes = {
                    'applications-enabled': true,
                    'two-factor-enabled': false,
                    'smtp-tls': true
                };
                
                const defaultSelects = {
                    'require-email-verification': 'true'
                };
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                Object.entries(defaultSettings).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = value;
                    }
                });
                
                Object.entries(defaultCheckboxes).forEach(([id, checked]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.checked = checked;
                    }
                });
                
                Object.entries(defaultSelects).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.value = value;
                    }
                });
                
                showMessage('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é', 'success');
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(text, type) {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            let messageElement = document.getElementById('global-message');
            if (!messageElement) {
                messageElement = document.createElement('div');
                messageElement.id = 'global-message';
                messageElement.className = 'fixed top-4 right-4 z-50 px-6 py-4 rounded-lg font-medium';
                document.body.appendChild(messageElement);
            }
            
            messageElement.textContent = text;
            messageElement.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg font-medium ${
                type === 'success' ? 
                'bg-green-900/90 text-green-300 border border-green-500/50' : 
                'bg-red-900/90 text-red-300 border border-red-500/50'
            }`;
            
            messageElement.style.display = 'block';
            
            setTimeout(() => {
                messageElement.style.display = 'none';
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function loadSettings() {
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch('/api/admin/settings', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const settings = data.settings || {};
                    
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
                    document.getElementById('server-name').value = settings.serverName || serverSettings.name || 'Test';
                    document.getElementById('server-description').value = settings.serverDescription || serverSettings.description || '';
                    document.getElementById('server-ip').value = settings.serverIp || serverSettings.ip || '';
                    document.getElementById('server-port').value = settings.serverPort || serverSettings.port || '25565';
                    document.getElementById('discord-invite').value = settings.discordInvite || serverSettings.discordInvite || '';
                    document.getElementById('telegram-invite').value = settings.telegramInvite || serverSettings.telegramInvite || '';
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–æ–∫
                    document.getElementById('min-motivation-length').value = settings.minMotivationLength || 50;
                    document.getElementById('min-plans-length').value = settings.minPlansLength || 30;
                    document.getElementById('max-applications-per-day').value = settings.maxApplicationsPerDay || 3;
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Trust Level
                    const trustInputs = [
                        'trust-points-email',
                        'trust-points-discord', 
                        'trust-points-hour',
                        'trust-level-1-required',
                        'trust-level-2-required',
                        'trust-level-3-required'
                    ];
                    
                    trustInputs.forEach(id => {
                        const element = document.getElementById(id);
                        if (element) {
                            const settingKey = id.replace(/-/g, '_');
                            element.value = settings[settingKey] || element.value;
                        }
                    });
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
                    const securityInputs = [
                        'max-login-attempts',
                        'login-lockout-duration',
                        'jwt-expires-days',
                        'rate-limit-requests'
                    ];
                    
                    securityInputs.forEach(id => {
                        const element = document.getElementById(id);
                        if (element) {
                            const settingKey = id.replace(/-/g, '_');
                            element.value = settings[settingKey] || element.value;
                        }
                    });
                    
                    // Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    const emailInputs = [
                        'smtp-host',
                        'smtp-port',
                        'smtp-from',
                        'smtp-user',
                        'smtp-password'
                    ];
                    
                    emailInputs.forEach(id => {
                        const element = document.getElementById(id);
                        if (element) {
                            const settingKey = id.replace(/-/g, '_');
                            element.value = settings[settingKey] || element.value;
                        }
                    });
                    
                    // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ (checkboxes)
                    const applicationToggle = document.getElementById('applications-enabled');
                    if (applicationToggle) {
                        applicationToggle.checked = settings.applicationsEnabled !== false;
                    }
                    
                    const twoFactorToggle = document.getElementById('two-factor-enabled');
                    if (twoFactorToggle) {
                        twoFactorToggle.checked = settings.twoFactorEnabled === true;
                    }
                    
                    const smtpTlsToggle = document.getElementById('smtp-tls');
                    if (smtpTlsToggle) {
                        smtpTlsToggle.checked = settings.smtpTls !== false;
                    }
                    
                    // Select –ø–æ–ª—è
                    const emailVerificationSelect = document.getElementById('require-email-verification');
                    if (emailVerificationSelect) {
                        emailVerificationSelect.value = settings.requireEmailVerification !== false ? 'true' : 'false';
                    }
                    
                    const autoApproveSelect = document.getElementById('auto-approve-trust-level');
                    if (autoApproveSelect) {
                        autoApproveSelect.value = settings.autoApproveTrustLevel || '0';
                    }
                    
                    console.log('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', settings);
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', response.status);
                    showMessage('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
            }
        }

        async function changeTrustLevel(userId, newLevel) {
            const levelNames = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫', 
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'
            };
            
            const levelName = levelNames[newLevel] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
            const reason = prompt(`–ü—Ä–∏—á–∏–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è Trust Level –Ω–∞ "${levelName}" (${newLevel}):`);
            
            if (!reason) return; // –û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/trust-level`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ level: parseInt(newLevel), reason: reason })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    showMessage(result.message || 'Trust Level —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω', 'success');
                    loadUsers();
                    loadDashboard();
                } else {
                    const error = await response.json();
                    showMessage('–û—à–∏–±–∫–∞: ' + error.error, 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–∞—Å—Ç –ª–µ–≤–µ–ª–∞:', error);
                showMessage('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            }
        }

        async function changeUserRoleSelect(userId, nickname, newRole) {
            if (!confirm(`–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${nickname} –Ω–∞ ${getRoleText(newRole)}?`)) {
                // –ï—Å–ª–∏ –æ—Ç–º–µ–Ω–∏–ª–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                loadUsers();
                return;
            }
            
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/admin/users/${userId}/role`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        role: newRole,
                        reason: `–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å`
                    })
                });
                
                if (response.ok) {
                    loadUsers();
                    loadDashboard();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                    loadUsers(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
                loadUsers(); // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            }
        }

        async function unbanUser(userId, nickname) {
            if (confirm(`–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${nickname}?`)) {
                try {
                    const token = localStorage.getItem('auth_token');
                    const response = await fetch(`/api/admin/users/${userId}/unban`, {
                        method: 'PUT',
                        headers: { 
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        loadUsers();
                        loadDashboard();
                    } else {
                        const error = await response.json();
                        alert('–û—à–∏–±–∫–∞: ' + error.error);
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:', error);
                    alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
                }
            }
        }

        async function reviewTrustApplication(id, status) {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch(`/api/trust-level/applications/${id}/review`, {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 
                        decision: status,
                        comment: status === 'approved' ? '–û–¥–æ–±—Ä–µ–Ω–æ' : '–û—Ç–∫–ª–æ–Ω–µ–Ω–æ'
                    })
                });
                
                if (response.ok) {
                    loadTrustApplications();
                    loadTrustLevelStats();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }

        async function updateUserRole(userId) {
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            console.log('–û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', userId);
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç
        async function testEmail() {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch('/api/admin/test/email', {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                const result = await response.json();
                showTestResult(result.success ? 'Email —Ç–µ—Å—Ç –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ' : 'Email —Ç–µ—Å—Ç –Ω–µ —É–¥–∞–ª—Å—è');
            } catch (error) {
                showTestResult('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ email: ' + error.message);
            }
        }

        async function testDatabase() {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch('/api/admin/test/database', {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                const result = await response.json();
                showTestResult(result.success ? '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ' : '–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö');
            } catch (error) {
                showTestResult('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ –ë–î: ' + error.message);
            }
        }

        async function clearCache() {
            try {
                const token = localStorage.getItem('auth_token');
                const response = await fetch('/api/admin/cache/clear', {
                    method: 'POST',
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                const result = await response.json();
                showTestResult(result.success ? '–ö–µ—à –æ—á–∏—â–µ–Ω —É—Å–ø–µ—à–Ω–æ' : '–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞');
            } catch (error) {
                showTestResult('–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞: ' + error.message);
            }
        }

        function showTestResult(message) {
            const testResults = document.getElementById('test-results');
            const testOutput = document.getElementById('test-output');
            
            if (testResults && testOutput) {
                testOutput.textContent = message;
                testResults.classList.remove('hidden');
                
                setTimeout(() => {
                    testResults.classList.add('hidden');
                }, 5000);
            }
        }

        async function saveSettings() {
            try {
                const token = localStorage.getItem('auth_token');
                const settings = {
                    serverName: document.getElementById('server-name').value,
                    serverDescription: document.getElementById('server-description').value,
                    serverIp: document.getElementById('server-ip').value,
                    serverPort: document.getElementById('server-port').value,
                    discordInvite: document.getElementById('discord-invite').value,
                    telegramInvite: document.getElementById('telegram-invite').value
                };
                
                const response = await fetch('/api/admin/settings', {
                    method: 'PUT',
                    headers: { 
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(settings)
                });
                
                if (response.ok) {
                    alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ');
                    await loadServerSettings();
                } else {
                    const error = await response.json();
                    alert('–û—à–∏–±–∫–∞: ' + error.error);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }
    </script>
</body>
</html>
