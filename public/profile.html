<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å - Chiwawa Server</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'minecraft-dark': '#0a0a0a',
                        'minecraft-darker': '#050505',
                        'minecraft-gold': '#FFAA00',
                        'minecraft-yellow': '#FFFF55',
                        'minecraft-gray': '#2a2a2a',
                        'minecraft-light-gray': '#3a3a3a',
                        'minecraft-lighter-gray': '#404040'
                    },
                    backdropBlur: {
                        'xs': '2px',
                    }
                }
            }
        }
    </script>
    <style>
        * {
            scrollbar-width: thin;
            scrollbar-color: #FFAA00 #1a1a1a;
        }
        
        *::-webkit-scrollbar {
            width: 8px;
        }
        
        *::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        *::-webkit-scrollbar-thumb {
            background: #FFAA00;
            border-radius: 4px;
        }
        
        .glass-effect {
            background: rgba(42, 42, 42, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 170, 0, 0.2);
        }
        
        .gold-glow {
            box-shadow: 0 0 20px rgba(255, 170, 0, 0.3);
        }
        
        .minecraft-button {
            background: linear-gradient(135deg, #FFAA00 0%, #FF8800 100%);
            box-shadow: 0 4px 15px rgba(255, 170, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .minecraft-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 170, 0, 0.4);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            min-height: 100vh;
        }
        
        .minecraft-card {
            background: rgba(42, 42, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 170, 0, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
    </style>
</head>
<body class="text-white min-h-screen overflow-x-hidden">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="minecraft-card sticky top-0 z-50 m-4 rounded-xl">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="/" class="flex items-center hover:scale-105 transition-transform duration-200">
                        <i class="fas fa-cubes text-minecraft-gold text-2xl mr-3 floating"></i>
                        <span class="text-2xl font-bold bg-gradient-to-r from-minecraft-gold to-minecraft-yellow bg-clip-text text-transparent">
                            Chiwawa Server
                        </span>
                    </a>
                </div>
                <div class="flex items-center space-x-6">
                    <a href="/" class="text-gray-300 hover:text-minecraft-gold transition-all duration-300 hover:scale-105">
                        <i class="fas fa-home mr-2"></i>–ì–ª–∞–≤–Ω–∞—è
                    </a>
                    <a href="/profile" class="text-minecraft-gold font-medium hover:scale-105 transition-all duration-300">
                        <i class="fas fa-user mr-2"></i>–ü—Ä–æ—Ñ–∏–ª—å
                    </a>
                    <a href="/admin" class="text-gray-300 hover:text-minecraft-gold transition-all duration-300 hover:scale-105 hidden" id="admin-link">
                        <i class="fas fa-cog mr-2"></i>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
                    </a>
                    <button id="logout-btn" class="minecraft-button text-white px-4 py-2 rounded-lg font-medium hover:scale-105 transition-all duration-300">
                        <i class="fas fa-sign-out-alt mr-2"></i>–í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        <div id="not-authorized-section" class="max-w-md mx-auto fade-in hidden">
            <div class="minecraft-card rounded-xl p-8 text-center">
                <i class="fas fa-lock text-minecraft-gold text-4xl mb-4 floating"></i>
                <h2 class="text-3xl font-bold bg-gradient-to-r from-minecraft-gold to-minecraft-yellow bg-clip-text text-transparent mb-4">
                    –î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
                </h2>
                <p class="text-gray-400 mb-6">–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</p>
                
                <div class="flex gap-3">
                    <a href="/login" class="flex-1 minecraft-button text-white py-3 px-4 rounded-lg text-center font-medium">
                        <i class="fas fa-sign-in-alt mr-2"></i>–í–æ–π—Ç–∏
                    </a>
                    <a href="/register" class="flex-1 bg-minecraft-gray border border-minecraft-light-gray text-white py-3 px-4 rounded-lg hover:border-minecraft-gold transition-all duration-300 text-center">
                        <i class="fas fa-user-plus mr-2"></i>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                    </a>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞) -->
        <div id="profile-section" class="hidden fade-in">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è -->
            <div class="minecraft-card rounded-xl p-6 mb-8">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-minecraft-gold to-minecraft-yellow rounded-full flex items-center justify-center mr-6 gold-glow">
                            <i class="fas fa-user text-minecraft-dark text-3xl"></i>
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold bg-gradient-to-r from-minecraft-gold to-minecraft-yellow bg-clip-text text-transparent" id="user-nickname">Loading...</h1>
                            <p class="text-gray-300 text-lg" id="user-trust-level">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                            <div class="flex items-center mt-2">
                                <div class="w-32 bg-minecraft-gray rounded-full h-2 mr-3">
                                    <div id="trust-progress-header" class="bg-gradient-to-r from-minecraft-gold to-minecraft-yellow h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
                                </div>
                                <span class="text-sm text-gray-400" id="trust-progress-text">0/100</span>
                            </div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-400">–°—Ç–∞—Ç—É—Å</div>
                        <div id="user-status" class="font-bold text-lg text-green-400">–ê–∫—Ç–∏–≤–µ–Ω</div>
                        <div class="text-sm text-gray-400 mt-1">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
                        <div id="user-created" class="text-sm text-gray-300">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- –¢–∞–±—ã -->
            <div class="minecraft-card rounded-xl mb-8">
                <div class="border-b border-minecraft-light-gray">
                    <nav class="flex space-x-8 px-6">
                        <button class="tab-btn py-4 px-2 border-b-2 border-minecraft-gold text-minecraft-gold font-medium transition-all duration-300" data-tab="info">
                            <i class="fas fa-info-circle mr-2"></i>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                        </button>
                        <button class="tab-btn py-4 px-2 border-b-2 border-transparent text-gray-400 hover:text-minecraft-gold transition-all duration-300" data-tab="settings">
                            <i class="fas fa-cog mr-2"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                        <button class="tab-btn py-4 px-2 border-b-2 border-transparent text-gray-400 hover:text-minecraft-gold transition-all duration-300" data-tab="activity">
                            <i class="fas fa-history mr-2"></i>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                        </button>
                        <button class="tab-btn py-4 px-2 border-b-2 border-transparent text-gray-400 hover:text-minecraft-gold transition-all duration-300" data-tab="stats">
                            <i class="fas fa-chart-bar mr-2"></i>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                        </button>
                    </nav>
                </div>

                <div class="p-6">
                    <!-- –í–∫–ª–∞–¥–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
                    <div id="tab-info" class="tab-content">
                        <div class="grid lg:grid-cols-2 gap-8">
                            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                            <div class="glass-effect rounded-xl p-6">
                                <h3 class="text-xl font-bold text-minecraft-gold mb-6 flex items-center">
                                    <i class="fas fa-id-card mr-3"></i>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center py-3 border-b border-minecraft-light-gray">
                                        <span class="text-gray-300 flex items-center">
                                            <i class="fas fa-gamepad mr-3 text-minecraft-gold"></i>Minecraft –Ω–∏–∫:
                                        </span>
                                        <span id="profile-nickname" class="font-bold text-white">Loading...</span>
                                    </div>
                                    <div class="flex justify-between items-center py-3 border-b border-minecraft-light-gray">
                                        <span class="text-gray-300 flex items-center">
                                            <i class="fas fa-envelope mr-3 text-minecraft-gold"></i>Email:
                                        </span>
                                        <span id="profile-email" class="font-medium text-white">Loading...</span>
                                    </div>
                                    <div class="flex justify-between items-center py-3 border-b border-minecraft-light-gray">
                                        <span class="text-gray-300 flex items-center">
                                            <i class="fab fa-discord mr-3 text-minecraft-gold"></i>Discord:
                                        </span>
                                        <span id="profile-discord" class="font-medium text-white">Loading...</span>
                                    </div>
                                    <div class="flex justify-between items-center py-3">
                                        <span class="text-gray-300 flex items-center">
                                            <i class="fas fa-calendar mr-3 text-minecraft-gold"></i>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
                                        </span>
                                        <span id="profile-created" class="font-medium text-white">Loading...</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Trust Level –ø—Ä–æ–≥—Ä–µ—Å—Å -->
                            <div class="glass-effect rounded-xl p-6">
                                <h3 class="text-xl font-bold text-minecraft-gold mb-6 flex items-center">
                                    <i class="fas fa-star mr-3"></i>–£—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è
                                </h3>
                                <div class="space-y-6">
                                    <div class="text-center">
                                        <div class="text-4xl font-bold text-minecraft-gold mb-2" id="trust-current">0</div>
                                        <div class="text-gray-300" id="trust-current-name">–ù–æ–≤–∏—á–æ–∫</div>
                                    </div>
                                    
                                    <div class="relative">
                                        <div class="w-full bg-minecraft-gray rounded-full h-4">
                                            <div id="trust-progress" class="bg-gradient-to-r from-minecraft-gold to-minecraft-yellow h-4 rounded-full transition-all duration-500 gold-glow" style="width: 0%"></div>
                                        </div>
                                        <div class="flex justify-between text-sm text-gray-400 mt-2">
                                            <span>–¢–µ–∫—É—â–∏–π: <span id="trust-reputation" class="text-minecraft-gold font-bold">0</span></span>
                                            <span>–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ: <span id="trust-next" class="text-minecraft-gold font-bold">10</span></span>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-minecraft-dark rounded-lg p-4">
                                        <div class="text-sm text-gray-400 mb-2">–ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏ —É—Ä–æ–≤–Ω—è:</div>
                                        <div id="trust-privileges" class="text-minecraft-gold text-sm">
                                            –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –í–∫–ª–∞–¥–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
                    <div id="tab-settings" class="tab-content hidden">
                        <div class="glass-effect rounded-xl p-6">
                            <h3 class="text-xl font-bold text-minecraft-gold mb-6 flex items-center">
                                <i class="fas fa-cog mr-3"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
                            </h3>
                            
                            <div id="settings-message" class="hidden mb-6"></div>
                            
                            <form id="settings-form" class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">
                                        <i class="fas fa-user mr-2 text-minecraft-gold"></i>–ò–º—è
                                    </label>
                                    <input type="text" name="first_name" id="settings-firstname"
                                        class="w-full px-4 py-3 bg-minecraft-gray border border-minecraft-light-gray rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-minecraft-gold focus:border-minecraft-gold transition-all duration-300"
                                        placeholder="–í–∞—à–µ –∏–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
                                </div>
                                
                                <!-- –ü—Ä–∏–≤—è–∑–∫–∞ Discord —á–µ—Ä–µ–∑ OAuth -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">
                                        <i class="fab fa-discord mr-2 text-minecraft-gold"></i>Discord –∞–∫–∫–∞—É–Ω—Ç
                                    </label>
                                    <div id="discord-status" class="w-full px-4 py-3 bg-minecraft-gray border border-minecraft-light-gray rounded-lg text-white flex items-center justify-between">
                                        <span id="discord-info" class="text-gray-400">–ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω</span>
                                        <button type="button" id="discord-connect-btn" class="px-4 py-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-lg text-sm font-medium transition-all duration-300">
                                            <i class="fab fa-discord mr-1"></i>–ü—Ä–∏–≤—è–∑–∞—Ç—å Discord
                                        </button>
                                    </div>
                                </div>

                                <!-- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-2">
                                        <i class="fas fa-envelope mr-2 text-minecraft-gold"></i>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ Email
                                    </label>
                                    <div class="mb-2 text-sm text-gray-400">
                                        –¢–µ–∫—É—â–∞—è –ø–æ—á—Ç–∞: <span id="current-email" class="text-minecraft-yellow">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                                    </div>
                                    <div id="email-verification-status" class="w-full px-4 py-3 bg-minecraft-gray border border-minecraft-light-gray rounded-lg text-white flex items-center justify-between">
                                        <span id="email-status" class="text-gray-400">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                                        <div class="flex gap-2">
                                            <button type="button" id="change-email-btn" class="px-4 py-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg text-sm font-medium transition-all duration-300">
                                                <i class="fas fa-edit mr-1"></i>–°–º–µ–Ω–∏—Ç—å –ø–æ—á—Ç—É
                                            </button>
                                            <button type="button" id="verify-email-btn" class="hidden px-4 py-1 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white rounded-lg text-sm font-medium transition-all duration-300">
                                                <i class="fas fa-envelope-open mr-1"></i>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ—á—Ç—É
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="pt-4 border-t border-minecraft-light-gray">
                                    <h4 class="text-lg font-medium text-minecraft-gold mb-4">–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h4>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-300 mb-2">
                                                <i class="fas fa-lock mr-2 text-minecraft-gold"></i>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å
                                            </label>
                                            <input type="password" name="current_password" id="settings-current-password"
                                                class="w-full px-4 py-3 bg-minecraft-gray border border-minecraft-light-gray rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-minecraft-gold focus:border-minecraft-gold transition-all duration-300"
                                                placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å –¥–ª—è —Å–º–µ–Ω—ã">
                                        </div>
                                        <div class="grid md:grid-cols-2 gap-6">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                                    <i class="fas fa-key mr-2 text-minecraft-gold"></i>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
                                                </label>
                                                <input type="password" name="new_password" id="settings-new-password"
                                                    class="w-full px-4 py-3 bg-minecraft-gray border border-minecraft-light-gray rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-minecraft-gold focus:border-minecraft-gold transition-all duration-300"
                                                    placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-300 mb-2">
                                                    <i class="fas fa-check mr-2 text-minecraft-gold"></i>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
                                                </label>
                                                <input type="password" name="confirm_password" id="settings-confirm-password"
                                                    class="w-full px-4 py-3 bg-minecraft-gray border border-minecraft-light-gray rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-minecraft-gold focus:border-minecraft-gold transition-all duration-300"
                                                    placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å">
                                            </div>
                                        </div>
                                        <div class="bg-minecraft-dark rounded-lg p-4">
                                            <div class="text-sm text-gray-400">
                                                <i class="fas fa-info-circle mr-2 text-minecraft-gold"></i>
                                                –î–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-center pt-4">
                                    <button type="submit" class="minecraft-button text-white px-8 py-3 rounded-lg font-medium text-lg">
                                        <i class="fas fa-save mr-2"></i>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- –í–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
                    <div id="tab-activity" class="tab-content hidden">
                        <div class="glass-effect rounded-xl p-6">
                            <h3 class="text-xl font-bold text-minecraft-gold mb-6 flex items-center">
                                <i class="fas fa-history mr-3"></i>–ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                            </h3>
                            <div id="activity-list" class="space-y-3">
                                <div class="text-center text-gray-400 py-12">
                                    <i class="fas fa-history text-4xl mb-4"></i>
                                    <p class="text-lg">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –í–∫–ª–∞–¥–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
                    <div id="tab-stats" class="tab-content hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="glass-effect rounded-xl p-6 text-center">
                                <i class="fas fa-clock text-minecraft-gold text-3xl mb-3"></i>
                                <div class="text-3xl font-bold text-white mb-2" id="stat-playtime">0</div>
                                <div class="text-gray-400">–ß–∞—Å–æ–≤ –∏–≥—Ä—ã</div>
                            </div>
                            <div class="glass-effect rounded-xl p-6 text-center">
                                <i class="fas fa-sign-in-alt text-minecraft-gold text-3xl mb-3"></i>
                                <div class="text-3xl font-bold text-white mb-2" id="stat-logins">0</div>
                                <div class="text-gray-400">–í—Ö–æ–¥–æ–≤</div>
                            </div>
                            <div class="glass-effect rounded-xl p-6 text-center">
                                <i class="fas fa-exclamation-triangle text-minecraft-gold text-3xl mb-3"></i>
                                <div class="text-3xl font-bold text-white mb-2" id="stat-warnings">0</div>
                                <div class="text-gray-400">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π</div>
                            </div>
                            <div class="glass-effect rounded-xl p-6 text-center">
                                <i class="fas fa-trophy text-minecraft-gold text-3xl mb-3"></i>
                                <div class="text-3xl font-bold text-white mb-2" id="stat-achievements">0</div>
                                <div class="text-gray-400">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–π</div>
                            </div>
                        </div>
                        
                        <div class="grid lg:grid-cols-2 gap-8">
                            <div class="glass-effect rounded-xl p-6">
                                <h4 class="text-lg font-bold text-minecraft-gold mb-4 flex items-center">
                                    <i class="fas fa-chart-line mr-3"></i>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º
                                </h4>
                                <div id="activity-chart" class="text-center text-gray-400 py-8">
                                    –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±—É–¥–µ—Ç –∑–¥–µ—Å—å
                                </div>
                            </div>
                            
                            <div class="glass-effect rounded-xl p-6">
                                <h4 class="text-lg font-bold text-minecraft-gold mb-4 flex items-center">
                                    <i class="fas fa-medal mr-3"></i>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                                </h4>
                                <div id="recent-achievements" class="space-y-3">
                                    <div class="text-center text-gray-400 py-8">
                                        <i class="fas fa-trophy text-2xl mb-2"></i>
                                        <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- JavaScript -->
    <script>
        let currentUser = null;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', async () => {
            const token = localStorage.getItem('auth_token');
            if (token) {
                try {
                    const response = await fetch('/api/auth/verify', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                    
                    if (response.ok) {
                        const userData = await response.json();
                        currentUser = userData.user;
                        showProfile();
                        loadProfileData();
                    } else {
                        localStorage.removeItem('auth_token');
                        showNotAuthorized();
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞:', error);
                    showNotAuthorized();
                }
            } else {
                showNotAuthorized();
            }
        });

        // –í—ã—Ö–æ–¥
        document.getElementById('logout-btn').addEventListener('click', async () => {
            const token = localStorage.getItem('auth_token');
            if (token) {
                try {
                    await fetch('/api/auth/logout', {
                        headers: { 'Authorization': `Bearer ${token}` }
                    });
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞:', error);
                }
            }
            
            localStorage.removeItem('auth_token');
            localStorage.removeItem('remember_me');
            localStorage.removeItem('token_expires');
            currentUser = null;
            window.location.href = '/login';
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const tabId = btn.dataset.tab;
                
                // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                document.querySelectorAll('.tab-btn').forEach(b => {
                    b.classList.remove('border-minecraft-gold', 'text-minecraft-gold');
                    b.classList.add('border-transparent', 'text-gray-400');
                });
                document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
                
                // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Ç–µ–∫—É—â—É—é –≤–∫–ª–∞–¥–∫—É
                btn.classList.remove('border-transparent', 'text-gray-400');
                btn.classList.add('border-minecraft-gold', 'text-minecraft-gold');
                document.getElementById(`tab-${tabId}`).classList.remove('hidden');
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
                if (tabId === 'activity') {
                    loadActivity();
                } else if (tabId === 'stats') {
                    loadStatistics();
                }
            });
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        document.getElementById('settings-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
            if (data.new_password) {
                if (!data.current_password) {
                    showMessage('settings-message', '–î–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å', 'error');
                    return;
                }
                
                if (data.new_password !== data.confirm_password) {
                    showMessage('settings-message', '–ù–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error');
                    return;
                }
                
                if (data.new_password.length < 6) {
                    showMessage('settings-message', '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error');
                    return;
                }
            }
            
            // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –∏–∑ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            delete data.confirm_password;
            
            // –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ —É–∫–∞–∑–∞–Ω, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è
            if (!data.new_password) {
                delete data.new_password;
                delete data.current_password;
            }
            
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch('/api/profile', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    showMessage('settings-message', '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
                    // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –ø–∞—Ä–æ–ª—è
                    document.getElementById('settings-current-password').value = '';
                    document.getElementById('settings-new-password').value = '';
                    document.getElementById('settings-confirm-password').value = '';
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
                    loadProfileData();
                } else {
                    const error = await response.json();
                    showMessage('settings-message', error.error || '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showMessage('settings-message', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
            }
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è Discord –∏ email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
        document.getElementById('discord-connect-btn').addEventListener('click', function() {
            if (this.textContent.includes('–ü—Ä–∏–≤—è–∑–∞—Ç—å')) {
                // –ü–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è –Ω–∞ Discord OAuth
                window.location.href = '/api/auth/discord';
            } else {
                // –û—Ç–≤—è–∑–∫–∞ Discord
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–≤—è–∑–∞—Ç—å Discord –∞–∫–∫–∞—É–Ω—Ç?')) {
                    // TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–≤—è–∑–∫—É Discord
                    showMessage('settings-message', '–û—Ç–≤—è–∑–∫–∞ Discord –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞', 'error');
                }
            }
        });

        document.getElementById('verify-email-btn').addEventListener('click', async function() {
            const token = localStorage.getItem('auth_token');
            this.disabled = true;
            this.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
            
                try {
                    const response = await fetch('/api/auth/send-verification', {
                        method: 'POST',
                        headers: { 'Authorization': `Bearer ${token}` }
                    });                if (response.ok) {
                    showMessage('settings-message', '–ü–∏—Å—å–º–æ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –≤–∞—à email', 'success');
                } else {
                    const error = await response.json();
                    showMessage('settings-message', error.error || '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞', 'error');
                }
            } catch (error) {
                showMessage('settings-message', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è', 'error');
            } finally {
                this.disabled = false;
                this.innerHTML = '<i class="fas fa-envelope-open mr-1"></i>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ';
            }
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å–º–µ–Ω—ã –ø–æ—á—Ç—ã
        document.getElementById('change-email-btn').addEventListener('click', function() {
            const newEmail = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã:');
            if (newEmail && newEmail.includes('@')) {
                // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å API –≤—ã–∑–æ–≤ –¥–ª—è —Å–º–µ–Ω—ã –ø–æ—á—Ç—ã
                showMessage('settings-message', '–§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã –ø–æ—á—Ç—ã –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏', 'info');
            } else if (newEmail) {
                showMessage('settings-message', '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å', 'error');
            }
        });

        function showNotAuthorized() {
            document.getElementById('not-authorized-section').classList.remove('hidden');
            document.getElementById('profile-section').classList.add('hidden');
            document.getElementById('logout-btn').style.display = 'none';
            document.getElementById('admin-link').classList.add('hidden');
        }

        function showProfile() {
            document.getElementById('not-authorized-section').classList.add('hidden');
            document.getElementById('profile-section').classList.remove('hidden');
            document.getElementById('logout-btn').style.display = 'block';
        }

        async function loadProfileData() {
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch('/api/profile', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                    const displayName = data.minecraft_nick || data.nickname || 'N/A';
                    const firstName = data.first_name;
                    const fullDisplayName = firstName ? `${displayName} (${firstName})` : displayName;
                    
                    document.getElementById('user-nickname').textContent = fullDisplayName;
                    document.getElementById('user-trust-level').textContent = `–†–∞–Ω–≥: ${data.trust_level || 0} - ${data.trust_level_name || '–ù–æ–≤–∏—á–æ–∫'}`;
                    document.getElementById('profile-nickname').textContent = fullDisplayName;
                    document.getElementById('profile-email').textContent = data.email || 'N/A';
                    document.getElementById('current-email').textContent = data.email || '–ù–µ —É–∫–∞–∑–∞–Ω';
                    document.getElementById('profile-discord').textContent = data.discord || '–ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω';
                    document.getElementById('profile-created').textContent = new Date(data.registered_at).toLocaleDateString('ru-RU');
                    document.getElementById('user-created').textContent = new Date(data.registered_at).toLocaleDateString('ru-RU');

                    // Trust Level –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                    const trustLevelNames = {
                        0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü',
                        1: 'üë§ –ù–æ–≤–∏—á–æ–∫', 
                        2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π',
                        3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω'
                    };
                    
                    const trustLevel = data.trust_level || 0;
                    const trustLevelName = trustLevelNames[trustLevel] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
                    
                    document.getElementById('user-trust-level').textContent = `${trustLevelName} (–£—Ä–æ–≤–µ–Ω—å ${trustLevel})`;
                    document.getElementById('trust-current').textContent = trustLevel;
                    document.getElementById('trust-current-name').textContent = trustLevelName;
                    
                    // –ü—Ä–æ–≥—Ä–µ—Å—Å Trust Level (—Ç–µ–ø–µ—Ä—å –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö)
                    const requirements = {
                        0: { hours: 0, reputation: 0 },
                        1: { hours: 0, reputation: 0 },
                        2: { hours: 25, reputation: 10 },
                        3: { hours: 50, reputation: 20 }
                    };
                    
                    const currentHours = Math.floor((stats.playtime || 0) / 60);
                    const currentReputation = data.reputation || 0;
                    
                    let progressPercent = 0;
                    let progressText = '';
                    
                    if (trustLevel >= 3) {
                        progressPercent = 100;
                        progressText = '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
                    } else {
                        const nextLevel = trustLevel + 1;
                        const nextRequirements = requirements[nextLevel];
                        
                        const hoursProgress = Math.min(currentHours / nextRequirements.hours, 1) * 50;
                        const reputationProgress = Math.min(currentReputation / nextRequirements.reputation, 1) * 50;
                        progressPercent = hoursProgress + reputationProgress;
                        
                        progressText = `${currentHours}/${nextRequirements.hours} —á–∞—Å–æ–≤, ${currentReputation}/${nextRequirements.reputation} —Ä–µ–ø—É—Ç–∞—Ü–∏–∏`;
                    }
                    
                    document.getElementById('trust-progress').style.width = progressPercent + '%';
                    document.getElementById('trust-progress-header').style.width = progressPercent + '%';
                    document.getElementById('trust-progress-text').textContent = progressText;
                    
                    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏
                    document.getElementById('trust-reputation').textContent = currentReputation;
                    if (trustLevel >= 3) {
                        document.getElementById('trust-next').textContent = '–ú–∞–∫—Å. —É—Ä–æ–≤–µ–Ω—å';
                    } else {
                        const nextLevel = trustLevel + 1;
                        const nextRequirements = requirements[nextLevel];
                        document.getElementById('trust-next').textContent = `${nextRequirements.reputation - currentReputation} —Ä–µ–ø—É—Ç–∞—Ü–∏–∏`;
                    }
                    
                    // –ü—Ä–∏–≤–∏–ª–µ–≥–∏–∏ —É—Ä–æ–≤–Ω—è
                    document.getElementById('trust-privileges').textContent = getTrustLevelPrivileges(data.trust_level || 0);
                    
                    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                    const stats = data.stats || {};
                    document.getElementById('stat-playtime').textContent = Math.floor((stats.playtime || 0) / 60);
                    document.getElementById('stat-logins').textContent = stats.total_logins || 0;
                    document.getElementById('stat-warnings').textContent = stats.warnings_count || 0;
                    document.getElementById('stat-achievements').textContent = stats.achievements_count || 0;
                    
                    // Discord —Å—Ç–∞—Ç—É—Å
                    const discordInfo = document.getElementById('discord-info');
                    const discordBtn = document.getElementById('discord-connect-btn');
                    if (data.discord) {
                        discordInfo.textContent = data.discord;
                        discordBtn.innerHTML = '<i class="fab fa-discord mr-1"></i>–û—Ç–≤—è–∑–∞—Ç—å Discord';
                        discordBtn.className = discordBtn.className.replace('from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700', 'from-red-600 to-red-600 hover:from-red-700 hover:to-red-700');
                    } else {
                        discordInfo.textContent = '–ù–µ –ø—Ä–∏–≤—è–∑–∞–Ω';
                        discordBtn.innerHTML = '<i class="fab fa-discord mr-1"></i>–ü—Ä–∏–≤—è–∑–∞—Ç—å Discord';
                        discordBtn.className = discordBtn.className.replace('from-red-600 to-red-600 hover:from-red-700 hover:to-red-700', 'from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700');
                    }
                    
                    // Email —Å—Ç–∞—Ç—É—Å
                    const emailStatus = document.getElementById('email-status');
                    const verifyBtn = document.getElementById('verify-email-btn');
                    if (data.is_email_verified) {
                        emailStatus.textContent = '‚úÖ Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω';
                        emailStatus.className = 'text-green-400';
                        verifyBtn.classList.add('hidden');
                    } else {
                        emailStatus.textContent = '‚ùå Email –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω';
                        emailStatus.className = 'text-red-400';
                        verifyBtn.classList.remove('hidden');
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
                    const adminLink = document.getElementById('admin-link');
                    if (data.role === 'admin' || data.role === 'moderator') {
                        adminLink.classList.remove('hidden');
                    } else {
                        adminLink.classList.add('hidden');
                    }
                    
                    // –°—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    const statusElement = document.getElementById('user-status');
                    const status = data.status || 'active'; // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å –∏–∑ –¥–∞–Ω–Ω—ã—Ö
                    
                    switch(status) {
                        case 'banned':
                            statusElement.textContent = '–ó–ê–ë–ê–ù–ï–ù';
                            statusElement.className = 'font-bold text-lg text-red-400';
                            break;
                        case 'pending':
                            statusElement.textContent = '–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ';
                            statusElement.className = 'font-bold text-lg text-yellow-400';
                            break;
                        case 'rejected':
                            statusElement.textContent = '–ù–µ –ø—Ä–∏–Ω—è—Ç';
                            statusElement.className = 'font-bold text-lg text-orange-400';
                            break;
                        case 'active':
                        default:
                            statusElement.textContent = '–ê–∫—Ç–∏–≤–µ–Ω';
                            statusElement.className = 'font-bold text-lg text-green-400';
                            break;
                    }
                    
                    // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ is_banned –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
                    if (data.is_banned) {
                        statusElement.textContent = '–ó–ê–ë–ê–ù–ï–ù';
                        statusElement.className = 'font-bold text-lg text-red-400';
                    }
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è:', error);
            }
        }

        function getTrustLevelPrivileges(level) {
            const privileges = {
                0: 'üö∂ –ü—Ä–æ—Ö–æ–¥–∏–º–µ—Ü: –õ–∏–º–∏—Ç 10 —á–∞—Å–æ–≤ –∏–≥—Ä—ã –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—á—Ç—ã',
                1: 'üë§ –ù–æ–≤–∏—á–æ–∫: –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–≥—Ä—ã –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ—á—Ç—ã',
                2: '‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π: –£—á–∞—Å—Ç–∏–µ –≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è—Ö, —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, –æ—Å–æ–±—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏',
                3: 'üèÜ –í–µ—Ç–µ—Ä–∞–Ω: –ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–∏—á–∫–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –∏–≤–µ–Ω—Ç–æ–≤, –æ—Å–æ–±—ã–π —Å—Ç–∞—Ç—É—Å'
            };
            return privileges[level] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å';
        }

        async function loadActivity() {
            const token = localStorage.getItem('auth_token');
            const activityList = document.getElementById('activity-list');
            
            try {
                const response = await fetch('/api/profile/activity', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.activity && data.activity.length > 0) {
                        activityList.innerHTML = data.activity.map(activity => `
                            <div class="flex items-center p-4 bg-minecraft-dark rounded-lg border border-minecraft-light-gray">
                                <div class="w-2 h-2 bg-minecraft-gold rounded-full mr-4"></div>
                                <div class="flex-1">
                                    <div class="text-white font-medium">${activity.description}</div>
                                    <div class="text-sm text-gray-400">${new Date(activity.created_at).toLocaleString('ru-RU')}</div>
                                </div>
                                <div class="text-minecraft-gold text-sm font-medium">
                                    ${activity.activity_type}
                                </div>
                            </div>
                        `).join('');
                    } else {
                        activityList.innerHTML = `
                            <div class="text-center text-gray-400 py-12">
                                <i class="fas fa-history text-4xl mb-4"></i>
                                <p class="text-lg">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
                            </div>
                        `;
                    }
                } else {
                    activityList.innerHTML = `
                        <div class="text-center text-red-400 py-12">
                            <i class="fas fa-exclamation-triangle text-4xl mb-4"></i>
                            <p class="text-lg">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:', error);
                activityList.innerHTML = `
                    <div class="text-center text-red-400 py-12">
                        <i class="fas fa-wifi text-4xl mb-4"></i>
                        <p class="text-lg">–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è</p>
                    </div>
                `;
            }
        }

        async function loadStatistics() {
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —É–∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ loadProfileData
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
            
            const achievementsContainer = document.getElementById('recent-achievements');
            const token = localStorage.getItem('auth_token');
            
            try {
                const response = await fetch('/api/profile/achievements', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.achievements && data.achievements.length > 0) {
                        achievementsContainer.innerHTML = data.achievements.slice(0, 5).map(achievement => `
                            <div class="flex items-center p-3 bg-minecraft-dark rounded-lg">
                                <i class="fas fa-trophy text-minecraft-gold mr-3"></i>
                                <div>
                                    <div class="font-medium text-white">${achievement.name}</div>
                                    <div class="text-sm text-gray-400">${achievement.description}</div>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        achievementsContainer.innerHTML = `
                            <div class="text-center text-gray-400 py-8">
                                <i class="fas fa-trophy text-2xl mb-2"></i>
                                <p>–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</p>
                            </div>
                        `;
                    }
                } else {
                    achievementsContainer.innerHTML = `
                        <div class="text-center text-gray-400 py-8">
                            <i class="fas fa-trophy text-2xl mb-2"></i>
                            <p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:', error);
            }
        }

        function showMessage(elementId, text, type) {
            const element = document.getElementById(elementId);
            element.textContent = text;
            element.className = `mb-6 p-4 rounded-lg ${
                type === 'success' ? 
                'bg-green-900 text-green-300 border border-green-700' : 
                'bg-red-900 text-red-300 border border-red-700'
            }`;
            element.classList.remove('hidden');
            
            setTimeout(() => {
                element.classList.add('hidden');
            }, 5000);
        }
    </script>
</body>
</html>
